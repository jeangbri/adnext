(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7],{41007:function(e,a,s){Promise.resolve().then(s.bind(s,60952))},60952:function(e,a,s){"use strict";s.r(a),s.d(a,{RuleEditor:function(){return Q}});var t=s(89075),r=s(50511),l=s(65095),n=s(5816),i=s(45859),c=s(38683),o=s(64369),d=s(14860),x=s(67070),u=s(65771),p=s(90261),m=s(63616),h=s(79071),f="Switch",[g,b]=(0,x.b)(f),[v,j]=g(f),N=r.forwardRef((e,a)=>{let{__scopeSwitch:s,name:l,checked:n,defaultChecked:i,required:c,disabled:x,value:p="on",onCheckedChange:m,form:g,...b}=e,[j,N]=r.useState(null),y=(0,d.e)(a,e=>N(e)),w=r.useRef(!1),C=!j||g||!!j.closest("form"),[T,E]=(0,u.T)({prop:n,defaultProp:null!=i&&i,onChange:m,caller:f});return(0,t.jsxs)(v,{scope:s,checked:T,disabled:x,children:[(0,t.jsx)(h.WV.button,{type:"button",role:"switch","aria-checked":T,"aria-required":c,"data-state":k(T),"data-disabled":x?"":void 0,disabled:x,value:p,...b,ref:y,onClick:(0,o.Mj)(e.onClick,e=>{E(e=>!e),C&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),C&&(0,t.jsx)(z,{control:j,bubbles:!w.current,name:l,value:p,checked:T,required:c,disabled:x,form:g,style:{transform:"translateX(-100%)"}})]})});N.displayName=f;var y="SwitchThumb",w=r.forwardRef((e,a)=>{let{__scopeSwitch:s,...r}=e,l=j(y,s);return(0,t.jsx)(h.WV.span,{"data-state":k(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:a})});w.displayName=y;var z=r.forwardRef((e,a)=>{let{__scopeSwitch:s,control:l,checked:n,bubbles:i=!0,...c}=e,o=r.useRef(null),x=(0,d.e)(o,a),u=(0,p.D)(n),h=(0,m.t)(l);return r.useEffect(()=>{let e=o.current;if(!e)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==n&&a){let s=new Event("click",{bubbles:i});a.call(e,n),e.dispatchEvent(s)}},[u,n,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...c,tabIndex:-1,ref:x,style:{...c.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function k(e){return e?"checked":"unchecked"}z.displayName="SwitchBubbleInput";var C=s(22526);let T=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(N,{className:(0,C.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:a,children:(0,t.jsx)(w,{className:(0,C.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});T.displayName=N.displayName;var E=s(30073),I=s(20486),S=s(53152),_=s(44431),M=s(47641),A=s(31860),O=s(45845),R=s(46036),Z=s(76754),P=s(79318);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,P.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),U=(0,P.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),B=(0,P.Z)("FileAudio",[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]]);var G=s(980),V=s(93628),H=s(63350),L=s(49397);function F(e){let{valueMs:a,onChange:s}=e,[l,n]=(0,r.useState)("minutes"),[i,o]=(0,r.useState)(0);(0,r.useEffect)(()=>{if(0===a){o(0);return}a%36e5==0?(n("hours"),o(a/36e5)):a%6e4==0?(n("minutes"),o(a/6e4)):(n("seconds"),o(Math.floor(a/1e3)))},[a]);let d=(e,a)=>{let t=0;"seconds"===a&&(t=1e3*e),"minutes"===a&&(t=6e4*e),"hours"===a&&(t=36e5*e),s(t),o(e),n(a)};return(0,t.jsxs)("div",{className:"flex items-center gap-1 bg-black/20 rounded border border-zinc-800/50 p-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 pl-1",children:"Delay:"}),(0,t.jsx)(c.I,{type:"number",min:0,className:"w-12 h-6 text-xs px-1 py-0 bg-transparent border-none focus-visible:ring-0 text-right",value:i,onChange:e=>d(Number(e.target.value),l)}),(0,t.jsxs)(H.Ph,{value:l,onValueChange:e=>d(i,e),children:[(0,t.jsx)(H.i4,{className:"h-6 w-[70px] text-[10px] px-1 border-none bg-transparent focus:ring-0 gap-0",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"seconds",children:"Seg"}),(0,t.jsx)(H.Ql,{value:"minutes",children:"Min"}),(0,t.jsx)(H.Ql,{value:"hours",children:"Horas"})]})]})]})}function Q(e){var a,s,o;let{rule:d,mode:x}=e,u=(0,l.useRouter)();(0,n.e)();let[p,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)({}),[g,b]=(0,r.useState)((null==d?void 0:d.name)||""),[v,j]=(0,r.useState)(null===(o=null==d?void 0:d.isActive)||void 0===o||o),[N,y]=(0,r.useState)((null==d?void 0:d.priority)||0),[w,z]=(0,r.useState)((null==d?void 0:d.cooldownSeconds)||0),[k,C]=(0,r.useState)((null==d?void 0:d.matchType)||"CONTAINS"),[P,Q]=(0,r.useState)((null==d?void 0:d.matchOperator)||"ANY"),[q,W]=(0,r.useState)(""),[Y,J]=(0,r.useState)((null==d?void 0:d.keywords)||[]),[X,K]=(0,r.useState)((null==d?void 0:d.triggerType)||"MESSAGE_ANY"),[$,ee]=(0,r.useState)((null==d?void 0:d.triggerConfig)||{}),[ea,es]=(0,r.useState)((null==d?void 0:null===(a=d.flow)||void 0===a?void 0:a.enabled)||!1),[et,er]=(0,r.useState)((null==d?void 0:null===(s=d.flow)||void 0===s?void 0:s.steps)||[]),[el,en]=(0,r.useState)([]),[ei,ec]=(0,r.useState)((null==d?void 0:d.pageIds)||[]),[eo,ed]=(0,r.useState)([]),[ex,eu]=(0,r.useState)(!1),[ep,em]=(0,r.useState)(!1),eh=async()=>{if(1!==ei.length){V.Am.error("Selecione exatamente UMA p\xe1gina para buscar posts.");return}eu(!0);try{let e=await fetch("/api/messenger/pages/".concat(ei[0],"/posts")),a=await e.json();if(a.error)throw Error(a.error);ed(a.posts||[]),em(!0)}catch(e){V.Am.error(e.message||"Erro ao buscar posts")}finally{eu(!1)}};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/messenger/status");if(e.ok){let a=await e.json();en(a.accounts||[])}}catch(e){console.error(e)}})()},[]);let[ef,eg]=(0,r.useState)(()=>(function(e){let a=[],s=e=>{let a="reply",s="";return"web_url"===e.type?(a="url",s=e.url||""):e.payload&&e.payload.startsWith("FLOW_JUMP::")?(a="flow_jump",s=e.payload.replace("FLOW_JUMP::","")):(a="reply",s=e.payload||e.title||""),{label:e.title||e.label||"Bot\xe3o",actionType:a,value:s}};for(let t=0;t<e.length;t++){let r=e[t];if("TEXT"===r.type){let l=e[t+1];if(l&&"BUTTON_TEMPLATE"===l.type&&(!l.delayMs||0===l.delayMs)){a.push({type:"MESSAGE_WITH_BUTTONS",delayMs:r.delayMs,payload:{message:r.payload.text,buttons:(l.payload.buttons||[]).map(s)}}),t++;continue}a.push({type:"MESSAGE_WITH_BUTTONS",delayMs:r.delayMs,payload:{message:r.payload.text,buttons:[]}});continue}if("BUTTON_TEMPLATE"===r.type){a.push({type:"MESSAGE_WITH_BUTTONS",delayMs:r.delayMs,payload:{message:r.payload.text,buttons:(r.payload.buttons||[]).map(s)}});continue}a.push(r)}return a})((null==d?void 0:d.actions)||[])),eb=()=>{q.trim()&&(J([...Y,q.trim()]),W(""))},ev=e=>{J(Y.filter((a,s)=>s!==e))},ej=e=>{eg([...ef,{type:e,delayMs:0,payload:eN(e)}]),V.Am.success("A\xe7\xe3o ".concat(ey(e)," adicionada"))},eN=e=>{switch(e){case"TEXT":return{text:""};case"MESSAGE_WITH_BUTTONS":return{message:"",buttons:[]};case"BUTTON_TEMPLATE":return{text:"",buttons:[]};case"GENERIC_TEMPLATE":return{title:"",subtitle:"",imageUrl:"",buttons:[]};case"AUDIO":case"IMAGE":return{url:""};default:return{}}},ey=e=>{switch(e){case"TEXT":return"Texto (Antigo)";case"MESSAGE_WITH_BUTTONS":return"Mensagem";case"BUTTON_TEMPLATE":return"Bot\xf5es (Antigo)";case"GENERIC_TEMPLATE":return"Card (Img + Texto)";case"AUDIO":return"\xc1udio";case"IMAGE":return"Imagem";default:return e}},ew=e=>{eg(ef.filter((a,s)=>s!==e))},ez=(e,a,s)=>{let t=[...ef];if(a.startsWith("payload.")){let r=a.split(".")[1];t[e].payload={...t[e].payload,[r]:s}}else t[e][a]=s;eg(t)},ek=async function(e,a){var s;let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"url",r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(r){if(r.size>20971520){V.Am.error("Arquivo muito grande (M\xe1x 20MB)");return}f({...h,[a]:!0});try{let e=new FormData;e.append("file",r);let s=await fetch("/api/upload",{method:"POST",body:e}),l=await s.json();if(!s.ok)throw Error(l.error||"Erro no upload");let n=l.url;console.log("Upload success, public URL:",n),ez(a,"payload.".concat(t),n),V.Am.success("Arquivo enviado com sucesso!")}catch(e){console.error("Upload catch error:",e),V.Am.error("Erro no upload: "+(e.message||"Erro desconhecido"))}finally{f({...h,[a]:!1}),e.target.value=""}}},eC=e=>{let a=ef[e].payload.buttons||[];if(a.length>=3){V.Am.error("M\xe1ximo de 3 bot\xf5es permitidos");return}ez(e,"payload.buttons",[...a,{label:"Novo Bot\xe3o",actionType:"reply",value:""}])},eT=(e,a,s,t)=>{let r=[...ef[e].payload.buttons||[]];r[a]={...r[a],[s]:t},ez(e,"payload.buttons",r)},eE=(e,a)=>{let s=(ef[e].payload.buttons||[]).filter((e,s)=>s!==a);ez(e,"payload.buttons",s)},eI=async()=>{if(!g.trim()){V.Am.error("Nome da regra \xe9 obrigat\xf3rio");return}m(!0);let e={name:g,isActive:v,priority:Number(N),cooldownSeconds:Number(w),matchType:k,matchOperator:P,keywords:Y,pageIds:ei,triggerType:X,triggerConfig:$,actions:ea?[]:ef,flow:{enabled:ea,steps:ea?et:[]}};try{let a="create"===x?"/api/automations":"/api/automations/".concat(d.id);if(!(await fetch(a,{method:"create"===x?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save");V.Am.success("Regra salva com sucesso!"),u.push("/workflows"),u.refresh()}catch(e){console.error(e),V.Am.error("Erro ao salvar regra")}finally{m(!1)}};return(0,t.jsxs)("div",{className:"space-y-8 max-w-5xl mx-auto pb-32",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between sticky top-0 z-50 bg-background/80 backdrop-blur-lg py-4 border-b border-white/5 -mx-4 px-4 lg:-mx-8 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(G.default,{href:"/workflows",children:(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"hover:bg-zinc-800 rounded-full",children:(0,t.jsx)(_.Z,{className:"w-5 h-5"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:"create"===x?"Criar Nova Regra":"Editar Regra"}),(0,t.jsx)("p",{className:"text-xs text-zinc-400",children:"Configure os gatilhos e respostas autom\xe1ticas"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-900 rounded-full border border-zinc-800",children:[(0,t.jsx)(T,{id:"active-mode",checked:v,onCheckedChange:j}),(0,t.jsx)(I._,{htmlFor:"active-mode",className:"text-xs text-zinc-400 cursor-pointer",children:v?"Ativo":"Pausado"})]}),(0,t.jsxs)(i.z,{onClick:eI,disabled:p,className:"bg-[#0084FF] hover:bg-[#0070D1] text-white rounded-full px-6 shadow-lg shadow-blue-500/20",children:[p?(0,t.jsx)(M.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,t.jsx)(A.Z,{className:"w-4 h-4 mr-2"}),"Salvar Regra"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsxs)(E.Zb,{className:"bg-zinc-900/40 border-zinc-800/60 shadow-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-cyan-500 opacity-20"}),(0,t.jsxs)(E.Ol,{children:[(0,t.jsx)(E.ll,{className:"text-sm font-medium text-zinc-200",children:"Gatilho (Quando responder?)"}),(0,t.jsx)(E.SZ,{children:"Defina quando esta automa\xe7\xe3o ser\xe1 disparada."})]}),(0,t.jsxs)(E.aY,{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs uppercase tracking-wider text-zinc-500",children:"Tipo de Evento"}),(0,t.jsxs)(H.Ph,{value:X,onValueChange:e=>{K(e),"MESSAGE_OUTSIDE_24H"===e&&ee(e=>({...e,thresholdHours:24,onlyIfReturning:!0})),"COMMENT_ON_POST"===e&&ee(e=>({...e,ignoreOwnComments:!0}))},children:[(0,t.jsx)(H.i4,{className:"bg-black/40 border-zinc-800",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"MESSAGE_ANY",children:"Mensagem Recebida (DM)"}),(0,t.jsx)(H.Ql,{value:"MESSAGE_OUTSIDE_24H",children:"Reengajamento (Fora 24h)"}),(0,t.jsx)(H.Ql,{value:"COMMENT_ON_POST",children:"Coment\xe1rio em Post"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pb-4 border-b border-white/5",children:[(0,t.jsx)(I._,{className:"text-xs uppercase tracking-wider text-zinc-500",children:"P\xe1ginas (Onde Executar)"}),p&&0===el.length?(0,t.jsxs)("div",{className:"text-xs text-zinc-500 flex items-center gap-2",children:[(0,t.jsx)(M.Z,{className:"w-3 h-3 animate-spin"})," Carregando p\xe1ginas..."]}):el.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-[150px] overflow-y-auto pr-1",children:el.map(e=>(0,t.jsxs)("div",{onClick:()=>{ei.includes(e.pageId)?ec(ei.filter(a=>a!==e.pageId)):ec([...ei,e.pageId])},className:"\n                                                    cursor-pointer rounded-lg border p-3 flex items-center gap-3 transition-all\n                                                    ".concat(ei.includes(e.pageId)?"bg-blue-500/10 border-blue-500/50 hover:bg-blue-500/20":"bg-black/20 border-zinc-800 hover:border-zinc-700","\n                                                "),children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ".concat(ei.includes(e.pageId)?"bg-blue-600 text-white":"bg-zinc-800 text-zinc-400"),children:e.pageName.charAt(0)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate ".concat(ei.includes(e.pageId)?"text-blue-100":"text-zinc-300"),children:e.pageName}),(0,t.jsxs)("p",{className:"text-[10px] text-zinc-500 truncate",children:["ID: ",e.pageId]})]}),(0,t.jsx)("div",{className:"w-4 h-4 rounded-full border flex items-center justify-center ".concat(ei.includes(e.pageId)?"bg-blue-500 border-blue-500":"border-zinc-600"),children:ei.includes(e.pageId)&&(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})]},e.id))}):(0,t.jsx)("div",{className:"text-xs text-yellow-500/80 bg-yellow-500/10 p-3 rounded border border-yellow-500/20",children:"Nenhuma p\xe1gina conectada. V\xe1 em Configura\xe7\xf5es > Integra\xe7\xf5es."}),(0,t.jsxs)("p",{className:"text-[10px] text-zinc-500",children:["Se nenhuma for selecionada, a regra ser\xe1 aplicada a ",(0,t.jsx)("strong",{children:"TODAS"})," as p\xe1ginas."]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs uppercase tracking-wider text-zinc-500",children:"Nome da Regra"}),(0,t.jsx)(c.I,{value:g,onChange:e=>b(e.target.value),placeholder:"Ex: Resposta Pre\xe7os",className:"bg-black/40 border-zinc-800 focus:border-primary/50"})]}),"COMMENT_ON_POST"===X&&(0,t.jsxs)("div",{className:"space-y-4 pt-2 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Post IDs Espec\xedficos (Opcional)"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.I,{placeholder:"Digite ID do post e enter...",className:"bg-black/40 border-zinc-800",onKeyDown:e=>{if("Enter"===e.key){let a=e.currentTarget.value.trim();if(a){let s=$.postIds||[];ee({...$,postIds:[...s,a]}),e.currentTarget.value=""}}}}),(0,t.jsxs)(L.Vq,{open:ep,onOpenChange:em,children:[(0,t.jsx)(L.hg,{asChild:!0,children:(0,t.jsx)(i.z,{variant:"outline",className:"border-zinc-800 bg-zinc-900/50 hover:bg-zinc-800",onClick:e=>{e.preventDefault(),eh()},disabled:ex,children:ex?(0,t.jsx)(M.Z,{className:"w-4 h-4 animate-spin"}):"Listar Posts"})}),(0,t.jsxs)(L.cZ,{className:"max-w-2xl max-h-[80vh] overflow-hidden flex flex-col bg-zinc-950 border-zinc-800 text-white",children:[(0,t.jsxs)(L.fK,{children:[(0,t.jsx)(L.$N,{children:"Selecionar Posts Recentes"}),(0,t.jsx)(L.Be,{children:"Clique para adicionar/remover monitoramento."})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-1 space-y-2",children:[eo.map(e=>{let a=($.postIds||[]).some(a=>e.id.endsWith(a));return(0,t.jsxs)("div",{onClick:()=>{let s;let t=$.postIds||[];s=a?t.filter(a=>!e.id.endsWith(a)):[...t,e.id],ee({...$,postIds:s})},className:"\n                                                                        flex gap-4 p-3 rounded border transition-colors cursor-pointer\n                                                                        ".concat(a?"bg-blue-500/10 border-blue-500/50":"bg-zinc-900 border-zinc-800 hover:border-zinc-700","\n                                                                    "),children:[e.full_picture&&(0,t.jsx)("img",{src:e.full_picture,alt:"",className:"w-16 h-16 object-cover rounded"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-300 line-clamp-2",children:e.message||"[Sem legenda]"}),(0,t.jsxs)("p",{className:"text-xs text-zinc-500 mt-1",children:[new Date(e.created_time).toLocaleDateString()," • ID: ",e.id]})]}),a&&(0,t.jsx)("div",{className:"text-blue-500",children:(0,t.jsx)(O.Z,{className:"w-5 h-5 rotate-45"})})]},e.id)}),0===eo.length&&!ex&&(0,t.jsx)("div",{className:"p-4 text-center text-zinc-500",children:"Nenhum post recente encontrado."})]})]})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:($.postIds||[]).map((e,a)=>(0,t.jsxs)(S.C,{variant:"outline",className:"text-[10px] border-zinc-700",children:[e," ",(0,t.jsx)(R.Z,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>{let e=$.postIds.filter((e,s)=>s!==a);ee({...$,postIds:e})}})]},a))}),(0,t.jsx)("p",{className:"text-[10px] text-zinc-500",children:"Deixe vazio para monitorar TODOS os posts."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T,{id:"ignore-own",checked:!1!==$.ignoreOwnComments,onCheckedChange:e=>ee({...$,ignoreOwnComments:e})}),(0,t.jsx)(I._,{htmlFor:"ignore-own",className:"text-xs text-zinc-400",children:"Ignorar coment\xe1rios da pr\xf3pria p\xe1gina"})]})]}),"MESSAGE_OUTSIDE_24H"===X&&(0,t.jsxs)("div",{className:"space-y-4 pt-2 border-t border-white/5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Limite de Tempo (Horas)"}),(0,t.jsx)(c.I,{type:"number",value:$.thresholdHours||24,onChange:e=>ee({...$,thresholdHours:Number(e.target.value)}),className:"bg-black/40 border-zinc-800"}),(0,t.jsx)("p",{className:"text-[10px] text-zinc-500",children:'Tempo sem intera\xe7\xe3o do usu\xe1rio para considerar "Fora da Janela".'})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(T,{id:"only-returning",checked:!1!==$.onlyIfReturning,onCheckedChange:e=>ee({...$,onlyIfReturning:e})}),(0,t.jsx)(I._,{htmlFor:"only-returning",className:"text-xs text-zinc-400",children:"Apenas usu\xe1rios recorrentes (j\xe1 interagiram antes)"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2 border-t border-white/5",children:[(0,t.jsx)(I._,{className:"text-xs uppercase tracking-wider text-zinc-500",children:"COMMENT_ON_POST"===X?"Palavras-chave no Coment\xe1rio":"Palavras-chave na Mensagem"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(H.Ph,{value:k,onValueChange:C,children:[(0,t.jsx)(H.i4,{className:"w-[130px] bg-black/40 border-zinc-800 text-xs",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"CONTAINS",children:"Cont\xe9m"}),(0,t.jsx)(H.Ql,{value:"EXACT",children:"Exato"}),(0,t.jsx)(H.Ql,{value:"STARTS_WITH",children:"Come\xe7a com"})]})]}),(0,t.jsx)(c.I,{value:q,onChange:e=>W(e.target.value),onKeyDown:e=>"Enter"===e.key&&eb(),placeholder:"Digite e enter...",className:"flex-1 bg-black/40 border-zinc-800 text-sm"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 min-h-[40px] p-2 bg-black/20 rounded-md border border-zinc-800/50",children:[0===Y.length&&(0,t.jsx)("span",{className:"text-xs text-zinc-600 block w-full text-center py-2",children:"MESSAGE_OUTSIDE_24H"===X?"Qualquer mensagem (se vazio)":"Nenhuma palavra-chave"}),Y.map((e,a)=>(0,t.jsxs)(S.C,{variant:"secondary",className:"bg-blue-500/10 text-blue-400 border-blue-500/20 hover:bg-blue-500/20 gap-1 pl-2 pr-1 py-0.5",children:[e,(0,t.jsx)(R.Z,{className:"w-3 h-3 cursor-pointer hover:text-red-400",onClick:()=>ev(a)})]},a))]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-500",children:"Prioridade"}),(0,t.jsx)(c.I,{type:"number",value:N,onChange:e=>y(Number(e.target.value)),className:"bg-black/40 border-zinc-800"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-500",children:"Cooldown (s)"}),(0,t.jsx)(c.I,{type:"number",value:w,onChange:e=>z(Number(e.target.value)),className:"bg-black/40 border-zinc-800"})]})]})]})]}),(0,t.jsx)("div",{className:"p-4 rounded-xl border border-dashed border-zinc-800/50 bg-zinc-900/20 text-center",children:(0,t.jsx)("p",{className:"text-xs text-zinc-500",children:"Dica: Use prioridade mais alta para regras espec\xedficas que devem sobrepor regras gen\xe9ricas."})})]}),(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-medium text-white flex items-center gap-2",children:[(0,t.jsx)(Z.Z,{className:"w-5 h-5 text-primary"}),"Resposta"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-zinc-900 px-3 py-1.5 rounded-full border border-zinc-800",children:[(0,t.jsx)("span",{className:"text-xs ".concat(ea?"text-zinc-500":"text-white font-medium"),children:"Simples"}),(0,t.jsx)(T,{checked:ea,onCheckedChange:es}),(0,t.jsx)("span",{className:"text-xs ".concat(ea?"text-blue-400 font-medium":"text-zinc-500"),children:"Fluxo Conversacional"})]})]}),!ea&&(0,t.jsxs)(S.C,{className:"bg-zinc-800 text-zinc-400 hover:bg-zinc-800",children:[ef.length," a\xe7\xf5es"]})]}),ea?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg text-sm text-blue-200",children:[(0,t.jsx)("strong",{children:"Modo Conversacional:"})," Crie perguntas e direcione o usu\xe1rio com base nas respostas."]}),et.map((e,a)=>{var s;return(0,t.jsxs)(E.Zb,{className:"bg-zinc-900/40 border-zinc-800",children:[(0,t.jsxs)(E.Ol,{className:"py-3 px-4 border-b border-white/5 flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.C,{variant:"outline",className:"bg-blue-500/10 border-blue-500/30 text-blue-400",children:e.id}),(0,t.jsx)(c.I,{className:"w-24 h-7 text-xs bg-black/20 border-zinc-700",value:e.id,onChange:e=>{let s=[...et];s[a].id=e.target.value,er(s)}}),(0,t.jsxs)(H.Ph,{value:e.expectedType||"any",onValueChange:e=>{let s=[...et];s[a].expectedType=e,er(s)},children:[(0,t.jsx)(H.i4,{className:"h-7 w-[110px] text-[10px] bg-black/40 border-zinc-700",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"any",children:"Qualquer"}),(0,t.jsx)(H.Ql,{value:"keyword",children:"Texto Exato"}),(0,t.jsx)(H.Ql,{value:"number",children:"N\xfamero"})]})]})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-7 w-7 text-zinc-500 hover:text-red-400",onClick:()=>{er(et.filter((e,s)=>s!==a))},children:(0,t.jsx)(R.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(E.aY,{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Pergunta / Mensagem"}),(0,t.jsx)("textarea",{className:"flex w-full rounded-md border border-zinc-700 bg-black/40 px-3 py-2 text-sm text-white focus-visible:ring-1 focus-visible:ring-primary min-h-[60px]",value:e.message,onChange:e=>{let s=[...et];s[a].message=e.target.value,er(s)},placeholder:"Ex: Qual sua cor favorita?"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Condi\xe7\xf5es (Se resposta for...)"}),(0,t.jsx)(i.z,{size:"sm",variant:"outline",className:"h-6 text-[10px]",onClick:()=>{let s=[...et];s[a].conditions=[...e.conditions||[],{match:"",nextStep:""}],er(s)},children:"+ Condi\xe7\xe3o"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(e.conditions||[]).map((s,r)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 p-2 bg-black/20 rounded border border-zinc-800/50 items-center",children:[(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)(c.I,{placeholder:"Resposta exata",className:"h-7 text-xs bg-black/40 border-zinc-700",value:s.match,onChange:e=>{let s=[...et];s[a].conditions[r].match=e.target.value,er(s)}})}),(0,t.jsx)("div",{className:"col-span-1 text-center text-zinc-500",children:"→"}),(0,t.jsx)("div",{className:"col-span-6",children:(0,t.jsx)(c.I,{placeholder:"ID Pr\xf3xima Etapa (Ex: step_2)",className:"h-7 text-xs bg-black/40 border-zinc-700",value:s.nextStep,onChange:e=>{let s=[...et];s[a].conditions[r].nextStep=e.target.value,er(s)}})}),(0,t.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,t.jsx)(R.Z,{className:"w-3.5 h-3.5 text-zinc-600 cursor-pointer hover:text-red-400",onClick:()=>{let s=[...et];s[a].conditions=e.conditions.filter((e,a)=>a!==r),er(s)}})})]},r)),0===(e.conditions||[]).length&&(0,t.jsx)("div",{className:"text-[10px] text-zinc-500 text-center py-2 border border-dashed border-zinc-800 rounded",children:"Sem condi\xe7\xf5es. O fluxo para aqui ou usa Fallback."})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2 border-t border-white/5",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Fallback (Se n\xe3o bater nenhuma condi\xe7\xe3o)"}),(0,t.jsx)(c.I,{className:"h-8 text-xs bg-black/40 border-zinc-700",placeholder:"Ex: N\xe3o entendi, fale 1 ou 2.",value:(null===(s=e.fallback)||void 0===s?void 0:s.message)||"",onChange:e=>{let s=[...et];s[a].fallback={message:e.target.value},er(s)}})]})]})]},a)}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full border-dashed border-zinc-700 hover:border-blue-500 hover:bg-blue-500/5 text-zinc-400",onClick:()=>{let e="step_".concat(et.length+1);er([...et,{id:e,type:"question",message:"",conditions:[]}])},children:[(0,t.jsx)(O.Z,{className:"w-4 h-4 mr-2"})," Adicionar Etapa"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-4 min-h-[200px]",children:[0===ef.length&&(0,t.jsxs)("div",{className:"h-64 rounded-xl border border-dashed border-zinc-800 flex flex-col items-center justify-center text-zinc-500 gap-4 bg-zinc-900/20",children:[(0,t.jsx)(Z.Z,{className:"w-10 h-10 opacity-20"}),(0,t.jsx)("p",{children:"Nenhuma a\xe7\xe3o definida."}),(0,t.jsx)("p",{className:"text-sm",children:"Selecione uma a\xe7\xe3o abaixo para come\xe7ar."})]}),ef.map((e,a)=>{var s,r;return(0,t.jsxs)("div",{className:"group relative pl-4 border-l-2 border-zinc-800 hover:border-primary/50 transition-colors",children:[(0,t.jsx)("div",{className:"absolute -left-[5px] top-6 w-2 h-2 rounded-full bg-zinc-800 group-hover:bg-primary transition-colors ring-4 ring-background"}),(0,t.jsxs)(E.Zb,{className:"bg-zinc-950/50 border-zinc-800/80 group-hover:border-zinc-700 transition-colors",children:[(0,t.jsxs)(E.Ol,{className:"py-3 px-4 bg-white/5 border-b border-white/5 flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(S.C,{variant:"outline",className:"bg-black/40 border-zinc-700 font-mono text-[10px] uppercase tracking-wider text-zinc-400",children:ey(e.type)}),(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["A\xe7\xe3o #",a+1]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(F,{valueMs:e.delayMs||0,onChange:e=>ez(a,"delayMs",e)}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-7 w-7 text-zinc-500 hover:text-red-400 hover:bg-red-500/10 rounded-md",onClick:()=>ew(a),children:(0,t.jsx)(R.Z,{className:"w-3.5 h-3.5"})})]})]}),(0,t.jsxs)(E.aY,{className:"p-4",children:[("MESSAGE_WITH_BUTTONS"===e.type||"TEXT"===e.type||"BUTTON_TEMPLATE"===e.type)&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Mensagem"}),(0,t.jsx)("textarea",{className:"flex w-full rounded-md border border-zinc-700 bg-black/40 px-3 py-2 text-sm text-white placeholder:text-zinc-600 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary min-h-[80px]",value:e.payload.message||e.payload.text||"",onChange:e=>ez(a,"payload.message",e.target.value),placeholder:"Digite sua mensagem aqui..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Bot\xf5es (Opcional - Max 3)"}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"h-6 text-[10px]",onClick:()=>eC(a),disabled:((null===(s=e.payload.buttons)||void 0===s?void 0:s.length)||0)>=3,children:[(0,t.jsx)(O.Z,{className:"w-3 h-3 mr-1"})," Add Bot\xe3o"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:(e.payload.buttons||[]).map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 bg-black/20 p-2 rounded border border-zinc-800 items-start",children:[(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(H.Ph,{value:e.actionType||"reply",onValueChange:e=>eT(a,s,"actionType",e),children:[(0,t.jsx)(H.i4,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"reply",children:"Responder"}),(0,t.jsx)(H.Ql,{value:"url",children:"Abrir Link"}),(0,t.jsx)(H.Ql,{value:"flow_jump",children:"Ir p/ Fluxo"})]})]})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)(c.I,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",placeholder:"Label do Bot\xe3o",value:e.label||e.title||"",onChange:e=>eT(a,s,"label",e.target.value)})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)(c.I,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",placeholder:"url"===e.actionType?"https://...":"flow_jump"===e.actionType?"ID do Fluxo":"Mensagem/Payload",value:e.value||e.url||e.payload||"",onChange:e=>eT(a,s,"value",e.target.value)})}),(0,t.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-7 w-7 text-zinc-500 hover:text-red-400",onClick:()=>eE(a,s),children:(0,t.jsx)(R.Z,{className:"w-3 h-3"})})})]},s))})]})]}),"AUDIO"===e.type&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Arquivo de \xc1udio"}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c.I,{disabled:!0,value:e.payload.url||"",placeholder:"URL do a\xfadio...",className:"bg-black/40 border-zinc-800 opacity-70"})}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("label",{className:"flex-1 cursor-pointer",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 w-full h-10 rounded-md border border-dashed border-zinc-700 hover:border-primary/50 hover:bg-primary/5 transition-all text-sm text-zinc-400 hover:text-primary",children:[h[a]?(0,t.jsx)(M.Z,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(D,{className:"w-4 h-4"}),h[a]?"Enviando...":"Carregar do Dispositivo (MP3, OGG, WAV)"]}),(0,t.jsx)("input",{type:"file",accept:"audio/*",className:"hidden",onChange:e=>ek(e,a)})]})}),e.payload.url&&(0,t.jsx)("audio",{controls:!0,src:e.payload.url,className:"w-full mt-2 h-8"})]})]}),"IMAGE"===e.type&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Imagem Avulsa"}),(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsx)("label",{className:"flex-1 cursor-pointer",children:(0,t.jsxs)("div",{className:"relative group overflow-hidden rounded-lg border-2 border-dashed border-zinc-700 hover:border-primary/50 transition-all bg-black/20 aspect-video flex flex-col items-center justify-center",children:[e.payload.url?(0,t.jsx)("img",{src:e.payload.url,alt:"Preview",className:"w-full h-full object-contain"}):(0,t.jsxs)(t.Fragment,{children:[h[a]?(0,t.jsx)(M.Z,{className:"w-8 h-8 animate-spin text-zinc-500"}):(0,t.jsx)(U,{className:"w-8 h-8 text-zinc-500 mb-2 group-hover:text-primary"}),(0,t.jsx)("span",{className:"text-sm text-zinc-400 group-hover:text-primary",children:"Clique para enviar imagem"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)(D,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>ek(e,a,"imageUrl")})]})})})]}),"GENERIC_TEMPLATE"===e.type&&(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsx)("div",{className:"w-full md:w-1/3 shrink-0",children:(0,t.jsx)("label",{className:"cursor-pointer block h-full",children:(0,t.jsxs)("div",{className:"h-full min-h-[140px] rounded-lg border-2 border-dashed border-zinc-700 hover:border-primary/50 transition-all bg-black/20 flex flex-col items-center justify-center overflow-hidden relative",children:[e.payload.imageUrl?(0,t.jsx)("img",{src:e.payload.imageUrl,alt:"Card Cover",className:"absolute inset-0 w-full h-full object-cover"}):(0,t.jsxs)("div",{className:"text-center p-4",children:[h[a]?(0,t.jsx)(M.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-zinc-500"}):(0,t.jsx)(U,{className:"w-6 h-6 mx-auto mb-2 text-zinc-500"}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-400 block",children:"Capa do Card"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)(D,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>ek(e,a,"imageUrl")})]})})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"T\xedtulo"}),(0,t.jsx)(c.I,{className:"h-8 bg-black/40 border-zinc-800",value:e.payload.title||"",onChange:e=>ez(a,"payload.title",e.target.value),placeholder:"T\xedtulo do Produto/Card"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Subt\xedtulo"}),(0,t.jsx)(c.I,{className:"h-8 bg-black/40 border-zinc-800",value:e.payload.subtitle||"",onChange:e=>ez(a,"payload.subtitle",e.target.value),placeholder:"Breve descri\xe7\xe3o..."})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(I._,{className:"text-xs text-zinc-400",children:"Bot\xf5es (Max 3)"}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"h-6 text-[10px]",onClick:()=>eC(a),disabled:((null===(r=e.payload.buttons)||void 0===r?void 0:r.length)||0)>=3,children:[(0,t.jsx)(O.Z,{className:"w-3 h-3 mr-1"})," Add"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:(e.payload.buttons||[]).map((e,s)=>(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-2 bg-black/20 p-2 rounded border border-zinc-800 items-center",children:[(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)(H.Ph,{value:e.type,onValueChange:e=>eT(a,s,"type",e),children:[(0,t.jsx)(H.i4,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",children:(0,t.jsx)(H.ki,{})}),(0,t.jsxs)(H.Bw,{children:[(0,t.jsx)(H.Ql,{value:"web_url",children:"Link"}),(0,t.jsx)(H.Ql,{value:"postback",children:"Postback"})]})]})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)(c.I,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",placeholder:"T\xedtulo",value:e.title,onChange:e=>eT(a,s,"title",e.target.value)})}),(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)(c.I,{className:"h-7 text-[10px] bg-black/40 border-zinc-700",placeholder:"web_url"===e.type?"URL":"Payload",value:"web_url"===e.type?e.url:e.payload,onChange:t=>eT(a,s,"web_url"===e.type?"url":"payload",t.target.value)})}),(0,t.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-7 w-7 text-zinc-500 hover:text-red-400",onClick:()=>eE(a,s),children:(0,t.jsx)(R.Z,{className:"w-3 h-3"})})})]},s))})]})]})]})]})]})]},a)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 pt-4 border-t border-zinc-800",children:[(0,t.jsxs)(i.z,{variant:"outline",className:"h-auto py-3 flex flex-col gap-2 hover:bg-zinc-800 border-zinc-800",onClick:()=>ej("MESSAGE_WITH_BUTTONS"),children:[(0,t.jsx)(Z.Z,{className:"w-5 h-5 text-zinc-400 group-hover:text-primary"}),(0,t.jsx)("span",{className:"text-xs",children:"Mensagem"})]}),(0,t.jsxs)(i.z,{variant:"outline",className:"h-auto py-3 flex flex-col gap-2 hover:bg-zinc-800 border-zinc-800",onClick:()=>ej("GENERIC_TEMPLATE"),children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(U,{className:"w-5 h-5 text-zinc-400"}),(0,t.jsx)(S.C,{className:"absolute -top-2 -right-3 text-[8px] h-3 px-1",children:"Novo"})]}),(0,t.jsx)("span",{className:"text-xs",children:"Card Image"})]}),(0,t.jsxs)(i.z,{variant:"outline",className:"h-auto py-3 flex flex-col gap-2 hover:bg-zinc-800 border-zinc-800",onClick:()=>ej("IMAGE"),children:[(0,t.jsx)(U,{className:"w-5 h-5 text-zinc-400 group-hover:text-primary"}),(0,t.jsx)("span",{className:"text-xs",children:"Img Avulsa"})]}),(0,t.jsxs)(i.z,{variant:"outline",className:"h-auto py-3 flex flex-col gap-2 hover:bg-zinc-800 border-zinc-800",onClick:()=>ej("AUDIO"),children:[(0,t.jsx)(B,{className:"w-5 h-5 text-zinc-400 group-hover:text-primary"}),(0,t.jsx)("span",{className:"text-xs",children:"\xc1udio"})]})]})]})]})]})]})}},53152:function(e,a,s){"use strict";s.d(a,{C:function(){return i}});var t=s(89075);s(50511);var r=s(33452),l=s(22526);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(n({variant:s}),a),...r})}},45859:function(e,a,s){"use strict";s.d(a,{z:function(){return o}});var t=s(89075),r=s(50511),l=s(9709),n=s(33452),i=s(22526);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,a)=>{let{className:s,variant:r,size:n,asChild:o=!1,...d}=e,x=o?l.g7:"button";return(0,t.jsx)(x,{className:(0,i.cn)(c({variant:r,size:n,className:s})),ref:a,...d})});o.displayName="Button"},30073:function(e,a,s){"use strict";s.d(a,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},eW:function(){return x},ll:function(){return c}});var t=s(89075),r=s(50511),l=s(22526);let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent";let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});x.displayName="CardFooter"},49397:function(e,a,s){"use strict";s.d(a,{$N:function(){return h},Be:function(){return f},Vq:function(){return c},cN:function(){return m},cZ:function(){return u},fK:function(){return p},hg:function(){return o}});var t=s(89075),r=s(50511),l=s(2894),n=s(23151),i=s(22526);let c=l.fC,o=l.xz,d=l.h_;l.x8;let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});x.displayName=l.aV.displayName;let u=r.forwardRef((e,a)=>{let{className:s,children:r,...c}=e;return(0,t.jsxs)(d,{children:[(0,t.jsx)(x,{}),(0,t.jsxs)(l.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...c,children:[r,(0,t.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.VY.displayName;let p=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};p.displayName="DialogHeader";let m=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};m.displayName="DialogFooter";let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});h.displayName=l.Dx.displayName;let f=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});f.displayName=l.dk.displayName},38683:function(e,a,s){"use strict";s.d(a,{I:function(){return n}});var t=s(89075),r=s(50511),l=s(22526);let n=r.forwardRef((e,a)=>{let{className:s,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...n})});n.displayName="Input"},20486:function(e,a,s){"use strict";s.d(a,{_:function(){return d}});var t=s(89075),r=s(50511),l=s(99241),n=r.forwardRef((e,a)=>(0,t.jsx)(l.WV.label,{...e,ref:a,onMouseDown:a=>{var s;a.target.closest("button, input, select, textarea")||(null===(s=e.onMouseDown)||void 0===s||s.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));n.displayName="Label";var i=s(33452),c=s(22526);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(n,{ref:a,className:(0,c.cn)(o(),s),...r})});d.displayName=n.displayName},63350:function(e,a,s){"use strict";s.d(a,{Bw:function(){return h},Ph:function(){return d},Ql:function(){return f},i4:function(){return u},ki:function(){return x}});var t=s(89075),r=s(50511),l=s(60326),n=s(39525),i=s(12959),c=s(67253),o=s(22526);let d=l.fC;l.ZA;let x=l.B4,u=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsxs)(l.xz,{ref:a,className:(0,o.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[r,(0,t.jsx)(l.JO,{asChild:!0,children:(0,t.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.xz.displayName;let p=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.u_,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=l.u_.displayName;let m=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.$G,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(n.Z,{className:"h-4 w-4"})})});m.displayName=l.$G.displayName;let h=r.forwardRef((e,a)=>{let{className:s,children:r,position:n="popper",...i}=e;return(0,t.jsx)(l.h_,{children:(0,t.jsxs)(l.VY,{ref:a,className:(0,o.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,t.jsx)(p,{}),(0,t.jsx)(l.l_,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(m,{})]})})});h.displayName=l.VY.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.__,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",s),...r})}).displayName=l.__.displayName;let f=r.forwardRef((e,a)=>{let{className:s,children:r,...n}=e;return(0,t.jsxs)(l.ck,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(l.eT,{children:r})]})});f.displayName=l.ck.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=l.Z0.displayName},5816:function(e,a,s){"use strict";s.d(a,{e:function(){return r}});var t=s(2027);function r(){return(0,t.AY)("https://fmxdqpukjuzhiseyobvz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZteGRxcHVranV6aGlzZXlvYnZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2Mjk4MjYsImV4cCI6MjA4NTIwNTgyNn0.bXEJnoTUSzAVDwQNwwiG1gmFc0rfK5M9xbKFMRb48BY")}},22526:function(e,a,s){"use strict";s.d(a,{cn:function(){return l}});var t=s(68273),r=s(70868);function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.m6)((0,t.W)(a))}},44431:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(79318).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},47641:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(79318).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},76754:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(79318).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},31860:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(79318).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},980:function(e,a,s){"use strict";s.d(a,{default:function(){return r.a}});var t=s(10949),r=s.n(t)}}]);