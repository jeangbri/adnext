(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4252],{9257:function(e,t,r){Promise.resolve().then(r.bind(r,8862))},8862:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(89075),n=r(50511),a=r(45859),i=r(980),c=r(45845),l=r(33274);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,r(79318).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var d=r(47641),u=r(46036);r(2344);var x=(0,r(53405).$)("b4347abbed00a7e494c91a6d571a3336ae9e77f1"),h=r(93628);function f(e){let{ruleId:t}=e,[r,i]=(0,n.useState)(!1),c=async()=>{if(confirm("Tem certeza que deseja excluir esta regra? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{i(!0),await x(t),h.Am.success("Regra exclu\xedda com sucesso")}catch(e){h.Am.error("Erro ao excluir regra")}finally{i(!1)}};return(0,s.jsx)(a.z,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-red-500 hover:bg-red-500/10",onClick:c,disabled:r,children:r?(0,s.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,s.jsx)(u.Z,{className:"w-4 h-4"})})}var m=r(88457);function p(){let[e,t]=(0,n.useState)([]),[r,d]=(0,n.useState)(!0),u=(0,n.useCallback)(async()=>{try{let e=await fetch("/api/automations");if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Failed to load automations",e)}finally{d(!1)}},[]);return(0,n.useEffect)(()=>{u()},[u]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Automa\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Gerencie suas regras de resposta autom\xe1tica para o Messenger."})]}),(0,s.jsx)(i.default,{href:"/workflows/create",children:(0,s.jsxs)(a.z,{className:"bg-[#0084FF] hover:bg-[#0070D1] text-white gap-2 shadow-lg shadow-blue-500/20",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4"}),"Criar Regra"]})})]}),(0,s.jsx)("div",{className:"border border-white/10 rounded-lg bg-zinc-950/50 backdrop-blur overflow-hidden",children:r?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"bg-zinc-900/50 border-b border-white/5 px-6 py-4 flex gap-8",children:["w-20","w-32","w-16","w-12","w-16","w-16"].map((e,t)=>(0,s.jsx)(m.O,{className:"h-4 ".concat(e," bg-zinc-800")},t))}),Array.from({length:4}).map((e,t)=>(0,s.jsxs)("div",{className:"px-6 py-4 flex items-center gap-8 border-b border-white/5 last:border-0",children:[(0,s.jsx)(m.O,{className:"h-4 w-28 bg-zinc-800"}),(0,s.jsxs)("div",{className:"flex gap-1.5",children:[(0,s.jsx)(m.O,{className:"h-5 w-14 rounded-full bg-zinc-800"}),(0,s.jsx)(m.O,{className:"h-5 w-18 rounded-full bg-zinc-800"})]}),(0,s.jsx)(m.O,{className:"h-4 w-8 bg-zinc-800"}),(0,s.jsx)(m.O,{className:"h-4 w-16 bg-zinc-800"}),(0,s.jsx)(m.O,{className:"h-5 w-14 rounded-full bg-zinc-800"}),(0,s.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,s.jsx)(m.O,{className:"h-8 w-8 rounded bg-zinc-800"}),(0,s.jsx)(m.O,{className:"h-8 w-8 rounded bg-zinc-800"})]})]},t))]}):0===e.length?(0,s.jsxs)("div",{className:"p-12 text-center space-y-4",children:[(0,s.jsx)("div",{className:"mx-auto w-12 h-12 rounded-full bg-zinc-900 flex items-center justify-center",children:(0,s.jsx)(l.Z,{className:"w-6 h-6 text-zinc-500"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-white",children:"Nenhuma regra encontrada"}),(0,s.jsx)("p",{className:"text-zinc-500 text-sm",children:"Crie sua primeira automa\xe7\xe3o por palavra-chave."})]})]}):(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-zinc-900/50 text-zinc-400 font-medium border-b border-white/5",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4",children:"Nome"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"Gatilho (Keywords)"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"Prioridade"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"A\xe7\xf5es"}),(0,s.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right",children:"Op\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-white/5 text-zinc-300",children:e.map(e=>{var t,r,n,c;return(0,s.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-white",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 max-w-xs truncate",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[e.triggerType&&"MESSAGE_ANY"!==e.triggerType&&(0,s.jsx)("span",{className:"px-2 py-0.5 w-fit rounded text-[10px] font-bold uppercase\n                                                    ".concat("COMMENT_ON_POST"===e.triggerType?"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30":"MESSAGE_OUTSIDE_24H"===e.triggerType?"bg-orange-500/20 text-orange-500 border border-orange-500/30":"bg-zinc-800 text-zinc-400","\n                                                "),children:"COMMENT_ON_POST"===e.triggerType?"Coment\xe1rio":"MESSAGE_OUTSIDE_24H"===e.triggerType?"Reengajamento (>24h)":e.triggerType}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.keywords.length>0?e.keywords.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-zinc-800 text-xs border border-white/5",children:e},t)):"MESSAGE_OUTSIDE_24H"===e.triggerType?(0,s.jsx)("span",{className:"text-xs text-zinc-500 italic",children:"Qualquer msg"}):"COMMENT_ON_POST"===e.triggerType&&(null===(r=e.triggerConfig)||void 0===r?void 0:null===(t=r.keywords)||void 0===t?void 0:t.length)===0?(0,s.jsx)("span",{className:"text-xs text-zinc-500 italic",children:"Qualquer coment\xe1rio"}):(0,s.jsx)("span",{className:"text-xs text-zinc-600",children:"-"}),e.keywords.length>3&&(0,s.jsxs)("span",{className:"text-xs text-zinc-500",children:["+",e.keywords.length-3]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.priority}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[null!==(c=null===(n=e.actions)||void 0===n?void 0:n.length)&&void 0!==c?c:0," a\xe7\xf5es"]}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.isActive?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"),children:e.isActive?"Ativo":"Pausado"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(i.default,{href:"/workflows/".concat(e.id),children:(0,s.jsx)(a.z,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-white",children:(0,s.jsx)(o,{className:"w-4 h-4"})})}),(0,s.jsx)(f,{ruleId:e.id})]})})]},e.id)})})]})})]})}},45859:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(89075),n=r(50511),a=r(9709),i=r(33452),c=r(22526);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:o=!1,...d}=e,u=o?a.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});o.displayName="Button"},88457:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var s=r(89075),n=r(22526);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-zinc-800/50",t),...r})}},22526:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(68273),n=r(70868);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},79318:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(50511),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{color:c="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:x,...h}=r;return(0,s.createElement)("svg",{ref:i,...n,width:l,height:l,stroke:c,strokeWidth:d?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(a(e)),u].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(x)?x:[x]])});return r.displayName="".concat(e),r}},47641:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79318).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},45845:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79318).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},46036:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79318).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},33274:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(79318).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},53405:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let s=r(2344);function n(e){let{createServerReference:t}=r(4820);return t(e,s.callServer)}},14860:function(e,t,r){"use strict";r.d(t,{F:function(){return a},e:function(){return i}});var s=r(50511);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{let r=!1,s=t.map(t=>{let s=n(t,e);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let e=0;e<s.length;e++){let r=s[e];"function"==typeof r?r():n(t[e],null)}}}}function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.useCallback(a(...t),t)}}},function(e){e.O(0,[2688,3628,5002,4852,4999,1744],function(){return e(e.s=9257)}),_N_E=e.O()}]);