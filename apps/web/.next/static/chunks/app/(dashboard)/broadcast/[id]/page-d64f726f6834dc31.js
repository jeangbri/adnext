(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[367],{29807:function(e,t,r){Promise.resolve().then(r.bind(r,27155))},27155:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(89075),s=r(50511),a=r(65095),l=r(45859),i=r(30073),o=r(53152),c=r(44431);function d(e){let{params:t}=e,r=(0,a.useRouter)(),[d,u]=(0,s.useState)(null),[f,x]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e;let n=async()=>{try{let e=await fetch("/api/broadcasts/".concat(t.id));if(e.ok){let t=await e.json();u(t),["SCHEDULED","SENDING"].includes(t.status)}else r.push("/broadcast")}catch(e){console.error(e)}finally{x(!1)}};return n(),e=setInterval(()=>{d&&["SCHEDULED","SENDING"].includes(d.status)&&n()},5e3),()=>clearInterval(e)},[t.id,null==d?void 0:d.status]),f)?(0,n.jsx)("div",{className:"p-8 text-center text-zinc-500",children:"Carregando..."}):d?(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(l.z,{variant:"ghost",size:"icon",onClick:()=>r.push("/broadcast"),children:(0,n.jsx)(c.Z,{className:"w-4 h-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-white",children:d.name}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsx)(o.C,{variant:"outline",children:d.status}),(0,n.jsx)("span",{className:"text-sm text-zinc-500",children:d.page.pageName})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,n.jsxs)(i.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsx)(i.ll,{className:"text-sm text-zinc-400",children:"Total P\xfablico"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-white",children:d.totalRecipients})})]}),(0,n.jsxs)(i.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsx)(i.ll,{className:"text-sm text-zinc-400",children:"Enviados"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-green-500",children:d.totalSent})})]}),(0,n.jsxs)(i.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsx)(i.ll,{className:"text-sm text-zinc-400",children:"Falhas"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-red-500",children:d.totalFailed})})]}),(0,n.jsxs)(i.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,n.jsx)(i.Ol,{className:"pb-2",children:(0,n.jsx)(i.ll,{className:"text-sm text-zinc-400",children:"Ignorados (Pol\xedtica)"})}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold text-yellow-500",children:d.totalSkipped})})]})]}),(0,n.jsxs)(i.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,n.jsx)(i.Ol,{children:(0,n.jsx)(i.ll,{className:"text-white",children:"Detalhes do Envio"})}),(0,n.jsx)(i.aY,{children:(0,n.jsxs)("div",{className:"text-sm text-zinc-400",children:[(0,n.jsx)("p",{children:"Os logs detalhados de cada envio est\xe3o dispon\xedveis no banco de dados."}),(0,n.jsxs)("p",{className:"mt-2",children:[(0,n.jsx)("b",{children:"Tipo de Mensagem:"})," ",d.messageType]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("b",{children:"Pol\xedtica:"})," ",d.policyMode]}),d.totalSkipped>0&&(0,n.jsxs)("div",{className:"mt-4 p-4 bg-yellow-500/10 text-yellow-500 rounded border border-yellow-500/20",children:[d.totalSkipped,' contatos foram ignorados porque estavam fora da janela de 24h e a campanha estava configurada como "Janela 24h (Seguro)".']})]})})]})]}):null}},53152:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(89075);r(50511);var s=r(33452),a=r(22526);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(l({variant:r}),t),...s})}},45859:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(89075),s=r(50511),a=r(9709),l=r(33452),i=r(22526);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},30073:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var n=r(89075),s=r(50511),a=r(22526);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},22526:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var n=r(68273),s=r(70868);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}},44431:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(79318).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},65095:function(e,t,r){"use strict";var n=r(17353);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},9709:function(e,t,r){"use strict";r.d(t,{Z8:function(){return d},g7:function(){return u}});var n,s=r(50511),a=r(14860),l=r(89075),i=Symbol.for("react.lazy"),o=(n||(n=r.t(s,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:r,...n}=e;if(c(r)&&"function"==typeof o&&(r=o(r._payload)),s.isValidElement(r)){var l,i,d;let e,o;let c=(e=null===(i=Object.getOwnPropertyDescriptor((l=r).props,"ref"))||void 0===i?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=null===(d=Object.getOwnPropertyDescriptor(l,"ref"))||void 0===d?void 0:d.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref,u=function(e,t){let r={...t};for(let n in t){let s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=a(...t);return s(...t),n}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==s.Fragment&&(u.ref=t?(0,a.F)(t,c):c),s.cloneElement(r,u)}return s.Children.count(r)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),r=s.forwardRef((e,r)=>{let{children:n,...a}=e;c(n)&&"function"==typeof o&&(n=o(n._payload));let i=s.Children.toArray(n),d=i.find(x);if(d){let e=d.props.children,n=i.map(t=>t!==d?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...a,ref:r,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,l.jsx)(t,{...a,ref:r,children:n})});return r.displayName="".concat(e,".Slot"),r}var u=d("Slot"),f=Symbol("radix.slottable");function x(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},33452:function(e,t,r){"use strict";r.d(t,{j:function(){return l}});var n=r(68273);let s=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,a=n.W,l=(e,t)=>r=>{var n;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;let a=s(t)||s(n);return l[e][a]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return a(e,o,null==t?void 0:null===(n=t.compoundVariants)||void 0===n?void 0:n.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,n]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},function(e){e.O(0,[862,852,999,744],function(){return e(e.s=29807)}),_N_E=e.O()}]);