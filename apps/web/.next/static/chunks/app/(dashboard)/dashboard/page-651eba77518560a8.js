(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{33957:function(e,s,a){Promise.resolve().then(a.bind(a,44791))},44791:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var t=a(89075),l=a(50511),n=a(30073),r=a(33274),i=a(42314),c=a(76754),d=a(65763),o=a(87673),x=a(86807),m=a(55403),h=a(26608),u=a(53279);function f(e){let{data:s}=e;return s&&0!==s.length?(0,t.jsx)(d.h,{width:"100%",height:200,children:(0,t.jsxs)(o.v,{data:s,children:[(0,t.jsx)(x.K,{dataKey:"date",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,t.jsx)(m.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"".concat(e),allowDecimals:!1}),(0,t.jsx)(h.u,{cursor:{fill:"transparent"},content:e=>{let{active:s,payload:a,label:l}=e;return s&&a&&a.length?(0,t.jsx)("div",{className:"rounded-lg border border-border bg-popover p-2 shadow-sm",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-[0.70rem] uppercase text-muted-foreground",children:l}),(0,t.jsx)("span",{className:"font-bold text-muted-foreground",children:a[0].value})]})})}):null}}),(0,t.jsx)(u.$Q,{dataKey:"count",fill:"currentColor",radius:[4,4,0,0],className:"fill-[#0084FF]"})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-[200px] text-zinc-500 text-sm",children:"Nenhum dado dispon\xedvel"})}var j=a(69541),p=a(29455),N=a(18331);function g(e){let{stats:s}=e;return(0,t.jsxs)(n.Zb,{className:"col-span-full md:col-span-4 lg:col-span-4 bg-zinc-900/50 border-zinc-800",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"text-white flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Funil de Leads"}),(0,t.jsx)(j.Z,{className:"w-4 h-4 text-[#0084FF]"})]})}),(0,t.jsxs)(n.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1 flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"w-3 h-3"})," Total"]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:s.total})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1 flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"w-3 h-3"})," Hoje (Novos)"]}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:["+",s.newToday]})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1 flex items-center gap-2",children:[(0,t.jsx)(i.Z,{className:"w-3 h-3"})," Ativos (24h)"]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:s.active24h})]}),(0,t.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"text-zinc-500 text-xs uppercase tracking-wider mb-1 flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"w-3 h-3"})," Ativos (7d)"]}),(0,t.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:s.active7d})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-xs font-semibold uppercase text-zinc-500 tracking-wider",children:"Engajamento por Rec\xeancia"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-zinc-800/30 border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),(0,t.jsx)("span",{className:"text-sm text-zinc-300",children:"Online Agora (15 min)"})]}),(0,t.jsx)("span",{className:"font-mono text-white font-bold",children:s.activeNow})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-zinc-800/30 border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-sm text-zinc-300",children:"\xdaltimas 24 horas"})]}),(0,t.jsx)("span",{className:"font-mono text-white font-bold",children:s.active24h})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-zinc-800/30 border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),(0,t.jsx)("span",{className:"text-sm text-zinc-300",children:"\xdaltima Semana"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-1.5 w-24 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-purple-400/50",style:{width:"".concat(s.total>0?s.active7d/s.total*100:0,"%")}})}),(0,t.jsx)("span",{className:"font-mono text-white font-bold",children:s.active7d})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded bg-zinc-800/30 border border-zinc-800/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-zinc-500"}),(0,t.jsx)("span",{className:"text-sm text-zinc-300",children:"\xdaltimo M\xeas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-1.5 w-24 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-zinc-500/50",style:{width:"".concat(s.total>0?s.active30d/s.total*100:0,"%")}})}),(0,t.jsx)("span",{className:"font-mono text-white font-bold",children:s.active30d})]})]})]})]})]})]})}var b=a(65095),v=a(63350),w=a(20385);function z(){let e=(0,b.useRouter)(),s=(0,b.useSearchParams)(),[a,n]=(0,l.useState)([]),[r,i]=(0,l.useState)(s.get("pageId")||"all");return((0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/messenger/status");if(e.ok){let s=await e.json();n(s.accounts||[])}}catch(e){console.error(e)}})()},[]),0===a.length)?null:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)(v.Ph,{value:r,onValueChange:a=>{i(a);let t=new URLSearchParams(s.toString());"all"===a?t.delete("pageId"):t.set("pageId",a),e.push("/dashboard?".concat(t.toString()))},children:[(0,t.jsx)(v.i4,{className:"w-[200px] bg-zinc-900 border-zinc-700 text-zinc-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.Z,{className:"w-4 h-4 text-blue-500"}),(0,t.jsx)(v.ki,{placeholder:"Todas as p\xe1ginas"})]})}),(0,t.jsxs)(v.Bw,{className:"bg-zinc-900 border-zinc-800 text-zinc-200",children:[(0,t.jsx)(v.Ql,{value:"all",children:"Todas as P\xe1ginas"}),a.map(e=>(0,t.jsx)(v.Ql,{value:e.pageId,children:e.pageName},e.id))]})]})})}var y=a(88457),k=a(99598),Z=a(18360);function O(){return(0,t.jsxs)(n.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(y.O,{className:"h-4 w-32 bg-zinc-800"}),(0,t.jsx)(y.O,{className:"h-4 w-4 rounded bg-zinc-800"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)(y.O,{className:"h-8 w-16 bg-zinc-800"})})]})}function R(){var e,s,a;let[d,o]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0),h=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/dashboard/stats");if(e.ok){let s=await e.json();o(s)}}catch(e){console.error("Dashboard fetch error:",e)}finally{m(!1)}},[]);return(0,l.useEffect)(()=>{h()},[h]),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-zinc-400",children:"Vis\xe3o geral da sua opera\xe7\xe3o no Messenger"})]}),(0,t.jsx)(z,{})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-3",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{}),(0,t.jsx)(O,{}),(0,t.jsx)(O,{})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium text-zinc-200",children:"Automa\xe7\xf5es Ativas"}),(0,t.jsx)(r.Z,{className:"h-4 w-4 text-[#0084FF]"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:null!==(e=null==d?void 0:d.activeRules)&&void 0!==e?e:0})})]}),(0,t.jsxs)(n.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium text-zinc-200",children:"Execu\xe7\xf5es Totais"}),(0,t.jsx)(i.Z,{className:"h-4 w-4 text-[#0084FF]"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:null!==(s=null==d?void 0:d.totalExecutions)&&void 0!==s?s:0}),(0,t.jsx)("p",{className:"text-xs text-zinc-500",children:"Desde o in\xedcio"})]})]}),(0,t.jsxs)(n.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium text-zinc-200",children:"Respostas Enviadas"}),(0,t.jsx)(c.Z,{className:"h-4 w-4 text-[#0084FF]"})]}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:null!==(a=null==d?void 0:d.messagesSent)&&void 0!==a?a:0})})]})]})}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-4 lg:grid-cols-8",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Zb,{className:"md:col-span-4 lg:col-span-4 bg-zinc-900/50 border-zinc-800",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(y.O,{className:"h-6 w-32 bg-zinc-800"})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)(y.O,{className:"h-[200px] w-full bg-zinc-800/40 rounded"})})]}),(0,t.jsxs)(n.Zb,{className:"md:col-span-4 lg:col-span-4 bg-zinc-900/50 border-zinc-800",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(y.O,{className:"h-6 w-40 bg-zinc-800"})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)(y.O,{className:"h-[200px] w-full bg-zinc-800/40 rounded"})})]})]}):d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{stats:d.leadStats}),(0,t.jsxs)(n.Zb,{className:"md:col-span-4 lg:col-span-4 bg-zinc-900/50 border-zinc-800",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-white",children:"Performance Mensagens"})}),(0,t.jsx)(n.aY,{className:"pl-2",children:(0,t.jsx)(f,{data:d.chartData})})]})]}):null}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-1",children:(0,t.jsxs)(n.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{className:"text-white",children:"Atividade Recente"})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-8",children:x?Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"ml-4 space-y-1.5 flex-1",children:[(0,t.jsx)(y.O,{className:"h-4 w-48 bg-zinc-800"}),(0,t.jsx)(y.O,{className:"h-3 w-24 bg-zinc-800/60"})]}),(0,t.jsx)(y.O,{className:"h-4 w-20 bg-zinc-800"})]},s)):(null==d?void 0:d.recentActivity.length)===0?(0,t.jsx)("div",{className:"text-sm text-zinc-500 flex items-center justify-center h-[200px] border border-dashed border-zinc-800 rounded-lg bg-black/20",children:"Nenhuma atividade recente."}):null==d?void 0:d.recentActivity.map(e=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"ml-4 space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none text-zinc-200",children:e.description}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,k.Q)(new Date(e.timestamp),{addSuffix:!0,locale:Z.F})})]}),(0,t.jsx)("div",{className:"ml-auto font-medium text-sm text-zinc-400",children:"MESSAGE"===e.type?"Mensagem":"Execu\xe7\xe3o"})]},e.id))})})]})})]})}},30073:function(e,s,a){"use strict";a.d(s,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return r},aY:function(){return o},eW:function(){return x},ll:function(){return c}});var t=a(89075),l=a(50511),n=a(22526);let r=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});r.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});d.displayName="CardDescription";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...l})});o.displayName="CardContent";let x=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...l})});x.displayName="CardFooter"},63350:function(e,s,a){"use strict";a.d(s,{Bw:function(){return f},Ph:function(){return o},Ql:function(){return j},i4:function(){return m},ki:function(){return x}});var t=a(89075),l=a(50511),n=a(60326),r=a(39525),i=a(12959),c=a(67253),d=a(22526);let o=n.fC;n.ZA;let x=n.B4,m=l.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(n.xz,{ref:s,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,t.jsx)(n.JO,{asChild:!0,children:(0,t.jsx)(r.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=n.u_.displayName;let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(r.Z,{className:"h-4 w-4"})})});u.displayName=n.$G.displayName;let f=l.forwardRef((e,s)=>{let{className:a,children:l,position:r="popper",...i}=e;return(0,t.jsx)(n.h_,{children:(0,t.jsxs)(n.VY,{ref:s,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:[(0,t.jsx)(h,{}),(0,t.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,t.jsx)(u,{})]})})});f.displayName=n.VY.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",a),...l})}).displayName=n.__.displayName;let j=l.forwardRef((e,s)=>{let{className:a,children:l,...r}=e;return(0,t.jsxs)(n.ck,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(n.wU,{children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(n.eT,{children:l})]})});j.displayName=n.ck.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(n.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=n.Z0.displayName},88457:function(e,s,a){"use strict";a.d(s,{O:function(){return n}});var t=a(89075),l=a(22526);function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-zinc-800/50",s),...a})}},22526:function(e,s,a){"use strict";a.d(s,{cn:function(){return n}});var t=a(68273),l=a(70868);function n(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,l.m6)((0,t.W)(s))}}},function(e){e.O(0,[2688,1371,7010,1587,8202,9052,546,3115,1493,4852,4999,1744],function(){return e(e.s=33957)}),_N_E=e.O()}]);