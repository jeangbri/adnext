(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4861],{64076:function(e,a,s){Promise.resolve().then(s.bind(s,13171))},13171:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return p}});var l=s(89075),r=s(50511),t=s(30073),n=s(45859),i=s(38683),c=s(20486),o=s(63350),d=s(3643),u=s(93628),m=s(47641);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,s(79318).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=s(86241);function p(){let[e,a]=(0,r.useState)(""),[s,p]=(0,r.useState)("SQUARE"),[f,v]=(0,r.useState)("NONE"),[j,g]=(0,r.useState)(""),[N,b]=(0,r.useState)("Produto Teste"),[y,C]=(0,r.useState)("Descri\xe7\xe3o do card"),[w,O]=(0,r.useState)(!1),[S,z]=(0,r.useState)(!1),[E,_]=(0,r.useState)([]),A=e=>{_(a=>["[".concat(new Date().toLocaleTimeString(),"] ").concat(e),...a])},R=async()=>{if(!e){u.Am.error("Adicione uma URL de imagem");return}O(!0),A("Derivando imagem para ".concat(s,"..."));try{let a=await fetch("/api/card-image/derive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,cardFormat:s})}),l=await a.json();a.ok?(g(l.derivedUrl),A("✓ Derivada OK: ".concat(l.width,"\xd7").concat(l.height," → ").concat(l.derivedUrl)),u.Am.success("Imagem derivada com sucesso!")):(A("✗ Erro: ".concat(l.error)),u.Am.error(l.error))}catch(e){A("✗ Erro: ".concat(e.message))}finally{O(!1)}},k=async e=>{var s;let l=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!l)return;let r=new FormData;r.append("file",l);try{let e=await fetch("/api/upload",{method:"POST",body:r}),s=await e.json();e.ok?(a(s.url),g(""),A("Upload OK: ".concat(s.url)),u.Am.success("Upload conclu\xeddo!")):u.Am.error(s.error)}catch(e){u.Am.error(e.message)}},D=()=>"AUTO_CENTER_CROP"===f&&j?j:e,P=Object.entries(h.JN);return(0,l.jsx)("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83E\uDDEA Teste de Formato do Card"}),(0,l.jsx)("p",{className:"text-sm text-zinc-400 mt-1",children:"Preview comparativo de todos os formatos + envio de teste"})]}),(0,l.jsxs)(t.Zb,{className:"bg-zinc-900 border-zinc-800",children:[(0,l.jsx)(t.Ol,{children:(0,l.jsx)(t.ll,{className:"text-sm",children:"Configura\xe7\xe3o"})}),(0,l.jsxs)(t.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{className:"text-xs",children:"URL da Imagem"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(i.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs flex-1",value:e,onChange:e=>{a(e.target.value),g("")},placeholder:"https://..."}),(0,l.jsxs)("label",{className:"cursor-pointer",children:[(0,l.jsx)(n.z,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:(0,l.jsx)("span",{children:"Upload"})}),(0,l.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:k})]})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{className:"text-xs",children:"Formato"}),(0,l.jsxs)(o.Ph,{value:s,onValueChange:e=>{p(e),g("")},children:[(0,l.jsx)(o.i4,{className:"h-8 text-xs bg-black/40 border-zinc-800",children:(0,l.jsx)(o.ki,{})}),(0,l.jsxs)(o.Bw,{children:[(0,l.jsx)(o.Ql,{value:"SQUARE",children:"Quadrado (1:1)"}),(0,l.jsx)(o.Ql,{value:"PORTRAIT",children:"Retrato (4:5)"}),(0,l.jsx)(o.Ql,{value:"LANDSCAPE",children:"Paisagem (1.91:1)"})]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{className:"text-xs",children:"T\xedtulo"}),(0,l.jsx)(i.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:N,onChange:e=>b(e.target.value)})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(c._,{className:"text-xs",children:"Subt\xedtulo"}),(0,l.jsx)(i.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:y,onChange:e=>C(e.target.value)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(d.r,{checked:"AUTO_CENTER_CROP"===f,onCheckedChange:e=>v(e?"AUTO_CENTER_CROP":"NONE")}),(0,l.jsxs)(c._,{className:"text-xs",children:["Recorte Autom\xe1tico (cropMode: ",f,")"]})]}),(0,l.jsx)("div",{className:"flex gap-2",children:(0,l.jsxs)(n.z,{size:"sm",className:"h-8 text-xs",onClick:R,disabled:!e||w,children:[w?(0,l.jsx)(m.Z,{className:"w-3 h-3 mr-1 animate-spin"}):null,"Derivar imagem (",h.JN[s].idealLabel,")"]})}),j&&(0,l.jsxs)("div",{className:"text-[10px] text-emerald-400 bg-emerald-500/10 p-2 rounded border border-emerald-500/20 break-all",children:["✓ Derivada: ",j]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[(0,l.jsx)(x,{className:"w-4 h-4"})," Preview Comparativo"]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map(a=>{let[r,n]=a;return(0,l.jsxs)(t.Zb,{className:"bg-zinc-900 border-zinc-800 ".concat(r===s?"ring-2 ring-primary":""),children:[(0,l.jsxs)(t.Ol,{className:"pb-2",children:[(0,l.jsx)(t.ll,{className:"text-xs",children:n.label}),(0,l.jsx)(t.SZ,{className:"text-[10px]",children:n.idealLabel})]}),(0,l.jsxs)(t.aY,{children:[(0,l.jsx)("div",{className:"rounded-lg overflow-hidden bg-black/30 border border-zinc-800 mb-2",style:{aspectRatio:n.cssAspectRatio},children:e?(0,l.jsx)("img",{src:r===s&&j?j:e,alt:"Preview ".concat(r),className:"w-full h-full object-cover"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center text-zinc-600 text-xs",children:"Sem imagem"})}),(0,l.jsx)("p",{className:"text-xs font-medium truncate",children:N||"T\xedtulo"}),(0,l.jsx)("p",{className:"text-[10px] text-zinc-500 truncate",children:y||"Subt\xedtulo"}),r===s&&(0,l.jsx)("span",{className:"inline-block mt-1 text-[9px] bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Selecionado"})]})]},r)})})]}),(0,l.jsxs)(t.Zb,{className:"bg-zinc-900 border-zinc-800",children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsx)(t.ll,{className:"text-sm",children:"\uD83D\uDCE4 Dados de Envio"}),(0,l.jsx)(t.SZ,{className:"text-xs",children:"O que seria enviado ao Messenger"})]}),(0,l.jsx)(t.aY,{children:(0,l.jsx)("pre",{className:"text-[10px] bg-black/40 p-3 rounded border border-zinc-800 overflow-auto max-h-[200px]",children:JSON.stringify({cardFormat:s,cropMode:f,sentImageUrl:D(),originalImageUrl:e,derivedImageUrl:j||null,messengerPayload:{template_type:"generic",elements:[{title:N,subtitle:y,image_url:D()}]}},null,2)})})]}),(0,l.jsxs)(t.Zb,{className:"bg-zinc-900 border-zinc-800",children:[(0,l.jsx)(t.Ol,{children:(0,l.jsx)(t.ll,{className:"text-sm",children:"\uD83D\uDCCB Log"})}),(0,l.jsx)(t.aY,{children:(0,l.jsxs)("div",{className:"space-y-1 max-h-[200px] overflow-auto",children:[0===E.length&&(0,l.jsx)("p",{className:"text-xs text-zinc-600",children:"Nenhum log ainda"}),E.map((e,a)=>(0,l.jsx)("p",{className:"text-[10px] text-zinc-400 font-mono",children:e},a))]})})]})]})})}},99241:function(e,a,s){"use strict";s.d(a,{WV:function(){return n}});var l=s(50511);s(46739);var r=s(9709),t=s(89075),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,r.Z8)("Primitive.".concat(a)),n=l.forwardRef((e,l)=>{let{asChild:r,...n}=e,i=r?s:a;return window[Symbol.for("radix-ui")]=!0,(0,t.jsx)(i,{...n,ref:l})});return n.displayName="Primitive.".concat(a),{...e,[a]:n}},{})},9709:function(e,a,s){"use strict";s.d(a,{Z8:function(){return d},g7:function(){return u}});var l,r=s(50511),t=s(14860),n=s(89075),i=Symbol.for("react.lazy"),c=(l||(l=s.t(r,2)))[" use ".trim().toString()];function o(e){var a;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(a=e._payload)&&null!==a&&"then"in a}function d(e){let a=function(e){let a=r.forwardRef((e,a)=>{let{children:s,...l}=e;if(o(s)&&"function"==typeof c&&(s=c(s._payload)),r.isValidElement(s)){var n,i,d;let e,c;let o=(e=null===(i=Object.getOwnPropertyDescriptor((n=s).props,"ref"))||void 0===i?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning?n.ref:(e=null===(d=Object.getOwnPropertyDescriptor(n,"ref"))||void 0===d?void 0:d.get)&&"isReactWarning"in e&&e.isReactWarning?n.props.ref:n.props.ref||n.ref,u=function(e,a){let s={...a};for(let l in a){let r=e[l],t=a[l];/^on[A-Z]/.test(l)?r&&t?s[l]=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];let l=t(...a);return r(...a),l}:r&&(s[l]=r):"style"===l?s[l]={...r,...t}:"className"===l&&(s[l]=[r,t].filter(Boolean).join(" "))}return{...e,...s}}(l,s.props);return s.type!==r.Fragment&&(u.ref=a?(0,t.F)(a,o):o),r.cloneElement(s,u)}return r.Children.count(s)>1?r.Children.only(null):null});return a.displayName="".concat(e,".SlotClone"),a}(e),s=r.forwardRef((e,s)=>{let{children:l,...t}=e;o(l)&&"function"==typeof c&&(l=c(l._payload));let i=r.Children.toArray(l),d=i.find(x);if(d){let e=d.props.children,l=i.map(a=>a!==d?a:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(a,{...t,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,n.jsx)(a,{...t,ref:s,children:l})});return s.displayName="".concat(e,".Slot"),s}var u=d("Slot"),m=Symbol("radix.slottable");function x(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}},33452:function(e,a,s){"use strict";s.d(a,{j:function(){return n}});var l=s(68273);let r=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,t=l.W,n=(e,a)=>s=>{var l;if((null==a?void 0:a.variants)==null)return t(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:i}=a,c=Object.keys(n).map(e=>{let a=null==s?void 0:s[e],l=null==i?void 0:i[e];if(null===a)return null;let t=r(a)||r(l);return n[e][t]}),o=s&&Object.entries(s).reduce((e,a)=>{let[s,l]=a;return void 0===l||(e[s]=l),e},{});return t(e,c,null==a?void 0:null===(l=a.compoundVariants)||void 0===l?void 0:l.reduce((e,a)=>{let{class:s,className:l,...r}=a;return Object.entries(r).every(e=>{let[a,s]=e;return Array.isArray(s)?s.includes({...i,...o}[a]):({...i,...o})[a]===s})?[...e,s,l]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[6862,3628,8883,7010,1587,9052,6099,4852,4999,1744],function(){return e(e.s=64076)}),_N_E=e.O()}]);