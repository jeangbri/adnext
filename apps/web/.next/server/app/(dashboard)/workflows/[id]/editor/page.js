(()=>{var e={};e.id=9318,e.ids=[9318],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9834:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var r=n(28090),o=n(79409),a=n(31522),i=n.n(a),s=n(41305),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);n.d(t,l);let c=["",{children:["(dashboard)",{children:["workflows",{children:["[id]",{children:["editor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,31631)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,63470)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(n.bind(n,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,70111,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\workflows\\[id]\\editor\\page.tsx"],u="/(dashboard)/workflows/[id]/editor/page",h={require:n,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/(dashboard)/workflows/[id]/editor/page",pathname:"/workflows/[id]/editor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4599:(e,t,n)=>{Promise.resolve().then(n.bind(n,36581))},36581:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s2});var r,o,a,i,s,l,c,d,u,h=n(44297),f=n(65803),p=n(13776),m=n(76858),g=n(32538),x=n(51305),v=n(84811),y=n(42682),b=n(55079);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let w=(0,b.Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);var N=n(66606);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let j=(0,b.Z)("Braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);var _=n(4721),E=n(97545),k=n(42911);function S(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=S(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var C={value:()=>{}};function M(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new P(r)}function P(e){this._=e}function A(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=C,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function I(){}function R(e){return null==e?I:function(){return this.querySelector(e)}}function D(){return[]}function z(e){return null==e?D:function(){return this.querySelectorAll(e)}}function $(e){return function(){return this.matches(e)}}function T(e){return function(t){return t.matches(e)}}P.prototype=M.prototype={constructor:P,on:function(e,t){var n,r=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),a=-1,i=o.length;if(arguments.length<2){for(;++a<i;)if((n=(e=o[a]).type)&&(n=function(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=A(r[n],e.name,t);else if(null==t)for(n in r)r[n]=A(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new P(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var O=Array.prototype.find;function L(){return this.firstElementChild}var V=Array.prototype.filter;function B(){return Array.from(this.children)}function H(e){return Array(e.length)}function F(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Z(e,t,n,r,o,a){for(var i,s=0,l=t.length,c=a.length;s<c;++s)(i=t[s])?(i.__data__=a[s],r[s]=i):n[s]=new F(e,a[s]);for(;s<l;++s)(i=t[s])&&(o[s]=i)}function q(e,t,n,r,o,a,i){var s,l,c,d=new Map,u=t.length,h=a.length,f=Array(u);for(s=0;s<u;++s)(l=t[s])&&(f[s]=c=i.call(l,l.__data__,s,t)+"",d.has(c)?o[s]=l:d.set(c,l));for(s=0;s<h;++s)c=i.call(e,a[s],s,a)+"",(l=d.get(c))?(r[s]=l,l.__data__=a[s],d.delete(c)):n[s]=new F(e,a[s]);for(s=0;s<u;++s)(l=t[s])&&d.get(f[s])===l&&(o[s]=l)}function Y(e){return e.__data__}function W(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}F.prototype={constructor:F,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var K="http://www.w3.org/1999/xhtml";let X={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function U(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),X.hasOwnProperty(t)?{space:X[t],local:e}:e}function G(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q(e,t){return e.style.getPropertyValue(t)||G(e).getComputedStyle(e,null).getPropertyValue(t)}function J(e){return e.trim().split(/^|\s+/)}function ee(e){return e.classList||new et(e)}function et(e){this._node=e,this._names=J(e.getAttribute("class")||"")}function en(e,t){for(var n=ee(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function er(e,t){for(var n=ee(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function eo(){this.textContent=""}function ea(){this.innerHTML=""}function ei(){this.nextSibling&&this.parentNode.appendChild(this)}function es(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function el(e){var t=U(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===K&&t.documentElement.namespaceURI===K?t.createElement(e):t.createElementNS(n,e)}})(t)}function ec(){return null}function ed(){var e=this.parentNode;e&&e.removeChild(this)}function eu(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ef(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function ep(e,t,n){return function(){var r,o=this.__on,a=function(e){t.call(this,e,this.__data__)};if(o){for(var i=0,s=o.length;i<s;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function em(e,t,n){var r=G(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}et.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eg=[null];function ex(e,t){this._groups=e,this._parents=t}function ev(){return new ex([[document.documentElement]],eg)}function ey(e){return"string"==typeof e?new ex([[document.querySelector(e)]],[document.documentElement]):new ex([[e]],eg)}function eb(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}ex.prototype=ev.prototype={constructor:ex,select:function(e){"function"!=typeof e&&(e=R(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i,s=t[o],l=s.length,c=r[o]=Array(l),d=0;d<l;++d)(a=s[d])&&(i=e.call(a,a.__data__,d,s))&&("__data__"in a&&(i.__data__=a.__data__),c[d]=i);return new ex(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=z(e);for(var n=this._groups,r=n.length,o=[],a=[],i=0;i<r;++i)for(var s,l=n[i],c=l.length,d=0;d<c;++d)(s=l[d])&&(o.push(e.call(s,s.__data__,d,l)),a.push(s));return new ex(o,a)},selectChild:function(e){var t;return this.select(null==e?L:(t="function"==typeof e?e:T(e),function(){return O.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?B:(t="function"==typeof e?e:T(e),function(){return V.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=$(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new ex(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Y);var n=t?q:Z,r=this._parents,o=this._groups;"function"!=typeof e&&(v=e,e=function(){return v});for(var a=o.length,i=Array(a),s=Array(a),l=Array(a),c=0;c<a;++c){var d=r[c],u=o[c],h=u.length,f="object"==typeof(x=e.call(d,d&&d.__data__,c,r))&&"length"in x?x:Array.from(x),p=f.length,m=s[c]=Array(p),g=i[c]=Array(p);n(d,u,m,g,l[c]=Array(h),f,t);for(var x,v,y,b,w=0,N=0;w<p;++w)if(y=m[w]){for(w>=N&&(N=w+1);!(b=g[N])&&++N<p;);y._next=b||null}}return(i=new ex(i,r))._enter=s,i._exit=l,i},enter:function(){return new ex(this._enter||this._groups.map(H),this._parents)},exit:function(){return new ex(this._exit||this._groups.map(H),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=Array(o),l=0;l<i;++l)for(var c,d=n[l],u=r[l],h=d.length,f=s[l]=Array(h),p=0;p<h;++p)(c=d[p]||u[p])&&(f[p]=c);for(;l<o;++l)s[l]=n[l];return new ex(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=W);for(var n=this._groups,r=n.length,o=Array(r),a=0;a<r;++a){for(var i,s=n[a],l=s.length,c=o[a]=Array(l),d=0;d<l;++d)(i=s[d])&&(c[d]=i);c.sort(t)}return new ex(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,s=a.length;i<s;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=U(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):Q(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=J(e+"");if(arguments.length<2){for(var r=ee(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?en:er)(this,e)}}:t?function(e){return function(){en(this,e)}}:function(e){return function(){er(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?eo:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ea:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(ei)},lower:function(){return this.each(es)},append:function(e){var t="function"==typeof e?e:el(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:el(e),r=null==t?ec:"function"==typeof t?t:R(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(ed)},clone:function(e){return this.select(e?eh:eu)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),i=a.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,c=0,d=s.length;c<d;++c)for(r=0,l=s[c];r<i;++r)if((o=a[r]).type===l.type&&o.name===l.name)return l.value}return}for(r=0,s=t?ep:ef;r<i;++r)this.each(s(a[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return em(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return em(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};let ew={passive:!1},eN={capture:!0,passive:!1};function ej(e){e.stopImmediatePropagation()}function e_(e){e.preventDefault(),e.stopImmediatePropagation()}function eE(e){var t=e.document.documentElement,n=ey(e).on("dragstart.drag",e_,eN);"onselectstart"in t?n.on("selectstart.drag",e_,eN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ek(e,t){var n=e.document.documentElement,r=ey(e).on("dragstart.drag",null);t&&(r.on("click.drag",e_,eN),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}let eS=e=>()=>e;function eC(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function eM(e){return!e.ctrlKey&&!e.button}function eP(){return this.parentNode}function eA(e,t){return null==t?{x:e.x,y:e.y}:t}function eI(){return navigator.maxTouchPoints||"ontouchstart"in this}function eR(e){return((e=Math.exp(e))+1/e)/2}eC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let eD=function e(t,n,r){function o(e,o){var a,i,s=e[0],l=e[1],c=e[2],d=o[0],u=o[1],h=o[2],f=d-s,p=u-l,m=f*f+p*p;if(m<1e-12)i=Math.log(h/c)/t,a=function(e){return[s+e*f,l+e*p,c*Math.exp(t*e*i)]};else{var g=Math.sqrt(m),x=(h*h-c*c+r*m)/(2*c*n*g),v=(h*h-c*c-r*m)/(2*h*n*g),y=Math.log(Math.sqrt(x*x+1)-x);i=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,a=function(e){var r,o,a=e*i,d=eR(y),u=c/(n*g)*(((r=Math.exp(2*(r=t*a+y)))-1)/(r+1)*d-((o=Math.exp(o=y))-1/o)/2);return[s+u*f,l+u*p,c*d/eR(t*a+y)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4);var ez,e$,eT=0,eO=0,eL=0,eV=0,eB=0,eH=0,eF="object"==typeof performance&&performance.now?performance:Date,eZ=function(e){setTimeout(e,17)};function eq(){return eB||(eZ(eY),eB=eF.now()+eH)}function eY(){eB=0}function eW(){this._call=this._time=this._next=null}function eK(e,t,n){var r=new eW;return r.restart(e,t,n),r}function eX(){eB=(eV=eF.now())+eH,eT=eO=0;try{!function(){eq(),++eT;for(var e,t=ez;t;)(e=eB-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eT}()}finally{eT=0,function(){for(var e,t,n=ez,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ez=t);e$=e,eG(r)}(),eB=0}}function eU(){var e=eF.now(),t=e-eV;t>1e3&&(eH-=t,eV=e)}function eG(e){!eT&&(eO&&(eO=clearTimeout(eO)),e-eB>24?(e<1/0&&(eO=setTimeout(eX,e-eF.now()-eH)),eL&&(eL=clearInterval(eL))):(eL||(eV=eF.now(),eL=setInterval(eU,1e3)),eT=1,eZ(eX)))}function eQ(e,t,n){var r=new eW;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eW.prototype=eK.prototype={constructor:eW,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?eq():+n)+(null==t?0:+t),this._next||e$===this||(e$?e$._next=this:ez=this,e$=this),this._call=e,this._time=n,eG()},stop:function(){this._call&&(this._call=null,this._time=1/0,eG())}};var eJ=M("start","end","cancel","interrupt"),e0=[];function e1(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};(function(e,t,n){var r,o=e.__transition;function a(l){var c,d,u,h;if(1!==n.state)return s();for(c in o)if((h=o[c]).name===n.name){if(3===h.state)return eQ(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(eQ(function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(c=0,n.state=3,r=Array(u=n.tween.length),d=-1;c<u;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=eK(function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)})(e,n,{name:t,index:r,group:o,on:eJ,tween:e0,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function e2(e,t){var n=e3(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function e4(e,t){var n=e3(e,t);if(n.state>3)throw Error("too late; already running");return n}function e3(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function e5(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a){if((n=a[o]).name!==t){i=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]}i&&delete e.__transition}}var e6=n(90372),e7=180/Math.PI,e8={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e9(e,t,n,r,o,a){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*e7,skewX:Math.atan(l)*e7,scaleX:i,scaleY:s}}function te(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var s,l,c,d,u=[],h=[];return a=e(a),i=e(i),function(e,r,o,a,i,s){if(e!==o||r!==a){var l=i.push("translate(",null,t,null,n);s.push({i:l-4,x:(0,e6.Z)(e,o)},{i:l-2,x:(0,e6.Z)(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,u,h),(s=a.rotate)!==(l=i.rotate)?(s-l>180?l+=360:l-s>180&&(s+=360),h.push({i:u.push(o(u)+"rotate(",null,r)-2,x:(0,e6.Z)(s,l)})):l&&u.push(o(u)+"rotate("+l+r),(c=a.skewX)!==(d=i.skewX)?h.push({i:u.push(o(u)+"skewX(",null,r)-2,x:(0,e6.Z)(c,d)}):d&&u.push(o(u)+"skewX("+d+r),function(e,t,n,r,a,i){if(e!==n||t!==r){var s=a.push(o(a)+"scale(",null,",",null,")");i.push({i:s-4,x:(0,e6.Z)(e,n)},{i:s-2,x:(0,e6.Z)(t,r)})}else(1!==n||1!==r)&&a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,u,h),a=i=null,function(e){for(var t,n=-1,r=h.length;++n<r;)u[(t=h[n]).i]=t.x(e);return u.join("")}}}var tt=te(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?e8:e9(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),tn=te(function(e){return null==e?e8:(r||(r=document.createElementNS("http://www.w3.org/2000/svg","g")),r.setAttribute("transform",e),e=r.transform.baseVal.consolidate())?e9((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):e8},", ",")",")");function tr(e,t,n){var r=e._id;return e.each(function(){var e=e4(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return e3(e,r).value[t]}}var to=n(29398),ta=n(93826),ti=n(65266);function ts(e,t){var n;return("number"==typeof t?e6.Z:t instanceof to.ZP?ta.ZP:(n=(0,to.ZP)(t))?(t=n,ta.ZP):ti.Z)(e,t)}var tl=ev.prototype.constructor;function tc(e){return function(){this.style.removeProperty(e)}}var td=0;function tu(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var th=ev.prototype;tu.prototype=(function(e){return ev().transition(e)}).prototype={constructor:tu,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=R(e));for(var r=this._groups,o=r.length,a=Array(o),i=0;i<o;++i)for(var s,l,c=r[i],d=c.length,u=a[i]=Array(d),h=0;h<d;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),u[h]=l,e1(u[h],t,n,h,u,e3(s,n)));return new tu(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=z(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var l,c=r[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var h,f=e.call(l,l.__data__,u,c),p=e3(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&e1(h,t,n,m,f,p);a.push(f),i.push(l)}return new tu(a,i,t,n)},selectChild:th.selectChild,selectChildren:th.selectChildren,filter:function(e){"function"!=typeof e&&(e=$(e));for(var t=this._groups,n=t.length,r=Array(n),o=0;o<n;++o)for(var a,i=t[o],s=i.length,l=r[o]=[],c=0;c<s;++c)(a=i[c])&&e.call(a,a.__data__,c,i)&&l.push(a);return new tu(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=Array(r),s=0;s<a;++s)for(var l,c=t[s],d=n[s],u=c.length,h=i[s]=Array(u),f=0;f<u;++f)(l=c[f]||d[f])&&(h[f]=l);for(;s<r;++s)i[s]=t[s];return new tu(i,this._parents,this._name,this._id)},selection:function(){return new tl(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++td,r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)if(i=s[c]){var d=e3(i,t);e1(i,e,n,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new tu(r,this._parents,e,n)},call:th.call,nodes:th.nodes,node:th.node,size:th.size,empty:th.empty,each:th.each,on:function(e,t){var n,r,o,a=this._id;return arguments.length<2?e3(this.node(),a).on.on(e):this.each((o=(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?e2:e4,function(){var i=o(this,a),s=i.on;s!==n&&(r=(n=s).copy()).on(e,t),i.on=r}))},attr:function(e,t){var n=U(e),r="transform"===n?tn:ts;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,o,a;return function(){var i,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l))}}:function(e,t,n){var r,o,a;return function(){var i,s,l=n(this);return null==l?void this.removeAttribute(e):(i=this.getAttribute(e))===(s=l+"")?null:i===r&&s===o?a:(o=s,a=t(r=i,l))}})(n,r,tr(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}:function(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=U(e);return this.tween(n,(r.local?function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttributeNS(e.space,e.local,o.call(this,t))}),n}return o._value=t,o}:function(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function(t){this.setAttribute(e,o.call(this,t))}),n}return o._value=t,o})(r,t))},style:function(e,t,n){var r,o,a,i,s,l,c,d,u,h,f,p,m,g,x,v,y,b,w,N,j,_="transform"==(e+="")?tt:ts;return null==t?this.styleTween(e,(r=e,function(){var e=Q(this,r),t=(this.style.removeProperty(r),Q(this,r));return e===t?null:e===o&&t===a?i:i=_(o=e,a=t)})).on("end.style."+e,tc(e)):"function"==typeof t?this.styleTween(e,(s=e,l=tr(this,"style."+e,t),function(){var e=Q(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=Q(this,s)),e===n?null:e===c&&n===d?u:(d=n,u=_(c=e,t))})).each((h=this._id,y="end."+(v="style."+(f=e)),function(){var e=e4(this,h),t=e.on,n=null==e.value[v]?x||(x=tc(f)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(y,g=n),e.on=m})):this.styleTween(e,(b=e,j=t+"",function(){var e=Q(this,b);return e===j?null:e===w?N:N=_(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&function(t){this.style.setProperty(e,a.call(this,t),n)}),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=tr(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=e3(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var o=e4(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}}o.tween=r}}:function(e,t,n){var r,o;if("function"!=typeof n)throw Error();return function(){var a=e4(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=s;break}l===c&&o.push(s)}a.tween=o}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){e2(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){e2(this,e).delay=t}})(t,e)):e3(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){e4(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){e4(this,e).duration=t}})(t,e)):e3(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){e4(this,e).ease=t}}(t,e)):e3(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();e4(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},l={value:function(){0==--o&&a()}};n.each(function(){var n=e4(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===o&&a()})},[Symbol.iterator]:th[Symbol.iterator]};var tf={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};ev.prototype.interrupt=function(e){return this.each(function(){e5(this,e)})},ev.prototype.transition=function(e){var t,n;e instanceof tu?(t=e._id,e=e._name):(t=++td,(n=tf).time=eq(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,s=r[a],l=s.length,c=0;c<l;++c)(i=s[c])&&e1(i,e,t,c,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(i,t));return new tu(r,this._parents,e,t)};let tp=e=>()=>e;function tm(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function tg(e,t,n){this.k=e,this.x=t,this.y=n}tg.prototype={constructor:tg,scale:function(e){return 1===e?this:new tg(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tg(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tx=new tg(1,0,0);function tv(e){for(;!e.__zoom;)if(!(e=e.parentNode))return tx;return e.__zoom}function ty(e){e.stopImmediatePropagation()}function tb(e){e.preventDefault(),e.stopImmediatePropagation()}function tw(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tj(){return this.__zoom||tx}function t_(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tE(){return navigator.maxTouchPoints||"ontouchstart"in this}function tk(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function tS(){var e,t,n,r=tw,o=tN,a=tk,i=t_,s=tE,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=eD,h=M("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",tj).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",_).filter(s).on("touchstart.zoom",E).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tg(t,e.x,e.y)}function x(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new tg(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,a=b(this,e).event(r),i=o.apply(this,e),s=null==n?v(i):"function"==typeof n?n.apply(this,e):n,l=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),c=this.__zoom,d="function"==typeof t?t.apply(this,e):t,h=u(c.invert(s).concat(l/c.k),d.invert(s).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=h(e),n=l/t[2];e=new tg(n,s[0]-t[0]*n,s[1]-t[1]*n)}a.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function N(e,...t){if(r.apply(this,arguments)){var n=b(this,t).event(e),o=this.__zoom,s=Math.max(l[0],Math.min(l[1],o.k*Math.pow(2,i.apply(this,arguments)))),d=eb(e);if(n.wheel)(n.mouse[0][0]!==d[0]||n.mouse[0][1]!==d[1])&&(n.mouse[1]=o.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(o.k===s)return;n.mouse=[d,o.invert(d)],e5(this),n.start()}tb(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",a(x(g(o,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function j(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=b(this,t,!0).event(e),s=ey(e.view).on("mousemove.zoom",function(e){if(tb(e),!i.moved){var t=e.clientX-d,n=e.clientY-u;i.moved=t*t+n*n>f}i.event(e).zoom("mouse",a(x(i.that.__zoom,i.mouse[0]=eb(e,o),i.mouse[1]),i.extent,c))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),ek(e.view,i.moved),tb(e),i.event(e).end()},!0),l=eb(e,o),d=e.clientX,u=e.clientY;eE(e.view),ty(e),i.mouse=[l,this.__zoom.invert(l)],e5(this),i.start()}}function _(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=eb(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(i),l=n.k*(e.shiftKey?.5:2),u=a(x(g(n,l),i,s),o.apply(this,t),c);tb(e),d>0?ey(this).transition().duration(d).call(y,u,i,e):ey(this).call(m.transform,u,i,e)}}function E(n,...o){if(r.apply(this,arguments)){var a,i,s,l,c=n.touches,d=c.length,u=b(this,o,n.changedTouches.length===d).event(n);for(ty(n),i=0;i<d;++i)l=[l=eb(s=c[i],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,a=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(u.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),e5(this),u.start())}}function k(e,...t){if(this.__zooming){var n,r,o,i,s=b(this,t).event(e),l=e.changedTouches,d=l.length;for(tb(e),n=0;n<d;++n)o=eb(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=o:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=o);if(r=s.that.__zoom,s.touch1){var u=s.touch0[0],h=s.touch0[1],f=s.touch1[0],p=s.touch1[1],m=(m=f[0]-u[0])*m+(m=f[1]-u[1])*m,v=(v=p[0]-h[0])*v+(v=p[1]-h[1])*v;r=g(r,Math.sqrt(m/v)),o=[(u[0]+f[0])/2,(u[1]+f[1])/2],i=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!s.touch0)return;o=s.touch0[0],i=s.touch0[1]}s.zoom("touch",a(x(r,o,i),s.extent,c))}}function S(e,...r){if(this.__zooming){var o,a,i=b(this,r).event(e),s=e.changedTouches,l=s.length;for(ty(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<l;++o)a=s[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=eb(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var c=ey(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",tj),e!==o?y(e,t,n,r):o.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return a(x(g(r,l),i,s),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,i){m.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return a(tx.translate(s[0],s[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)},r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=ey(this.that).datum();h.call(e,this.that,new tm(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:tp(+e),m):i},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:tp(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tp(!!e),m):s},m.extent=function(e){return arguments.length?(o="function"==typeof e?e:tp([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):o},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(d=+e,m):d},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}tv.prototype=tg.prototype;var tC=n(59454);let tM={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},tP=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tA=["Enter"," ","Escape"],tI={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};(function(e){e.Strict="strict",e.Loose="loose"})(o||(o={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(a||(a={})),function(e){e.Partial="partial",e.Full="full"}(i||(i={}));let tR={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(s||(s={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(l||(l={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(c||(c={}));let tD={[c.Left]:c.Right,[c.Right]:c.Left,[c.Top]:c.Bottom,[c.Bottom]:c.Top};function tz(e){return null===e?null:e?"valid":"invalid"}let t$=e=>"id"in e&&"source"in e&&"target"in e,tT=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),tO=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),tL=(e,t=[0,0])=>{let{width:n,height:r}=na(e),o=e.origin??t,a=n*o[0],i=r*o[1];return{x:e.position.x-a,y:e.position.y-i}},tV=(e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:t0(e.reduce((e,n)=>{let r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):tO(n)?n:t.nodeLookup.get(n.id)),tQ(e,o?t2(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),tB=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(e=>{(void 0===t.filter||t.filter(e))&&(n=tQ(n,t2(e)),r=!0)}),r?t0(n):{x:0,y:0,width:0,height:0}},tH=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{let s={...t9(t,[n,r,o]),width:t.width/o,height:t.height/o},l=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(i&&!n||r)continue;let o=e.width??t.width??t.initialWidth??null,c=e.height??t.height??t.initialHeight??null,d=t3(s,t1(t)),u=(o??0)*(c??0),h=a&&d>0;(!t.internals.handleBounds||h||d>=u||t.dragging)&&l.push(t)}return l},tF=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};async function tZ({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:a},i){if(0===e.size)return Promise.resolve(!0);let s=nn(tB(function(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}(e,i)),t,n,i?.minZoom??o,i?.maxZoom??a,i?.padding??.1);return await r.setViewport(s,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function tq({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:a}){let i=n.get(e),s=i.parentId?n.get(i.parentId):void 0,{x:l,y:c}=s?s.internals.positionAbsolute:{x:0,y:0},d=i.origin??r,u=i.extent||o;if("parent"!==i.extent||i.expandParent)s&&no(i.extent)&&(u=[[i.extent[0][0]+l,i.extent[0][1]+c],[i.extent[1][0]+l,i.extent[1][1]+c]]);else if(s){let e=s.measured.width,t=s.measured.height;e&&t&&(u=[[l,c],[l+e,c+t]])}else a?.("005",tM.error005());let h=no(u)?tK(t,u,i.measured):t;return(void 0===i.measured.width||void 0===i.measured.height)&&a?.("015",tM.error015()),{position:{x:h.x-l+(i.measured.width??0)*d[0],y:h.y-c+(i.measured.height??0)*d[1]},positionAbsolute:h}}async function tY({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let a=new Set(e.map(e=>e.id)),i=[];for(let e of n){if(!1===e.deletable)continue;let t=a.has(e.id),n=!t&&e.parentId&&i.find(t=>t.id===e.parentId);(t||n)&&i.push(e)}let s=new Set(t.map(e=>e.id)),l=r.filter(e=>!1!==e.deletable),c=tF(i,l);for(let e of l)s.has(e.id)&&!c.find(t=>t.id===e.id)&&c.push(e);if(!o)return{edges:c,nodes:i};let d=await o({nodes:i,edges:c});return"boolean"==typeof d?d?{edges:c,nodes:i}:{edges:[],nodes:[]}:d}let tW=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),tK=(e={x:0,y:0},t,n)=>({x:tW(e.x,t[0][0],t[1][0]-(n?.width??0)),y:tW(e.y,t[0][1],t[1][1]-(n?.height??0))});function tX(e,t,n){let{width:r,height:o}=na(n),{x:a,y:i}=n.internals.positionAbsolute;return tK(e,[[a,i],[a+r,i+o]],t)}let tU=(e,t,n)=>e<t?tW(Math.abs(e-t),1,t)/t:e>n?-tW(Math.abs(e-n),1,t)/t:0,tG=(e,t,n=15,r=40)=>[tU(e.x,r,t.width-r)*n,tU(e.y,r,t.height-r)*n],tQ=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),tJ=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),t0=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),t1=(e,t=[0,0])=>{let{x:n,y:r}=tO(e)?e.internals.positionAbsolute:tL(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},t2=(e,t=[0,0])=>{let{x:n,y:r}=tO(e)?e.internals.positionAbsolute:tL(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},t4=(e,t)=>t0(tQ(tJ(e),tJ(t))),t3=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),t5=e=>t6(e.width)&&t6(e.height)&&t6(e.x)&&t6(e.y),t6=e=>!isNaN(e)&&isFinite(e),t7=(e,t)=>{},t8=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),t9=({x:e,y:t},[n,r,o],a=!1,i=[1,1])=>{let s={x:(e-n)/o,y:(t-r)/o};return a?t8(s,i):s},ne=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function nt(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let nn=(e,t,n,r,o,a)=>{let i=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=nt(e,n),o=nt(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){let r=nt(e.top??e.y??0,n),o=nt(e.bottom??e.y??0,n),a=nt(e.left??e.x??0,t),i=nt(e.right??e.x??0,t);return{top:r,right:i,bottom:o,left:a,x:a+i,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(a,t,n),s=tW(Math.min((t-i.x)/e.width,(n-i.y)/e.height),r,o),l=e.x+e.width/2,c=e.y+e.height/2,d=t/2-l*s,u=n/2-c*s,h=function(e,t,n,r,o,a){let{x:i,y:s}=ne(e,[t,n,r]),{x:l,y:c}=ne({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(i),top:Math.floor(s),right:Math.floor(o-l),bottom:Math.floor(a-c)}}(e,d,u,s,t,n),f={left:Math.min(h.left-i.left,0),top:Math.min(h.top-i.top,0),right:Math.min(h.right-i.right,0),bottom:Math.min(h.bottom-i.bottom,0)};return{x:d-f.left+f.right,y:u-f.top+f.bottom,zoom:s}},nr=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function no(e){return null!=e&&"parent"!==e}function na(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function ni(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function ns(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function nl(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){let{x:a,y:i}=np(e),s=t9({x:a-(o?.left??0),y:i-(o?.top??0)},r),{x:l,y:c}=n?t8(s,t):s;return{xSnapped:l,ySnapped:c,...s}}let nc=e=>({width:e.offsetWidth,height:e.offsetHeight}),nd=e=>e?.getRootNode?.()||window?.document,nu=["INPUT","SELECT","TEXTAREA"];function nh(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(nu.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let nf=e=>"clientX"in e,np=(e,t)=>{let n=nf(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},nm=(e,t,n,r,o)=>{let a=t.querySelectorAll(`.${e}`);return a&&a.length?Array.from(a).map(t=>{let a=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...nc(t)}}):null};function ng({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){let l=.125*e+.375*o+.375*i+.125*n,c=.125*t+.375*a+.375*s+.125*r;return[l,c,Math.abs(l-e),Math.abs(c-t)]}function nx(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nv({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case c.Left:return[t-nx(t-r,a),n];case c.Right:return[t+nx(r-t,a),n];case c.Top:return[t,n-nx(n-o,a)];case c.Bottom:return[t,n+nx(o-n,a)]}}function ny({sourceX:e,sourceY:t,sourcePosition:n=c.Bottom,targetX:r,targetY:o,targetPosition:a=c.Top,curvature:i=.25}){let[s,l]=nv({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[d,u]=nv({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[h,f,p,m]=ng({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:d,targetControlY:u});return[`M${e},${t} C${s},${l} ${d},${u} ${r},${o}`,h,f,p,m]}function nb({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,a=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+a:r-a,o,a]}let nw=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,nN=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),nj=(e,t,n={})=>{let r;if(!e.source||!e.target)return t7("006",tM.error006()),t;let o=n.getEdgeId||nw;return nN(r=t$(e)?{...e}:{...e,id:o(e)},t)?t:(null===r.sourceHandle&&delete r.sourceHandle,null===r.targetHandle&&delete r.targetHandle,t.concat(r))};function n_({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,a,i,s]=nb({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}let nE={[c.Left]:{x:-1,y:0},[c.Right]:{x:1,y:0},[c.Top]:{x:0,y:-1},[c.Bottom]:{x:0,y:1}},nk=({source:e,sourcePosition:t=c.Bottom,target:n})=>t===c.Left||t===c.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},nS=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nC({sourceX:e,sourceY:t,sourcePosition:n=c.Bottom,targetX:r,targetY:o,targetPosition:a=c.Top,borderRadius:i=5,centerX:s,centerY:l,offset:d=20,stepPosition:u=.5}){let[h,f,p,m,g]=function({source:e,sourcePosition:t=c.Bottom,target:n,targetPosition:r=c.Top,center:o,offset:a,stepPosition:i}){let s,l;let d=nE[t],u=nE[r],h={x:e.x+d.x*a,y:e.y+d.y*a},f={x:n.x+u.x*a,y:n.y+u.y*a},p=nk({source:h,sourcePosition:t,target:f}),m=0!==p.x?"x":"y",g=p[m],x=[],v={x:0,y:0},y={x:0,y:0},[,,b,w]=nb({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(d[m]*u[m]==-1){"x"===m?(s=o.x??h.x+(f.x-h.x)*i,l=o.y??(h.y+f.y)/2):(s=o.x??(h.x+f.x)/2,l=o.y??h.y+(f.y-h.y)*i);let e=[{x:s,y:h.y},{x:s,y:f.y}],t=[{x:h.x,y:l},{x:f.x,y:l}];x=d[m]===g?"x"===m?e:t:"x"===m?t:e}else{let o=[{x:h.x,y:f.y}],i=[{x:f.x,y:h.y}];if(x="x"===m?d.x===g?i:o:d.y===g?o:i,t===r){let t=Math.abs(e[m]-n[m]);if(t<=a){let r=Math.min(a-1,a-t);d[m]===g?v[m]=(h[m]>e[m]?-1:1)*r:y[m]=(f[m]>n[m]?-1:1)*r}}if(t!==r){let e="x"===m?"y":"x",t=d[m]===u[e],n=h[e]>f[e],r=h[e]<f[e];(1===d[m]&&(!t&&n||t&&r)||1!==d[m]&&(!t&&r||t&&n))&&(x="x"===m?o:i)}let c={x:h.x+v.x,y:h.y+v.y},p={x:f.x+y.x,y:f.y+y.y};Math.max(Math.abs(c.x-x[0].x),Math.abs(p.x-x[0].x))>=Math.max(Math.abs(c.y-x[0].y),Math.abs(p.y-x[0].y))?(s=(c.x+p.x)/2,l=x[0].y):(s=x[0].x,l=(c.y+p.y)/2)}return[[e,{x:h.x+v.x,y:h.y+v.y},...x,{x:f.x+y.x,y:f.y+y.y},n],s,l,b,w]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:l},offset:d,stepPosition:u});return[h.reduce((e,t,n)=>e+(n>0&&n<h.length-1?function(e,t,n,r){let o=Math.min(nS(e,t)/2,nS(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+o*t},${i}Q ${a},${i} ${a},${i+o*r}`}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${a},${i+o*l}Q ${a},${i} ${a+o*s},${i}`}(h[n-1],t,h[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`),""),f,p,m,g]}function nM(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function nP(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function nA(e,t,n=c.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,a=(t?.y??0)+e.internals.positionAbsolute.y,{width:i,height:s}=t??na(e);if(r)return{x:o+i/2,y:a+s/2};switch(t?.position??n){case c.Top:return{x:o+i/2,y:a};case c.Right:return{x:o+i,y:a+s/2};case c.Bottom:return{x:o+i/2,y:a+s};case c.Left:return{x:o,y:a+s/2}}}function nI(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function nR(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}let nD={nodeOrigin:[0,0],nodeExtent:tP,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},nz={...nD,checkEquality:!0};function n$(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function nT(e){return"manual"===e}function nO(e,t,n,r={}){let o=n$(nz,r),a={i:0},i=new Map(t),s=o?.elevateNodesOnSelect&&!nT(o.zIndexMode)?1e3:0,l=e.length>0;for(let c of(t.clear(),n.clear(),e)){let e=i.get(c.id);if(o.checkEquality&&c===e?.internals.userNode)t.set(c.id,e);else{let n=tK(tL(c,o.nodeOrigin),no(c.extent)?c.extent:o.nodeExtent,na(c));e={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:n,handleBounds:function(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;let n=[],r=[];for(let t of e.handles){let o={id:t.id,width:t.width??1,height:t.height??1,nodeId:e.id,x:t.x,y:t.y,position:t.position,type:t.type};"source"===t.type?n.push(o):"target"===t.type&&r.push(o)}return{source:n,target:r}}(c,e),z:nV(c,s,o.zIndexMode),userNode:c}},t.set(c.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(l=!1),c.parentId&&nL(e,t,n,r,a)}return l}function nL(e,t,n,r,o){let{elevateNodesOnSelect:a,nodeOrigin:i,nodeExtent:s,zIndexMode:l}=n$(nD,r),c=e.parentId,d=t.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}(function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))})(e,n),o&&!d.parentId&&void 0===d.internals.rootParentIndex&&"auto"===l&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+10*o.i),o&&void 0!==d.internals.rootParentIndex&&(o.i=d.internals.rootParentIndex);let{x:u,y:h,z:f}=function(e,t,n,r,o,a){let{x:i,y:s}=t.internals.positionAbsolute,l=na(e),c=tL(e,n),d=no(e.extent)?tK(c,e.extent,l):c,u=tK({x:i+d.x,y:s+d.y},r,l);"parent"===e.extent&&(u=tX(u,l,t));let h=nV(e,o,a),f=t.internals.z??0;return{x:u.x,y:u.y,z:f>=h?f+1:h}}(e,d,i,s,a&&!nT(l)?1e3:0,l),{positionAbsolute:p}=e.internals,m=u!==p.x||h!==p.y;(m||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:m?{x:u,y:h}:p,z:f}})}function nV(e,t,n){let r=t6(e.zIndex)?e.zIndex:0;return nT(n)?r:r+(e.selected?t:0)}function nB(e,t,n,r=[0,0]){let o=[],a=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=t4(a.get(n.parentId)?.expandedRect??t1(e),n.rect);a.set(n.parentId,{expandedRect:r,parent:e})}return a.size>0&&a.forEach(({expandedRect:t,parent:a},i)=>{let s=a.internals.positionAbsolute,l=na(a),c=a.origin??r,d=t.x<s.x?Math.round(Math.abs(s.x-t.x)):0,u=t.y<s.y?Math.round(Math.abs(s.y-t.y)):0,h=Math.max(l.width,Math.round(t.width)),f=Math.max(l.height,Math.round(t.height)),p=(h-l.width)*c[0],m=(f-l.height)*c[1];(d>0||u>0||p||m)&&(o.push({id:i,type:"position",position:{x:a.position.x-d+p,y:a.position.y-u+m}}),n.get(i)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+u}})})),(l.width<t.width||l.height<t.height||d||u)&&o.push({id:i,type:"dimensions",setAttributes:!0,dimensions:{width:h+(d?c[0]*d-p:0),height:f+(u?c[1]*u-m:0)}})}),o}async function nH({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,a]],r);return Promise.resolve(!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]))}function nF(e,t,n,r,o,a){let i=o,s=r.get(i)||new Map;r.set(i,s.set(n,t)),i=`${o}-${e}`;let l=r.get(i)||new Map;if(r.set(i,l.set(n,t)),a){i=`${o}-${e}-${a}`;let s=r.get(i)||new Map;r.set(i,s.set(n,t))}}function nZ(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:a=null,targetHandle:i=null}=r,s={edgeId:r.id,source:n,target:o,sourceHandle:a,targetHandle:i},l=`${n}-${a}--${o}-${i}`;nF("source",s,`${o}-${i}--${n}-${a}`,e,n,a),nF("target",s,l,e,o,i),t.set(r.id,r)}}function nq(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r);return!1}function nY({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let o=[];for(let[e,a]of t){let t=n.get(e)?.internals.userNode;t&&o.push({...t,position:a.position,dragging:r})}if(!e)return[o[0],o];let a=n.get(e)?.internals.userNode;return[a?{...a,position:t.get(e)?.position||a.position,dragging:r}:o[0],o]}function nW(e,t,n,r,o,a=!1){let i=r.get(e);if(!i)return null;let s="strict"===o?i.internals.handleBounds?.[t]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],l=(n?s?.find(e=>e.id===n):s?.[0])??null;return l&&a?{...l,...nA(i,l,l.position,!0)}:l}function nK(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}let nX=()=>!0;function nU(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:a,fromType:i,doc:s,lib:l,flowId:c,isValidConnection:d=nX,nodeLookup:u}){let h="target"===i,f=t?s.querySelector(`.${l}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:p,y:m}=np(e),g=s.elementFromPoint(p,m),x=g?.classList.contains(`${l}-flow__handle`)?g:f,v={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){let e=nK(void 0,x),t=x.getAttribute("data-nodeid"),i=x.getAttribute("data-handleid"),s=x.classList.contains("connectable"),l=x.classList.contains("connectableend");if(!t||!e)return v;let c={source:h?t:r,sourceHandle:h?i:a,target:h?r:t,targetHandle:h?a:i};v.connection=c;let f=s&&l&&(n===o.Strict?h&&"source"===e||!h&&"target"===e:t!==r||i!==a);v.isValid=f&&d(c),v.toHandle=nW(t,e,i,u,n,!0)}return v}let nG={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:a,isTarget:i,domNode:s,nodeLookup:l,lib:d,autoPanOnConnect:u,flowId:h,panBy:f,cancelConnection:p,onConnectStart:m,onConnect:g,onConnectEnd:x,isValidConnection:v=nX,onReconnectEnd:y,updateConnection:b,getTransform:w,getFromHandle:N,autoPanSpeed:j,dragThreshold:_=1,handleDomNode:E}){let k;let S=nd(e.target),C=0,{x:M,y:P}=np(e),A=nK(a,E),I=s?.getBoundingClientRect(),R=!1;if(!I||!A)return;let D=nW(o,A,r,l,t);if(!D)return;let z=np(e,I),$=!1,T=null,O=!1,L=null,V={...D,nodeId:o,type:A,position:D.position},B=l.get(o),H={inProgress:!0,isValid:null,from:nA(B,V,c.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:B,to:z,toHandle:null,toPosition:tD[V.position],toNode:null,pointer:z};function F(){R=!0,b(H),m?.(e,{nodeId:o,handleId:r,handleType:A})}function Z(e){var a,s;let p;if(!R){let{x:t,y:n}=np(e),r=t-M,o=n-P;if(!(r*r+o*o>_*_))return;F()}if(!N()||!V){q(e);return}let m=w();k=function(e,t,n,r){let o=[],a=1/0;for(let i of function(e,t,n){let r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())t3(o,t1(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:s,y:l}=nA(i,n,n.position,!0),c=Math.sqrt(Math.pow(s-e.x,2)+Math.pow(l-e.y,2));c>t||(c<a?(o=[{...n,x:s,y:l}],a=c):c===a&&o.push({...n,x:s,y:l}))}if(!o.length)return null;if(o.length>1){let e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(t9(z=np(e,I),m,!1,[1,1]),n,l,V),$||(function e(){if(!u||!I)return;let[t,n]=tG(z,I,j);f({x:t,y:n}),C=requestAnimationFrame(e)}(),$=!0);let g=nU(e,{handle:k,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:i?"target":"source",isValidConnection:v,doc:S,lib:d,flowId:h,nodeLookup:l});L=g.handleDomNode,T=g.connection,a=!!k,s=g.isValid,p=null,s?p=!0:a&&!s&&(p=!1),O=p;let x=l.get(o),y=x?nA(x,V,c.Left,!0):H.from,E={...H,from:y,isValid:O,to:g.toHandle&&O?ne({x:g.toHandle.x,y:g.toHandle.y},m):z,toHandle:g.toHandle,toPosition:O&&g.toHandle?g.toHandle.position:tD[V.position],toNode:g.toHandle?l.get(g.toHandle.nodeId):null,pointer:z};b(E),H=E}function q(e){if(!("touches"in e)||!(e.touches.length>0)){if(R){(k||L)&&T&&O&&g?.(T);let{inProgress:t,...n}=H,r={...n,toPosition:H.toHandle?H.toPosition:null};x?.(e,r),a&&y?.(e,r)}p(),cancelAnimationFrame(C),$=!1,O=!1,T=null,L=null,S.removeEventListener("mousemove",Z),S.removeEventListener("mouseup",q),S.removeEventListener("touchmove",Z),S.removeEventListener("touchend",q)}}0===_&&F(),S.addEventListener("mousemove",Z),S.addEventListener("mouseup",q),S.addEventListener("touchmove",Z),S.addEventListener("touchend",q)},isValid:nU},nQ=e=>({x:e.x,y:e.y,zoom:e.k}),nJ=({x:e,y:t,zoom:n})=>tx.translate(e,t).scale(n),n0=(e,t)=>e.target.closest(`.${t}`),n1=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),n2=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,n4=(e,t=0,n=n2,r=()=>{})=>{let o="number"==typeof t&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},n3=e=>{let t=e.ctrlKey&&nr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};!function(e){e.Line="line",e.Handle="handle"}(d||(d={}));var n5=n(15786),n6=n(68178);let{useDebugValue:n7}=f,{useSyncExternalStoreWithSelector:n8}=n5,n9=e=>e;function re(e,t=n9,n){let r=n8(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return n7(r),r}let rt=(e,t)=>{let n=(0,n6.M)(e),r=(e,r=t)=>re(n,e,r);return Object.assign(r,n),r},rn=(e,t)=>e?rt(e,t):rt;function rr(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n(42182);let ro=(0,f.createContext)(null),ra=ro.Provider,ri=tM.error001();function rs(e,t){let n=(0,f.useContext)(ro);if(null===n)throw Error(ri);return re(n,e,t)}function rl(){let e=(0,f.useContext)(ro);if(null===e)throw Error(ri);return(0,f.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}let rc={display:"none"},rd={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ru="react-flow__node-desc",rh="react-flow__edge-desc",rf=e=>e.ariaLiveMessage,rp=e=>e.ariaLabelConfig;function rm({rfId:e}){let t=rs(rf);return(0,h.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rd,children:t})}function rg({rfId:e,disableKeyboardA11y:t}){let n=rs(rp);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{id:`${ru}-${e}`,style:rc,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),(0,h.jsx)("div",{id:`${rh}-${e}`,style:rc,children:n["edge.a11yDescription.default"]}),!t&&(0,h.jsx)(rm,{rfId:e})]})}let rx=(0,f.forwardRef)(({position:e="top-left",children:t,className:n,style:r,...o},a)=>{let i=`${e}`.split("-");return(0,h.jsx)("div",{className:S(["react-flow__panel",n,...i]),style:r,ref:a,...o,children:t})});function rv({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:(0,h.jsx)(rx,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,h.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}rx.displayName="Panel";let ry=e=>{let t=[],n=[];for(let[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(let[,t]of e.edgeLookup)t.selected&&n.push(t);return{selectedNodes:t,selectedEdges:n}},rb=e=>e.id;function rw(e,t){return rr(e.selectedNodes.map(rb),t.selectedNodes.map(rb))&&rr(e.selectedEdges.map(rb),t.selectedEdges.map(rb))}function rN({onSelectionChange:e}){let t=rl(),{selectedNodes:n,selectedEdges:r}=rs(ry,rw);return(0,f.useEffect)(()=>{let o={nodes:n,edges:r};e?.(o),t.getState().onSelectionChangeHandlers.forEach(e=>e(o))},[n,r,e]),null}let rj=e=>!!e.onSelectionChangeHandlers;function r_({onSelectionChange:e}){let t=rs(rj);return e||t?(0,h.jsx)(rN,{onSelectionChange:e}):null}let rE=[0,0],rk={x:0,y:0,zoom:1},rS=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode","rfId"],rC=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),rM={translateExtent:tP,nodeOrigin:rE,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function rP(e){let{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:i,reset:s,setDefaultNodesAndEdges:l}=rs(rC,rr),c=rl();(0,f.useEffect)(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=rM,s()}),[]);let d=(0,f.useRef)(rM);return(0,f.useEffect)(()=>{for(let s of rS){let l=e[s];l!==d.current[s]&&void 0!==e[s]&&("nodes"===s?t(l):"edges"===s?n(l):"minZoom"===s?r(l):"maxZoom"===s?o(l):"translateExtent"===s?a(l):"nodeExtent"===s?i(l):"ariaLabelConfig"===s?c.setState({ariaLabelConfig:{...tI,...l||{}}}):"fitView"===s?c.setState({fitViewQueued:l}):"fitViewOptions"===s?c.setState({fitViewOptions:l}):c.setState({[s]:l}))}d.current=e},rS.map(t=>e[t])),null}let rA="undefined"!=typeof document?document:null;function rI(e=null,t={target:rA,actInsideInputWithModifier:!0}){let[n,r]=(0,f.useState)(!1),o=(0,f.useRef)(!1),a=(0,f.useRef)(new Set([])),[i,s]=(0,f.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,f.useEffect)(()=>{let n=t?.target??rA,l=t?.actInsideInputWithModifier??!0;if(null!==e){let e=e=>{if(o.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey,(!o.current||o.current&&!l)&&nh(e))return!1;let n=rD(e.code,s);if(a.current.add(e[n]),rR(i,a.current,!1)){let n=e.composedPath?.()?.[0]||e.target,a=n?.nodeName==="BUTTON"||n?.nodeName==="A";!1!==t.preventDefault&&(o.current||!a)&&e.preventDefault(),r(!0)}},c=e=>{let t=rD(e.code,s);rR(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),o.current=!1},d=()=>{a.current.clear(),r(!1)};return n?.addEventListener("keydown",e),n?.addEventListener("keyup",c),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{n?.removeEventListener("keydown",e),n?.removeEventListener("keyup",c),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function rR(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function rD(e,t){return t.includes(e)?"code":"key"}let rz=()=>{let e=rl();return(0,f.useMemo)(()=>({zoomIn:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{let{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{let{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{let{transform:[r,o,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??a},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{let{width:r,height:o,minZoom:a,maxZoom:i,panZoom:s}=e.getState(),l=nn(t,r,o,a,i,n?.padding??.1);return s?(await s.setViewport(l,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{let{transform:r,snapGrid:o,snapToGrid:a,domNode:i}=e.getState();if(!i)return t;let{x:s,y:l}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-l},d=n.snapGrid??o;return t9(c,r,n.snapToGrid??a,d)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:o,y:a}=r.getBoundingClientRect(),i=ne(t,n);return{x:i.x+o,y:i.y+a}}}),[])};function r$(e,t){let n=[],r=new Map,o=[];for(let t of e){if("add"===t.type){o.push(t);continue}if("remove"===t.type||"replace"===t.type)r.set(t.id,[t]);else{let e=r.get(t.id);e?e.push(t):r.set(t.id,[t])}}for(let e of t){let t=r.get(e.id);if(!t){n.push(e);continue}if("remove"===t[0].type)continue;if("replace"===t[0].type){n.push({...t[0].item});continue}let o={...e};for(let e of t)(function(e,t){switch(e.type){case"select":t.selected=e.selected;break;case"position":void 0!==e.position&&(t.position=e.position),void 0!==e.dragging&&(t.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(t.measured={...e.dimensions},e.setAttributes&&((!0===e.setAttributes||"width"===e.setAttributes)&&(t.width=e.dimensions.width),(!0===e.setAttributes||"height"===e.setAttributes)&&(t.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(t.resizing=e.resizing)}})(e,o);n.push(o)}return o.length&&o.forEach(e=>{void 0!==e.index?n.splice(e.index,0,{...e.item}):n.push({...e.item})}),n}function rT(e,t){return{id:e,type:"select",selected:t}}function rO(e,t=new Set,n=!1){let r=[];for(let[o,a]of e){let e=t.has(o);(void 0!==a.selected||e)&&a.selected!==e&&(n&&(a.selected=e),r.push(rT(a.id,e)))}return r}function rL({items:e=[],lookup:t}){let n=[],r=new Map(e.map(e=>[e.id,e]));for(let[r,o]of e.entries()){let e=t.get(o.id),a=e?.internals?.userNode??e;void 0!==a&&a!==o&&n.push({id:o.id,item:o,type:"replace"}),void 0===a&&n.push({item:o,type:"add",index:r})}for(let[e]of t)void 0===r.get(e)&&n.push({id:e,type:"remove"});return n}function rV(e){return{id:e.id,type:"remove"}}let rB=e=>tT(e),rH=e=>t$(e);function rF(e){return(0,f.forwardRef)(e)}let rZ=f.useEffect;function rq(e){let[t,n]=(0,f.useState)(BigInt(0)),[r]=(0,f.useState)(()=>{var e;let t;return e=()=>n(e=>e+BigInt(1)),t=[],{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}});return rZ(()=>{let t=r.get();t.length&&(e(t),r.reset())},[t]),r}let rY=(0,f.createContext)(null);function rW({children:e}){let t=rl(),n=rq((0,f.useCallback)(e=>{let{nodes:n=[],setNodes:r,hasDefaultNodes:o,onNodesChange:a,nodeLookup:i,fitViewQueued:s,onNodesChangeMiddlewareMap:l}=t.getState(),c=n;for(let t of e)c="function"==typeof t?t(c):t;let d=rL({items:c,lookup:i});for(let e of l.values())d=e(d);o&&r(c),d.length>0?a?.(d):s&&window.requestAnimationFrame(()=>{let{fitViewQueued:e,nodes:n,setNodes:r}=t.getState();e&&r(n)})},[])),r=rq((0,f.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:o,onEdgesChange:a,edgeLookup:i}=t.getState(),s=n;for(let t of e)s="function"==typeof t?t(s):t;o?r(s):a&&a(rL({items:s,lookup:i}))},[])),o=(0,f.useMemo)(()=>({nodeQueue:n,edgeQueue:r}),[]);return(0,h.jsx)(rY.Provider,{value:o,children:e})}let rK=e=>!!e.panZoom;function rX(){let e=rz(),t=rl(),n=function(){let e=(0,f.useContext)(rY);if(!e)throw Error("useBatchContext must be used within a BatchProvider");return e}(),r=rs(rK),o=(0,f.useMemo)(()=>{let e=e=>t.getState().nodeLookup.get(e),r=e=>{n.nodeQueue.push(e)},o=e=>{n.edgeQueue.push(e)},a=e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState(),o=rB(e)?e:n.get(e.id),a=o.parentId?function(e,t={width:0,height:0},n,r,o){let a={...e},i=r.get(n);if(i){let e=i.origin||o;a.x+=i.internals.positionAbsolute.x-(t.width??0)*e[0],a.y+=i.internals.positionAbsolute.y-(t.height??0)*e[1]}return a}(o.position,o.measured,o.parentId,n,r):o.position;return t1({...o,position:a,width:o.measured?.width??o.width,height:o.measured?.height??o.height})},i=(e,t,n={replace:!1})=>{r(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&rB(e)?e:{...r,...e}}return r}))},s=(e,t,n={replace:!1})=>{o(r=>r.map(r=>{if(r.id===e){let e="function"==typeof t?t(r):t;return n.replace&&rH(e)?e:{...r,...e}}return r}))};return{getNodes:()=>t.getState().nodes.map(e=>({...e})),getNode:t=>e(t)?.internals.userNode,getInternalNode:e,getEdges:()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},getEdge:e=>t.getState().edgeLookup.get(e),setNodes:r,setEdges:o,addNodes:e=>{let t=Array.isArray(e)?e:[e];n.nodeQueue.push(e=>[...e,...t])},addEdges:e=>{let t=Array.isArray(e)?e:[e];n.edgeQueue.push(e=>[...e,...t])},toObject:()=>{let{nodes:e=[],edges:n=[],transform:r}=t.getState(),[o,a,i]=r;return{nodes:e.map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:o,y:a,zoom:i}}},deleteElements:async({nodes:e=[],edges:n=[]})=>{let{nodes:r,edges:o,onNodesDelete:a,onEdgesDelete:i,triggerNodeChanges:s,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:d}=t.getState(),{nodes:u,edges:h}=await tY({nodesToRemove:e,edgesToRemove:n,nodes:r,edges:o,onBeforeDelete:d}),f=h.length>0,p=u.length>0;if(f){let e=h.map(rV);i?.(h),l(e)}if(p){let e=u.map(rV);a?.(u),s(e)}return(p||f)&&c?.({nodes:u,edges:h}),{deletedNodes:u,deletedEdges:h}},getIntersectingNodes:(e,n=!0,r)=>{let o=t5(e),i=o?e:a(e),s=void 0!==r;return i?(r||t.getState().nodes).filter(r=>{let a=t.getState().nodeLookup.get(r.id);if(a&&!o&&(r.id===e.id||!a.internals.positionAbsolute))return!1;let l=t1(s?r:a),c=t3(l,i);return n&&c>0||c>=l.width*l.height||c>=i.width*i.height}):[]},isNodeIntersecting:(e,t,n=!0)=>{let r=t5(e)?e:a(e);if(!r)return!1;let o=t3(r,t);return n&&o>0||o>=t.width*t.height||o>=r.width*r.height},updateNode:i,updateNodeData:(e,t,n={replace:!1})=>{i(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},updateEdge:s,updateEdgeData:(e,t,n={replace:!1})=>{s(e,e=>{let r="function"==typeof t?t(e):t;return n.replace?{...e,data:r}:{...e,data:{...e.data,...r}}},n)},getNodesBounds:e=>{let{nodeLookup:n,nodeOrigin:r}=t.getState();return tV(e,{nodeLookup:n,nodeOrigin:r})},getHandleConnections:({type:e,id:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}-${e}${n?`-${n}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:n,nodeId:r})=>Array.from(t.getState().connectionLookup.get(`${r}${e?n?`-${e}-${n}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{let r,o;let a=t.getState().fitViewResolver??{promise:new Promise((e,t)=>{r=e,o=t}),resolve:r,reject:o};return t.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:a}),n.nodeQueue.push(e=>[...e]),a.promise}}},[]);return(0,f.useMemo)(()=>({...o,...e,viewportInitialized:r}),[r])}let rU=e=>e.selected,rG=void 0,rQ={position:"absolute",width:"100%",height:"100%",top:0,left:0},rJ=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function r0({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=a.Free,zoomOnDoubleClick:s=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:d,minZoom:u,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:g=!0,children:x,noWheelClassName:v,noPanClassName:y,onViewportChange:b,isControlledViewport:w,paneClickDistance:N,selectionOnDrag:j}){let _=rl(),E=(0,f.useRef)(null),{userSelectionActive:k,lib:S,connectionInProgress:C}=rs(rJ,rr),M=rI(m),P=(0,f.useRef)();!function(e){let t=rl();(0,f.useEffect)(()=>{let n=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;let n=nc(e.current);(0===n.height||0===n.width)&&t.getState().onError?.("004",tM.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){n(),window.addEventListener("resize",n);let t=new ResizeObserver(()=>n());return t.observe(e.current),()=>{window.removeEventListener("resize",n),t&&e.current&&t.unobserve(e.current)}}},[])}(E);let A=(0,f.useCallback)(e=>{b?.({x:e[0],y:e[1],zoom:e[2]}),w||_.setState({transform:e})},[b,w]);return(0,f.useEffect)(()=>{if(E.current){P.current=function({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:l,onDraggingChange:c}){let d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},u=e.getBoundingClientRect(),h=tS().scaleExtent([t,n]).translateExtent(r),f=ey(e).call(h);v({x:o.x,y:o.y,zoom:tW(o.zoom,t,n)},[[0,0],[u.width,u.height]],r);let p=f.on("wheel.zoom"),m=f.on("dblclick.zoom");function g(e,t){return f?new Promise(n=>{h?.interpolate(t?.interpolate==="linear"?tC.Z:eD).transform(n4(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)}function x(){h.on("zoom",null)}async function v(e,t,n){let r=nJ(e),o=h?.constrain()(r,t,n);return o&&await g(o),new Promise(e=>e(o))}return h.wheelDelta(n3),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:u,panOnScrollMode:g,panOnScrollSpeed:v,preventScrolling:y,zoomOnPinch:b,zoomOnScroll:w,zoomOnDoubleClick:N,zoomActivationKeyPressed:j,lib:_,onTransformChange:E,connectionInProgress:k,paneClickDistance:S,selectionOnDrag:C}){r&&!d.isZoomingOrPanning&&x();let M=o&&!j&&!r;h.clickDistance(C?1/0:!t6(S)||S<0?0:S);let P=M?function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(n0(u,t))return u.ctrlKey&&u.preventDefault(),!1;u.preventDefault(),u.stopImmediatePropagation();let h=n.property("__zoom").k||1;if(u.ctrlKey&&s){let e=eb(u),t=n3(u);r.scaleTo(n,h*Math.pow(2,t),e,u);return}let f=1===u.deltaMode?20:1,p=o===a.Vertical?0:u.deltaX*f,m=o===a.Horizontal?0:u.deltaY*f;!nr()&&u.shiftKey&&o!==a.Vertical&&(p=u.deltaY*f,m=0),r.translateBy(n,-(p/h)*i,-(m/h)*i,{internal:!0});let g=nQ(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c?.(u,g),e.panScrollTimeout=setTimeout(()=>{d?.(u,g),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,l?.(u,g))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:f,d3Zoom:h,panOnScrollMode:g,panOnScrollSpeed:v,zoomOnPinch:b,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:l}):function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){let a="wheel"===r.type,i=!t&&a&&!r.ctrlKey,s=n0(r,e);if(r.ctrlKey&&a&&s&&r.preventDefault(),i||s)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:y,d3ZoomHandler:p});if(f.on("wheel.zoom",P,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let o=nQ(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:d,onDraggingChange:c,onPanZoomStart:s});h.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(n&&n1(t,e.mouseButton??0)),a.sourceEvent?.sync||r([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,nQ(a.transform))}}({zoomPanValues:d,panOnDrag:u,onPaneContextMenu:!!n,onPanZoom:i,onTransformChange:E});h.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:a}){return i=>{if(!i.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&n1(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){let t=nQ(i.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(i.sourceEvent,t)},n?150:0)}}}({zoomPanValues:d,panOnDrag:u,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:l,onDraggingChange:c});h.on("end",r)}let A=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:s,noPanClassName:l,lib:c,connectionInProgress:d}){return u=>{let h=e||t,f=n&&u.ctrlKey,p="wheel"===u.type;if(1===u.button&&"mousedown"===u.type&&(n0(u,`${c}-flow__node`)||n0(u,`${c}-flow__edge`)))return!0;if(!r&&!h&&!o&&!a&&!n||i||d&&!p||n0(u,s)&&p||n0(u,l)&&(!p||o&&p&&!e)||!n&&u.ctrlKey&&p)return!1;if(!n&&"touchstart"===u.type&&u.touches?.length>1)return u.preventDefault(),!1;if(!h&&!o&&!f&&p||!r&&("mousedown"===u.type||"touchstart"===u.type)||Array.isArray(r)&&!r.includes(u.button)&&"mousedown"===u.type)return!1;let m=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||p)&&m}}({zoomActivationKeyPressed:j,panOnDrag:u,zoomOnScroll:w,panOnScroll:o,zoomOnDoubleClick:N,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:_,connectionInProgress:k});h.filter(A),N?f.on("dblclick.zoom",m):f.on("dblclick.zoom",null)},destroy:x,setViewport:async function(e,t){let n=nJ(e);return await g(n,t),new Promise(e=>e(n))},setViewportConstrained:v,getViewport:function(){let e=f?tv(f.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return f?new Promise(n=>{h?.interpolate(t?.interpolate==="linear"?tC.Z:eD).scaleTo(n4(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return f?new Promise(n=>{h?.interpolate(t?.interpolate==="linear"?tC.Z:eD).scaleBy(n4(f,t?.duration,t?.ease,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){h?.scaleExtent(e)},setTranslateExtent:function(e){h?.translateExtent(e)},syncViewport:function(e){if(f){let t=nJ(e),n=f.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&h?.transform(f,t,null,{sync:!0})}},setClickDistance:function(e){let t=!t6(e)||e<0?0:e;h?.clickDistance(t)}}}({domNode:E.current,minZoom:u,maxZoom:p,translateExtent:d,viewport:c,onDraggingChange:e=>_.setState({paneDragging:e}),onPanZoomStart:(e,t)=>{let{onViewportChangeStart:n,onMoveStart:r}=_.getState();r?.(e,t),n?.(t)},onPanZoom:(e,t)=>{let{onViewportChange:n,onMove:r}=_.getState();r?.(e,t),n?.(t)},onPanZoomEnd:(e,t)=>{let{onViewportChangeEnd:n,onMoveEnd:r}=_.getState();r?.(e,t),n?.(t)}});let{x:e,y:t,zoom:n}=P.current.getViewport();return _.setState({panZoom:P.current,transform:[e,t,n],domNode:E.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),(0,f.useEffect)(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:l,zoomActivationKeyPressed:M,preventScrolling:g,noPanClassName:y,userSelectionActive:k,noWheelClassName:v,lib:S,onTransformChange:A,connectionInProgress:C,selectionOnDrag:j,paneClickDistance:N})},[e,t,n,r,o,i,s,l,M,g,y,k,v,S,A,C,j,N]),(0,h.jsx)("div",{className:"react-flow__renderer",ref:E,style:rQ,children:x})}let r1=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function r2(){let{userSelectionActive:e,userSelectionRect:t}=rs(r1,rr);return e&&t?(0,h.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}let r4=(e,t)=>n=>{n.target===t.current&&e?.(n)},r3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function r5({isSelecting:e,selectionKeyPressed:t,selectionMode:n=i.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:l,onPaneClick:c,onPaneContextMenu:d,onPaneScroll:u,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:g,children:x}){let v=rl(),{userSelectionActive:y,elementsSelectable:b,dragging:w,connectionInProgress:N}=rs(r3,rr),j=b&&(e||y),_=(0,f.useRef)(null),E=(0,f.useRef)(),k=(0,f.useRef)(new Set),C=(0,f.useRef)(new Set),M=(0,f.useRef)(!1),P=e=>{if(M.current||N){M.current=!1;return}c?.(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},A=!0===r||Array.isArray(r)&&r.includes(0);return(0,h.jsxs)("div",{className:S(["react-flow__pane",{draggable:A,dragging:w,selection:e}]),onClick:j?void 0:r4(P,_),onContextMenu:r4(e=>{if(Array.isArray(r)&&r?.includes(2)){e.preventDefault();return}d?.(e)},_),onWheel:r4(u?e=>u(e):void 0,_),onPointerEnter:j?void 0:p,onPointerMove:j?e=>{let{userSelectionRect:r,transform:a,nodeLookup:l,edgeLookup:c,connectionLookup:d,triggerNodeChanges:u,triggerEdgeChanges:h,defaultEdgeOptions:f,resetSelectedElements:p}=v.getState();if(!E.current||!r)return;let{x:m,y:g}=np(e.nativeEvent,E.current),{startX:x,startY:y}=r;if(!M.current){if(Math.hypot(m-x,g-y)<=(t?0:o))return;p(),s?.(e)}M.current=!0;let b={startX:x,startY:y,x:m<x?m:x,y:g<y?g:y,width:Math.abs(m-x),height:Math.abs(g-y)},w=k.current,N=C.current;k.current=new Set(tH(l,b,a,n===i.Partial,!0).map(e=>e.id)),C.current=new Set;let j=f?.selectable??!0;for(let e of k.current){let t=d.get(e);if(t)for(let{edgeId:e}of t.values()){let t=c.get(e);t&&(t.selectable??j)&&C.current.add(e)}}ns(w,k.current)||u(rO(l,k.current,!0)),ns(N,C.current)||h(rO(c,C.current)),v.setState({userSelectionRect:b,userSelectionActive:!0,nodesSelectionActive:!1})}:m,onPointerUp:j?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!y&&e.target===_.current&&v.getState().userSelectionRect&&P?.(e),v.setState({userSelectionActive:!1,userSelectionRect:null}),M.current&&(l?.(e),v.setState({nodesSelectionActive:k.current.size>0})))}:void 0,onPointerDownCapture:j?n=>{let{domNode:r}=v.getState();if(E.current=r?.getBoundingClientRect(),!E.current)return;let o=n.target===_.current;if(!o&&n.target.closest(".nokey")||!e||!(a&&o||t)||0!==n.button||!n.isPrimary)return;n.target?.setPointerCapture?.(n.pointerId),M.current=!1;let{x:i,y:s}=np(n.nativeEvent,E.current);v.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),o||(n.stopPropagation(),n.preventDefault())}:void 0,onClickCapture:j?e=>{M.current&&(e.stopPropagation(),M.current=!1)}:void 0,onPointerLeave:g,ref:_,style:rQ,children:[x,(0,h.jsx)(r2,{})]})}function r6({id:e,store:t,unselect:n=!1,nodeRef:r}){let{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:s,onError:l}=t.getState(),c=s.get(e);if(!c){l?.("012",tM.error012(e));return}t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&i)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])}function r7({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,nodeClickDistance:i}){let s=rl(),[l,c]=(0,f.useState)(!1),d=(0,f.useRef)();return(0,f.useEffect)(()=>{d.current=function({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let a={x:null,y:null},i=0,s=new Map,l=!1,c={x:0,y:0},d=null,u=!1,h=null,f=!1,p=!1,m=null;return{update:function({noDragClassName:g,handleSelector:x,domNode:v,isSelectable:y,nodeId:b,nodeClickDistance:w=0}){function N({x:e,y:n}){let{nodeLookup:o,nodeExtent:i,snapGrid:l,snapToGrid:c,nodeOrigin:d,onNodeDrag:u,onSelectionDrag:h,onError:f,updateNodePositions:g}=t();a={x:e,y:n};let x=!1,v=s.size>1,y=v&&i?tJ(tB(s)):null,w=v&&c?function({dragItems:e,snapGrid:t,x:n,y:r}){let o=e.values().next().value;if(!o)return null;let a={x:n-o.distance.x,y:r-o.distance.y},i=t8(a,t);return{x:i.x-a.x,y:i.y-a.y}}({dragItems:s,snapGrid:l,x:e,y:n}):null;for(let[t,r]of s){if(!o.has(t))continue;let a={x:e-r.distance.x,y:n-r.distance.y};c&&(a=w?{x:Math.round(a.x+w.x),y:Math.round(a.y+w.y)}:t8(a,l));let s=null;if(v&&i&&!r.extent&&y){let{positionAbsolute:e}=r.internals,t=e.x-y.x+i[0][0],n=e.x+r.measured.width-y.x2+i[1][0];s=[[t,e.y-y.y+i[0][1]],[n,e.y+r.measured.height-y.y2+i[1][1]]]}let{position:u,positionAbsolute:h}=tq({nodeId:t,nextPosition:a,nodeLookup:o,nodeExtent:s||i,nodeOrigin:d,onError:f});x=x||r.position.x!==u.x||r.position.y!==u.y,r.position=u,r.internals.positionAbsolute=h}if(p=p||x,x&&(g(s,!0),m&&(r||u||!b&&h))){let[e,t]=nY({nodeId:b,dragItems:s,nodeLookup:o});r?.(m,s,e,t),u?.(m,e,t),b||h?.(m,t)}}async function j(){if(!d)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o){l=!1,cancelAnimationFrame(i);return}let[s,u]=tG(c,d,r);(0!==s||0!==u)&&(a.x=(a.x??0)-s/e[2],a.y=(a.y??0)-u/e[2],await n({x:s,y:u})&&N(a)),i=requestAnimationFrame(j)}function _(r){let{nodeLookup:o,multiSelectionActive:i,nodesDraggable:l,transform:c,snapGrid:h,snapToGrid:f,selectNodesOnDrag:p,onNodeDragStart:m,onSelectionDragStart:g,unselectNodesAndEdges:x}=t();u=!0,p&&y||i||!b||o.get(b)?.selected||x(),y&&p&&b&&e?.(b);let v=nl(r.sourceEvent,{transform:c,snapGrid:h,snapToGrid:f,containerBounds:d});if(a=v,(s=function(e,t,n,r){let o=new Map;for(let[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(i,e))&&(i.draggable||t&&void 0===i.draggable)){let t=e.get(a);t&&o.set(a,{id:a,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,l,v,b)).size>0&&(n||m||!b&&g)){let[e,t]=nY({nodeId:b,dragItems:s,nodeLookup:o});n?.(r.sourceEvent,s,e,t),m?.(r.sourceEvent,e,t),b||g?.(r.sourceEvent,t)}}h=ey(v);let E=(function(){var e,t,n,r,o=eM,a=eP,i=eA,s=eI,l={},c=M("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",f).filter(s).on("touchstart.drag",g).on("touchmove.drag",x,ew).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(i,s){if(!r&&o.call(this,i,s)){var l=y(this,a.call(this,i,s),i,s,"mouse");l&&(ey(i.view).on("mousemove.drag",p,eN).on("mouseup.drag",m,eN),eE(i.view),ej(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function p(r){if(e_(r),!n){var o=r.clientX-e,a=r.clientY-t;n=o*o+a*a>u}l.mouse("drag",r)}function m(e){ey(e.view).on("mousemove.drag mouseup.drag",null),ek(e.view,n),e_(e),l.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,i=e.changedTouches,s=a.call(this,e,t),l=i.length;for(n=0;n<l;++n)(r=y(this,s,e,t,i[n].identifier,i[n]))&&(ej(e),r("start",e,i[n]))}}function x(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=l[r[t].identifier])&&(e_(e),n("drag",e,r[t]))}function v(e){var t,n,o=e.changedTouches,a=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[o[t].identifier])&&(ej(e),n("end",e,o[t]))}function y(e,t,n,r,o,a){var s,u,f,p=c.copy(),m=eb(a||n,t);if(null!=(f=i.call(e,new eC("beforestart",{sourceEvent:n,target:h,identifier:o,active:d,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=f.x-m[0]||0,u=f.y-m[1]||0,function n(a,i,c){var g,x=m;switch(a){case"start":l[o]=n,g=d++;break;case"end":delete l[o],--d;case"drag":m=eb(c||i,t),g=d}p.call(a,e,new eC(a,{sourceEvent:i,subject:f,target:h,identifier:o,active:g,x:m[0]+s,y:m[1]+u,dx:m[0]-x[0],dy:m[1]-x[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:eS(!!e),h):o},h.container=function(e){return arguments.length?(a="function"==typeof e?e:eS(e),h):a},h.subject=function(e){return arguments.length?(i="function"==typeof e?e:eS(e),h):i},h.touchable=function(e){return arguments.length?(s="function"==typeof e?e:eS(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h})().clickDistance(w).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:i,snapToGrid:s}=t();d=n?.getBoundingClientRect()||null,f=!1,p=!1,m=e.sourceEvent,0===r&&_(e),a=nl(e.sourceEvent,{transform:o,snapGrid:i,snapToGrid:s,containerBounds:d}),c=np(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:i,nodeDragThreshold:h,nodeLookup:p}=t(),g=nl(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:i,containerBounds:d});if(m=e.sourceEvent,("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||b&&!p.has(b))&&(f=!0),!f){if(!l&&n&&u&&(l=!0,j()),!u){let t=np(e.sourceEvent,d),n=t.x-c.x,r=t.y-c.y;Math.sqrt(n*n+r*r)>h&&_(e)}(a.x!==g.xSnapped||a.y!==g.ySnapped)&&s&&u&&(c=np(e.sourceEvent,d),N(g))}}).on("end",e=>{if(u&&!f&&(l=!1,u=!1,cancelAnimationFrame(i),s.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:a,onSelectionDragStop:i}=t();if(p&&(r(s,!1),p=!1),o||a||!b&&i){let[t,r]=nY({nodeId:b,dragItems:s,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,s,t,r),a?.(e.sourceEvent,t,r),b||i?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!g||!nq(t,`.${g}`,v))&&(!x||nq(t,x,v))});h.call(E)},destroy:function(){h?.on(".drag",null)}}}({getStoreItems:()=>s.getState(),onNodeMouseDown:t=>{r6({id:t,store:s,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),(0,f.useEffect)(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:i}),()=>{d.current?.destroy()}},[n,r,t,a,e,o]),l}let r8=e=>t=>t.selected&&(t.draggable||e&&void 0===t.draggable);function r9(){let e=rl();return(0,f.useCallback)(t=>{let{nodeExtent:n,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:i,updateNodePositions:s,nodeLookup:l,nodeOrigin:c}=e.getState(),d=new Map,u=r8(a),h=r?o[0]:5,f=r?o[1]:5,p=t.direction.x*h*t.factor,m=t.direction.y*f*t.factor;for(let[,e]of l){if(!u(e))continue;let t={x:e.internals.positionAbsolute.x+p,y:e.internals.positionAbsolute.y+m};r&&(t=t8(t,o));let{position:a,positionAbsolute:s}=tq({nodeId:e.id,nextPosition:t,nodeLookup:l,nodeExtent:n,nodeOrigin:c,onError:i});e.position=a,e.internals.positionAbsolute=s,d.set(e.id,e)}s(d)},[])}let oe=(0,f.createContext)(null),ot=oe.Provider;oe.Consumer;let on=()=>(0,f.useContext)(oe),or=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),oo=(e,t,n)=>r=>{let{connectionClickStartHandle:a,connectionMode:i,connection:s}=r,{fromHandle:l,toHandle:c,isValid:d}=s,u=c?.nodeId===e&&c?.id===t&&c?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:u,clickConnecting:a?.nodeId===e&&a?.id===t&&a?.type===n,isPossibleEndHandle:i===o.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!a,valid:u&&d}},oa=(0,f.memo)(rF(function({type:e="source",position:t=c.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:i,onConnect:s,children:l,className:d,onMouseDown:u,onTouchStart:f,...p},m){let g=i||null,x="target"===e,v=rl(),y=on(),{connectOnClick:b,noPanClassName:w,rfId:N}=rs(or,rr),{connectingFrom:j,connectingTo:_,clickConnecting:E,isPossibleEndHandle:k,connectionInProcess:C,clickConnectionInProcess:M,valid:P}=rs(oo(y,g,e),rr);y||v.getState().onError?.("010",tM.error010());let A=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),o={...t,...e};if(r){let{edges:e,setEdges:t}=v.getState();t(nj(o,e))}n?.(o),s?.(o)},I=e=>{if(!y)return;let t=nf(e.nativeEvent);if(o&&(t&&0===e.button||!t)){let t=v.getState();nG.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:t.autoPanOnConnect,connectionMode:t.connectionMode,connectionRadius:t.connectionRadius,domNode:t.domNode,nodeLookup:t.nodeLookup,lib:t.lib,isTarget:x,handleId:g,nodeId:y,flowId:t.rfId,panBy:t.panBy,cancelConnection:t.cancelConnection,onConnectStart:t.onConnectStart,onConnectEnd:t.onConnectEnd,updateConnection:t.updateConnection,onConnect:A,isValidConnection:n||t.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:t.autoPanSpeed,dragThreshold:t.connectionDragThreshold})}t?u?.(e):f?.(e)};return(0,h.jsx)("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${N}-${y}-${g}-${e}`,className:S(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",w,d,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:a,clickconnecting:E,connectingfrom:j,connectingto:_,valid:P,connectionindicator:r&&(!C||k)&&(C||M?a:o)}]),onMouseDown:I,onTouchStart:I,onClick:b?t=>{let{onClickConnectStart:r,onClickConnectEnd:a,connectionClickStartHandle:i,connectionMode:s,isValidConnection:l,lib:c,rfId:d,nodeLookup:u,connection:h}=v.getState();if(!y||!i&&!o)return;if(!i){r?.(t.nativeEvent,{nodeId:y,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:y,type:e,id:g}});return}let f=nd(t.target),p=n||l,{connection:m,isValid:x}=nG.isValid(t.nativeEvent,{handle:{nodeId:y,id:g,type:e},connectionMode:s,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:p,flowId:d,doc:f,lib:c,nodeLookup:u});x&&m&&A(m);let b=structuredClone(h);delete b.inProgress,b.toPosition=b.toHandle?b.toHandle.position:null,a?.(t,b),v.setState({connectionClickStartHandle:null})}:void 0,ref:m,...p,children:l})})),oi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},os={input:function({data:e,isConnectable:t,sourcePosition:n=c.Bottom}){return(0,h.jsxs)(h.Fragment,{children:[e?.label,(0,h.jsx)(oa,{type:"source",position:n,isConnectable:t})]})},default:function({data:e,isConnectable:t,targetPosition:n=c.Top,sourcePosition:r=c.Bottom}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oa,{type:"target",position:n,isConnectable:t}),e?.label,(0,h.jsx)(oa,{type:"source",position:r,isConnectable:t})]})},output:function({data:e,isConnectable:t,targetPosition:n=c.Top}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oa,{type:"target",position:n,isConnectable:t}),e?.label]})},group:function(){return null}},ol=e=>{let{width:t,height:n,x:r,y:o}=tB(e.nodeLookup,{filter:e=>!!e.selected});return{width:t6(t)?t:null,height:t6(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function oc({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=rl(),{width:o,height:a,transformString:i,userSelectionActive:s}=rs(ol,rr),l=r9(),c=(0,f.useRef)(null);return((0,f.useEffect)(()=>{n||c.current?.focus({preventScroll:!0})},[n]),r7({nodeRef:c}),!s&&o&&a)?(0,h.jsx)("div",{className:S(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:(0,h.jsx)("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:e?t=>{e(t,r.getState().nodes.filter(e=>e.selected))}:void 0,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(oi,e.key)&&(e.preventDefault(),l({direction:oi[e.key],factor:e.shiftKey?4:1}))},style:{width:o,height:a}})}):null}let od=void 0,ou=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function oh({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:s,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:u,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:g,panActivationKeyCode:x,zoomActivationKeyCode:v,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:N,panOnScrollSpeed:j,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:k,defaultViewport:S,translateExtent:C,minZoom:M,maxZoom:P,preventScrolling:A,onSelectionContextMenu:I,noWheelClassName:R,noPanClassName:D,disableKeyboardA11y:z,onViewportChange:$,isControlledViewport:T}){let{nodesSelectionActive:O,userSelectionActive:L}=rs(ou,rr),V=rI(c,{target:od}),B=rI(x,{target:od}),H=B||k,F=B||N,Z=d&&!0!==H,q=V||L||Z;return function({deleteKeyCode:e,multiSelectionKeyCode:t}){let n=rl(),{deleteElements:r}=rX(),o=rI(e,{actInsideInputWithModifier:!1}),a=rI(t,{target:rG});(0,f.useEffect)(()=>{if(o){let{edges:e,nodes:t}=n.getState();r({nodes:t.filter(rU),edges:e.filter(rU)}),n.setState({nodesSelectionActive:!1})}},[o]),(0,f.useEffect)(()=>{n.setState({multiSelectionActive:a})},[a])}({deleteKeyCode:l,multiSelectionKeyCode:g}),(0,h.jsx)(r0,{onPaneContextMenu:a,elementsSelectable:y,zoomOnScroll:b,zoomOnPinch:w,panOnScroll:F,panOnScrollSpeed:j,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:!V&&H,defaultViewport:S,translateExtent:C,minZoom:M,maxZoom:P,zoomActivationKeyCode:v,preventScrolling:A,noWheelClassName:R,noPanClassName:D,onViewportChange:$,isControlledViewport:T,paneClickDistance:s,selectionOnDrag:Z,children:(0,h.jsxs)(r5,{onSelectionStart:p,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:H,isSelecting:!!q,selectionMode:u,selectionKeyPressed:V,paneClickDistance:s,selectionOnDrag:Z,children:[e,O&&(0,h.jsx)(oc,{onSelectionContextMenu:I,noPanClassName:D,disableKeyboardA11y:z})]})})}oh.displayName="FlowRenderer";let of=(0,f.memo)(oh),op=e=>t=>e?tH(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(e=>e.id):Array.from(t.nodeLookup.keys()),om=e=>e.updateNodeInternals;var og=(0,f.memo)(function({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:a,onDoubleClick:i,nodesDraggable:s,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:u,noDragClassName:p,noPanClassName:m,disableKeyboardA11y:g,rfId:x,nodeTypes:v,nodeClickDistance:y,onError:b}){let{node:w,internals:N,isParent:j}=rs(t=>{let n=t.nodeLookup.get(e),r=t.parentLookup.has(e);return{node:n,internals:n.internals,isParent:r}},rr),_=w.type||"default",E=v?.[_]||os[_];void 0===E&&(b?.("003",tM.error003(_)),_="default",E=v?.default||os.default);let k=!!(w.draggable||s&&void 0===w.draggable),C=!!(w.selectable||l&&void 0===w.selectable),M=!!(w.connectable||c&&void 0===w.connectable),P=!!(w.focusable||d&&void 0===w.focusable),A=rl(),I=ni(w),R=function({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){let o=rl(),a=(0,f.useRef)(null),i=(0,f.useRef)(null),s=(0,f.useRef)(e.sourcePosition),l=(0,f.useRef)(e.targetPosition),c=(0,f.useRef)(t),d=n&&!!e.internals.handleBounds;return(0,f.useEffect)(()=>{!a.current||e.hidden||d&&i.current===a.current||(i.current&&r?.unobserve(i.current),r?.observe(a.current),i.current=a.current)},[d,e.hidden]),(0,f.useEffect)(()=>()=>{i.current&&(r?.unobserve(i.current),i.current=null)},[]),(0,f.useEffect)(()=>{if(a.current){let n=c.current!==t,r=s.current!==e.sourcePosition,i=l.current!==e.targetPosition;(n||r||i)&&(c.current=t,s.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}({node:w,nodeType:_,hasDimensions:I,resizeObserver:u}),D=r7({nodeRef:R,disabled:w.hidden||!k,noDragClassName:p,handleSelector:w.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:y}),z=r9();if(w.hidden)return null;let $=na(w),T=void 0===w.internals.handleBounds?{width:w.width??w.initialWidth??w.style?.width,height:w.height??w.initialHeight??w.style?.height}:{width:w.width??w.style?.width,height:w.height??w.style?.height},O=C||k||t||n||r||o;return(0,h.jsx)("div",{className:S(["react-flow__node",`react-flow__node-${_}`,{[m]:k},w.className,{selected:w.selected,selectable:C,parent:j,draggable:k,dragging:D}]),ref:R,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:O?"all":"none",visibility:I?"visible":"hidden",...w.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:n?e=>n(e,{...N.userNode}):void 0,onMouseMove:r?e=>r(e,{...N.userNode}):void 0,onMouseLeave:o?e=>o(e,{...N.userNode}):void 0,onContextMenu:a?e=>a(e,{...N.userNode}):void 0,onClick:n=>{let{selectNodesOnDrag:r,nodeDragThreshold:o}=A.getState();C&&(!r||!k||o>0)&&r6({id:e,store:A,nodeRef:R}),t&&t(n,{...N.userNode})},onDoubleClick:i?e=>i(e,{...N.userNode}):void 0,onKeyDown:P?t=>{if(!nh(t.nativeEvent)&&!g){if(tA.includes(t.key)&&C)r6({id:e,store:A,unselect:"Escape"===t.key,nodeRef:R});else if(k&&w.selected&&Object.prototype.hasOwnProperty.call(oi,t.key)){t.preventDefault();let{ariaLabelConfig:e}=A.getState();A.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:t.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),z({direction:oi[t.key],factor:t.shiftKey?4:1})}}}:void 0,tabIndex:P?0:void 0,onFocus:P?()=>{if(g||!R.current?.matches(":focus-visible"))return;let{transform:t,width:n,height:r,autoPanOnNodeFocus:o,setCenter:a}=A.getState();o&&(tH(new Map([[e,w]]),{x:0,y:0,width:n,height:r},t,!0).length>0||a(w.position.x+$.width/2,w.position.y+$.height/2,{zoom:t[2]}))}:void 0,role:w.ariaRole??(P?"group":void 0),"aria-roledescription":"node","aria-describedby":g?void 0:`${ru}-${x}`,"aria-label":w.ariaLabel,...w.domAttributes,children:(0,h.jsx)(ot,{value:e,children:(0,h.jsx)(E,{id:e,data:w.data,type:_,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:w.selected??!1,selectable:C,draggable:k,deletable:w.deletable??!0,isConnectable:M,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:D,dragHandle:w.dragHandle,zIndex:N.z,parentId:w.parentId,...$})})})});let ox=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function ov(e){var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,onError:i}=rs(ox,rr),s=(t=e.onlyRenderVisibleElements,rs((0,f.useCallback)(op(t),[t]),rr)),l=function(){let e=rs(om),[t]=(0,f.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(t=>{let n=new Map;t.forEach(e=>{let t=e.target.getAttribute("data-id");n.set(t,{id:t,nodeElement:e.target,force:!0})}),e(n)}));return(0,f.useEffect)(()=>()=>{t?.disconnect()},[t]),t}();return(0,h.jsx)("div",{className:"react-flow__nodes",style:rQ,children:s.map(t=>(0,h.jsx)(og,{id:t,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:i},t))})}ov.displayName="NodeRenderer";let oy=(0,f.memo)(ov),ob={[l.Arrow]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e}};return(0,h.jsx)("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[l.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>{let n={strokeWidth:t,...e&&{stroke:e,fill:e}};return(0,h.jsx)("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},ow=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{let l=function(e){let t=rl();return(0,f.useMemo)(()=>Object.prototype.hasOwnProperty.call(ob,e)?ob[e]:(t.getState().onError?.("009",tM.error009(e)),null),[e])}(t);return l?(0,h.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:(0,h.jsx)(l,{color:n,strokeWidth:i})}):null},oN=({defaultColor:e,rfId:t})=>{let n=rs(e=>e.edges),r=rs(e=>e.defaultEdgeOptions),o=(0,f.useMemo)(()=>(function(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let a=new Set;return e.reduce((e,i)=>([i.markerStart||r,i.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=nR(r,t);a.has(o)||(e.push({id:o,color:r.color||n,...r}),a.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))})(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return o.length?(0,h.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,h.jsx)("defs",{children:o.map(e=>(0,h.jsx)(ow,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};oN.displayName="MarkerDefinitions";var oj=(0,f.memo)(oN);function o_({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...d}){let[u,p]=(0,f.useState)({x:1,y:0,width:0,height:0}),m=S(["react-flow__edge-textwrapper",c]),g=(0,f.useRef)(null);return((0,f.useEffect)(()=>{if(g.current){let e=g.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),n)?(0,h.jsxs)("g",{transform:`translate(${e-u.width/2} ${t-u.height/2})`,className:m,visibility:u.width?"visible":"hidden",...d,children:[o&&(0,h.jsx)("rect",{width:u.width+2*i[0],x:-i[0],y:-i[1],height:u.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),(0,h.jsx)("text",{className:"react-flow__edge-text",y:u.height/2,dy:"0.3em",ref:g,style:r,children:n}),l]}):null}o_.displayName="EdgeText";let oE=(0,f.memo)(o_);function ok({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:l,interactionWidth:c=20,...d}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("path",{...d,d:e,fill:"none",className:S(["react-flow__edge-path",d.className])}),c?(0,h.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,r&&t6(t)&&t6(n)?(0,h.jsx)(oE,{x:t,y:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:l}):null]})}function oS({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===c.Left||e===c.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function oC({sourceX:e,sourceY:t,sourcePosition:n=c.Bottom,targetX:r,targetY:o,targetPosition:a=c.Top}){let[i,s]=oS({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,d]=oS({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,h,f,p]=ng({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:l,targetControlY:d});return[`M${e},${t} C${i},${s} ${l},${d} ${r},${o}`,u,h,f,p]}function oM(e){return(0,f.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i,targetPosition:s,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:x,interactionWidth:v})=>{let[y,b,w]=oC({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s}),N=e.isInternal?void 0:t;return(0,h.jsx)(ok,{id:N,path:y,labelX:b,labelY:w,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:u,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:g,markerStart:x,interactionWidth:v})})}let oP=oM({isInternal:!1}),oA=oM({isInternal:!0});function oI(e){return(0,f.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:p,sourcePosition:m=c.Bottom,targetPosition:g=c.Top,markerEnd:x,markerStart:v,pathOptions:y,interactionWidth:b})=>{let[w,N,j]=nC({sourceX:n,sourceY:r,sourcePosition:m,targetX:o,targetY:a,targetPosition:g,borderRadius:y?.borderRadius,offset:y?.offset,stepPosition:y?.stepPosition}),_=e.isInternal?void 0:t;return(0,h.jsx)(ok,{id:_,path:w,labelX:N,labelY:j,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:p,markerEnd:x,markerStart:v,interactionWidth:b})})}oP.displayName="SimpleBezierEdge",oA.displayName="SimpleBezierEdgeInternal";let oR=oI({isInternal:!1}),oD=oI({isInternal:!0});function oz(e){return(0,f.memo)(({id:t,...n})=>{let r=e.isInternal?void 0:t;return(0,h.jsx)(oR,{...n,id:r,pathOptions:(0,f.useMemo)(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}oR.displayName="SmoothStepEdge",oD.displayName="SmoothStepEdgeInternal";let o$=oz({isInternal:!1}),oT=oz({isInternal:!0});function oO(e){return(0,f.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:m,interactionWidth:g})=>{let[x,v,y]=n_({sourceX:n,sourceY:r,targetX:o,targetY:a}),b=e.isInternal?void 0:t;return(0,h.jsx)(ok,{id:b,path:x,labelX:v,labelY:y,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:u,style:f,markerEnd:p,markerStart:m,interactionWidth:g})})}o$.displayName="StepEdge",oT.displayName="StepEdgeInternal";let oL=oO({isInternal:!1}),oV=oO({isInternal:!0});function oB(e){return(0,f.memo)(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:a,sourcePosition:i=c.Bottom,targetPosition:s=c.Top,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:x,markerStart:v,pathOptions:y,interactionWidth:b})=>{let[w,N,j]=ny({sourceX:n,sourceY:r,sourcePosition:i,targetX:o,targetY:a,targetPosition:s,curvature:y?.curvature}),_=e.isInternal?void 0:t;return(0,h.jsx)(ok,{id:_,path:w,labelX:N,labelY:j,label:l,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:x,markerStart:v,interactionWidth:b})})}oL.displayName="StraightEdge",oV.displayName="StraightEdgeInternal";let oH=oB({isInternal:!1}),oF=oB({isInternal:!0});oH.displayName="BezierEdge",oF.displayName="BezierEdgeInternal";let oZ={default:oF,straight:oV,step:oT,smoothstep:oD,simplebezier:oA},oq={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},oY=(e,t,n)=>n===c.Left?e-t:n===c.Right?e+t:e,oW=(e,t,n)=>n===c.Top?e-t:n===c.Bottom?e+t:e,oK="react-flow__edgeupdater";function oX({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s}){return(0,h.jsx)("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:S([oK,`${oK}-${s}`]),cx:oY(t,r,e),cy:oW(n,r,e),r:r,stroke:"transparent",fill:"transparent"})}function oU({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:a,targetY:i,sourcePosition:s,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:u,setReconnecting:f,setUpdateHover:p}){let m=rl(),g=(e,t)=>{if(0!==e.button)return;let{autoPanOnConnect:r,domNode:o,isValidConnection:a,connectionMode:i,connectionRadius:s,lib:l,onConnectStart:h,onConnectEnd:p,cancelConnection:g,nodeLookup:x,rfId:v,panBy:y,updateConnection:b}=m.getState(),w="target"===t.type;nG.onPointerDown(e.nativeEvent,{autoPanOnConnect:r,connectionMode:i,connectionRadius:s,domNode:o,handleId:t.id,nodeId:t.nodeId,nodeLookup:x,isTarget:w,edgeUpdaterType:t.type,lib:l,flowId:v,cancelConnection:g,panBy:y,isValidConnection:a,onConnect:e=>c?.(n,e),onConnectStart:(r,o)=>{f(!0),d?.(e,n,t.type),h?.(r,o)},onConnectEnd:p,onReconnectEnd:(e,r)=>{f(!1),u?.(e,n,t.type,r)},updateConnection:b,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},x=()=>p(!0),v=()=>p(!1);return(0,h.jsxs)(h.Fragment,{children:[(!0===e||"source"===e)&&(0,h.jsx)(oX,{position:s,centerX:r,centerY:o,radius:t,onMouseDown:e=>g(e,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),onMouseEnter:x,onMouseOut:v,type:"source"}),(!0===e||"target"===e)&&(0,h.jsx)(oX,{position:l,centerX:a,centerY:i,radius:t,onMouseDown:e=>g(e,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),onMouseEnter:x,onMouseOut:v,type:"target"})]})}var oG=(0,f.memo)(function({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:a,onDoubleClick:i,onContextMenu:s,onMouseEnter:l,onMouseMove:d,onMouseLeave:u,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:x,rfId:v,edgeTypes:y,noPanClassName:b,onError:w,disableKeyboardA11y:N}){let j=rs(t=>t.edgeLookup.get(e)),_=rs(e=>e.defaultEdgeOptions),E=(j=_?{..._,...j}:j).type||"default",k=y?.[E]||oZ[E];void 0===k&&(w?.("011",tM.error011(E)),E="default",k=y?.default||oZ.default);let C=!!(j.focusable||t&&void 0===j.focusable),M=void 0!==m&&(j.reconnectable||n&&void 0===j.reconnectable),P=!!(j.selectable||r&&void 0===j.selectable),A=(0,f.useRef)(null),[I,R]=(0,f.useState)(!1),[D,z]=(0,f.useState)(!1),$=rl(),{zIndex:T,sourceX:O,sourceY:L,targetX:V,targetY:B,sourcePosition:H,targetPosition:F}=rs((0,f.useCallback)(t=>{let n=t.nodeLookup.get(j.source),r=t.nodeLookup.get(j.target);if(!n||!r)return{zIndex:j.zIndex,...oq};let a=function(e){let{sourceNode:t,targetNode:n}=e;if(!nM(t)||!nM(n))return null;let r=t.internals.handleBounds||nP(t.handles),a=n.internals.handleBounds||nP(n.handles),i=nI(r?.source??[],e.sourceHandle),s=nI(e.connectionMode===o.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),e.targetHandle);if(!i||!s)return e.onError?.("008",tM.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let l=i?.position||c.Bottom,d=s?.position||c.Top,u=nA(t,i,l),h=nA(n,s,d);return{sourceX:u.x,sourceY:u.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:d}}({id:e,sourceNode:n,targetNode:r,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:t.connectionMode,onError:w});return{zIndex:function({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if("manual"===a)return r;let i=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return(o&&n?r+1e3:r)+i}({selected:j.selected,zIndex:j.zIndex,sourceNode:n,targetNode:r,elevateOnSelect:t.elevateEdgesOnSelect,zIndexMode:t.zIndexMode}),...a||oq}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),rr),Z=(0,f.useMemo)(()=>j.markerStart?`url('#${nR(j.markerStart,v)}')`:void 0,[j.markerStart,v]),q=(0,f.useMemo)(()=>j.markerEnd?`url('#${nR(j.markerEnd,v)}')`:void 0,[j.markerEnd,v]);if(j.hidden||null===O||null===L||null===V||null===B)return null;let Y=i?e=>{i(e,{...j})}:void 0,W=s?e=>{s(e,{...j})}:void 0,K=l?e=>{l(e,{...j})}:void 0,X=d?e=>{d(e,{...j})}:void 0,U=u?e=>{u(e,{...j})}:void 0;return(0,h.jsx)("svg",{style:{zIndex:T},children:(0,h.jsxs)("g",{className:S(["react-flow__edge",`react-flow__edge-${E}`,j.className,b,{selected:j.selected,animated:j.animated,inactive:!P&&!a,updating:I,selectable:P}]),onClick:t=>{let{addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:o}=$.getState();P&&($.setState({nodesSelectionActive:!1}),j.selected&&o?(r({nodes:[],edges:[j]}),A.current?.blur()):n([e])),a&&a(t,j)},onDoubleClick:Y,onContextMenu:W,onMouseEnter:K,onMouseMove:X,onMouseLeave:U,onKeyDown:C?t=>{if(!N&&tA.includes(t.key)&&P){let{unselectNodesAndEdges:n,addSelectedEdges:r}=$.getState();"Escape"===t.key?(A.current?.blur(),n({edges:[j]})):r([e])}}:void 0,tabIndex:C?0:void 0,role:j.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===j.ariaLabel?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":C?`${rh}-${v}`:void 0,ref:A,...j.domAttributes,children:[!D&&(0,h.jsx)(k,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:P,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:O,sourceY:L,targetX:V,targetY:B,sourcePosition:H,targetPosition:F,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:Z,markerEnd:q,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),M&&(0,h.jsx)(oU,{edge:j,isReconnectable:M,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:x,sourceX:O,sourceY:L,targetX:V,targetY:B,sourcePosition:H,targetPosition:F,setUpdateHover:R,setReconnecting:z})]})})});let oQ=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function oJ({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:u,onEdgeDoubleClick:p,onReconnectStart:m,onReconnectEnd:g,disableKeyboardA11y:x}){let{edgesFocusable:v,edgesReconnectable:y,elementsSelectable:b,onError:w}=rs(oQ,rr),N=rs((0,f.useCallback)(e=>{if(!t)return e.edges.map(e=>e.id);let n=[];if(e.width&&e.height)for(let t of e.edges){let r=e.nodeLookup.get(t.source),o=e.nodeLookup.get(t.target);r&&o&&function({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let a=tQ(t2(e),t2(t));return a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1),t3({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},t0(a))>0}({sourceNode:r,targetNode:o,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[t]),rr);return(0,h.jsxs)("div",{className:"react-flow__edges",children:[(0,h.jsx)(oj,{defaultColor:e,rfId:n}),N.map(e=>(0,h.jsx)(oG,{id:e,edgesFocusable:v,edgesReconnectable:y,elementsSelectable:b,noPanClassName:o,onReconnect:a,onContextMenu:i,onMouseEnter:s,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:u,onDoubleClick:p,onReconnectStart:m,onReconnectEnd:g,rfId:n,onError:w,edgeTypes:r,disableKeyboardA11y:x},e))]})}oJ.displayName="EdgeRenderer";let o0=(0,f.memo)(oJ),o1=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function o2({children:e}){let t=rs(o1);return(0,h.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}let o4=e=>e.panZoom?.syncViewport;function o3(e){return e.connection.inProgress?{...e.connection,to:t9(e.connection.to,e.transform)}:{...e.connection}}let o5=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function o6({containerStyle:e,style:t,type:n,component:r}){let{nodesConnectable:o,width:a,height:i,isValid:s,inProgress:l}=rs(o5,rr);return a&&o&&l?(0,h.jsx)("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:(0,h.jsx)("g",{className:S(["react-flow__connection",tz(s)]),children:(0,h.jsx)(o7,{style:t,type:n,CustomComponent:r,isValid:s})})}):null}let o7=({style:e,type:t=s.Bezier,CustomComponent:n,isValid:r})=>{var o;let{inProgress:a,from:i,fromNode:l,fromHandle:c,fromPosition:d,to:u,toNode:f,toHandle:p,toPosition:m,pointer:g}=rs(o3,rr);if(!a)return;if(n)return(0,h.jsx)(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:c,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:d,toPosition:m,connectionStatus:tz(r),toNode:f,toHandle:p,pointer:g});let x="",v={sourceX:i.x,sourceY:i.y,sourcePosition:d,targetX:u.x,targetY:u.y,targetPosition:m};switch(t){case s.Bezier:[x]=ny(v);break;case s.SimpleBezier:[x]=oC(v);break;case s.Step:[x]=nC({...v,borderRadius:0});break;case s.SmoothStep:[x]=nC(v);break;default:[x]=n_(v)}return(0,h.jsx)("path",{d:x,fill:"none",className:"react-flow__connection-path",style:e})};o7.displayName="ConnectionLine";let o8={};function o9(e=o8){(0,f.useRef)(e),rl(),(0,f.useEffect)(()=>{},[e])}function ae({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:u,onSelectionStart:p,onSelectionEnd:m,connectionLineType:g,connectionLineStyle:x,connectionLineComponent:v,connectionLineContainerStyle:y,selectionKeyCode:b,selectionOnDrag:w,selectionMode:N,multiSelectionKeyCode:j,panActivationKeyCode:_,zoomActivationKeyCode:E,deleteKeyCode:k,onlyRenderVisibleElements:S,elementsSelectable:C,defaultViewport:M,translateExtent:P,minZoom:A,maxZoom:I,preventScrolling:R,defaultMarkerColor:D,zoomOnScroll:z,zoomOnPinch:$,panOnScroll:T,panOnScrollSpeed:O,panOnScrollMode:L,zoomOnDoubleClick:V,panOnDrag:B,onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:Z,onPaneMouseLeave:q,onPaneScroll:Y,onPaneContextMenu:W,paneClickDistance:K,nodeClickDistance:X,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,noDragClassName:eo,noWheelClassName:ea,noPanClassName:ei,disableKeyboardA11y:es,nodeExtent:el,rfId:ec,viewport:ed,onViewportChange:eu}){return o9(e),o9(t),rl(),(0,f.useRef)(!1),(0,f.useEffect)(()=>{},[]),function(e){let t=rX(),n=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(n),function(e){let t=rs(o4),n=rl();(0,f.useEffect)(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t])}(ed),(0,h.jsx)(of,{onPaneClick:H,onPaneMouseEnter:F,onPaneMouseMove:Z,onPaneMouseLeave:q,onPaneContextMenu:W,onPaneScroll:Y,paneClickDistance:K,deleteKeyCode:k,selectionKeyCode:b,selectionOnDrag:w,selectionMode:N,onSelectionStart:p,onSelectionEnd:m,multiSelectionKeyCode:j,panActivationKeyCode:_,zoomActivationKeyCode:E,elementsSelectable:C,zoomOnScroll:z,zoomOnPinch:$,zoomOnDoubleClick:V,panOnScroll:T,panOnScrollSpeed:O,panOnScrollMode:L,panOnDrag:B,defaultViewport:M,translateExtent:P,minZoom:A,maxZoom:I,onSelectionContextMenu:u,preventScrolling:R,noDragClassName:eo,noWheelClassName:ea,noPanClassName:ei,disableKeyboardA11y:es,onViewportChange:eu,isControlledViewport:!!ed,children:(0,h.jsxs)(o2,{children:[(0,h.jsx)(o0,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:i,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,onlyRenderVisibleElements:S,onEdgeContextMenu:U,onEdgeMouseEnter:G,onEdgeMouseMove:Q,onEdgeMouseLeave:J,reconnectRadius:ee,defaultMarkerColor:D,noPanClassName:ei,disableKeyboardA11y:es,rfId:ec}),(0,h.jsx)(o6,{style:x,type:g,component:v,containerStyle:y}),(0,h.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,h.jsx)(oy,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:X,onlyRenderVisibleElements:S,noPanClassName:ei,noDragClassName:eo,disableKeyboardA11y:es,nodeExtent:el,rfId:ec}),(0,h.jsx)("div",{className:"react-flow__viewport-portal"})]})})}ae.displayName="GraphView";let at=(0,f.memo)(ae),an=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:a,height:i,fitView:s,fitViewOptions:l,minZoom:c=.5,maxZoom:d=2,nodeOrigin:u,nodeExtent:h,zIndexMode:f="basic"}={})=>{let p=new Map,m=new Map,g=new Map,x=new Map,v=r??t??[],y=n??e??[],b=u??[0,0],w=h??tP;nZ(g,x,v);let N=nO(y,p,m,{nodeOrigin:b,nodeExtent:w,zIndexMode:f}),j=[0,0,1];if(s&&a&&i){let{x:e,y:t,zoom:n}=nn(tB(p,{filter:e=>!!((e.width||e.initialWidth)&&(e.height||e.initialHeight))}),a,i,c,d,l?.padding??.1);j=[e,t,n]}return{rfId:"1",width:a??0,height:i??0,transform:j,nodes:y,nodesInitialized:N,nodeLookup:p,parentLookup:m,edges:v,edgeLookup:x,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==n,hasDefaultEdges:void 0!==r,panZoom:null,minZoom:c,maxZoom:d,translateExtent:tP,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:o.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:b,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:l,fitViewResolver:null,connection:{...tR},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:t7,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:tI,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ar=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:i,fitViewOptions:s,minZoom:l,maxZoom:d,nodeOrigin:u,nodeExtent:h,zIndexMode:f})=>rn((p,m)=>{async function g(){let{nodeLookup:e,panZoom:t,fitViewOptions:n,fitViewResolver:r,width:o,height:a,minZoom:i,maxZoom:s}=m();t&&(await tZ({nodes:e,width:o,height:a,panZoom:t,minZoom:i,maxZoom:s},n),r?.resolve(!0),p({fitViewResolver:null}))}return{...an({nodes:e,edges:t,width:o,height:a,fitView:i,fitViewOptions:s,minZoom:l,maxZoom:d,nodeOrigin:u,nodeExtent:h,defaultNodes:n,defaultEdges:r,zIndexMode:f}),setNodes:e=>{let{nodeLookup:t,parentLookup:n,nodeOrigin:r,elevateNodesOnSelect:o,fitViewQueued:a,zIndexMode:i}=m(),s=nO(e,t,n,{nodeOrigin:r,nodeExtent:h,elevateNodesOnSelect:o,checkEquality:!0,zIndexMode:i});a&&s?(g(),p({nodes:e,nodesInitialized:s,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:e,nodesInitialized:s})},setEdges:e=>{let{connectionLookup:t,edgeLookup:n}=m();nZ(t,n,e),p({edges:e})},setDefaultNodesAndEdges:(e,t)=>{if(e){let{setNodes:t}=m();t(e),p({hasDefaultNodes:!0})}if(t){let{setEdges:e}=m();e(t),p({hasDefaultEdges:!0})}},updateNodeInternals:e=>{let{triggerNodeChanges:t,nodeLookup:n,parentLookup:r,domNode:o,nodeOrigin:a,nodeExtent:i,debug:s,fitViewQueued:l,zIndexMode:c}=m(),{changes:d,updatedInternals:u}=function(e,t,n,r,o,a,i){let s=r?.querySelector(".xyflow__viewport"),l=!1;if(!s)return{changes:[],updatedInternals:l};let c=[],d=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(d.transform),h=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let s=nc(r.nodeElement),d=e.measured.width!==s.width||e.measured.height!==s.height;if(s.width&&s.height&&(d||!e.internals.handleBounds||r.force)){let f=r.nodeElement.getBoundingClientRect(),p=no(e.extent)?e.extent:a,{positionAbsolute:m}=e.internals;e.parentId&&"parent"===e.extent?m=tX(m,s,t.get(e.parentId)):p&&(m=tK(m,p,s));let g={...e,measured:s,internals:{...e.internals,positionAbsolute:m,handleBounds:{source:nm("source",r.nodeElement,f,u,e.id),target:nm("target",r.nodeElement,f,u,e.id)}}};t.set(e.id,g),e.parentId&&nL(g,t,n,{nodeOrigin:o,zIndexMode:i}),l=!0,d&&(c.push({id:e.id,type:"dimensions",dimensions:s}),e.expandParent&&e.parentId&&h.push({id:e.id,parentId:e.parentId,rect:t1(g,o)}))}}if(h.length>0){let e=nB(h,t,n,o);c.push(...e)}return{changes:c,updatedInternals:l}}(e,n,r,o,a,i,c);u&&(function(e,t,n){let r=n$(nD,n);for(let n of e.values())if(n.parentId)nL(n,e,t,r);else{let e=tK(tL(n,r.nodeOrigin),no(n.extent)?n.extent:r.nodeExtent,na(n));n.internals.positionAbsolute=e}}(n,r,{nodeOrigin:a,nodeExtent:i,zIndexMode:c}),l?(g(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),d?.length>0&&(s&&console.log("React Flow: trigger node changes",d),t?.(d)))},updateNodePositions:(e,t=!1)=>{let n=[],r=[],{nodeLookup:o,triggerNodeChanges:a,connection:i,updateConnection:s,onNodesChangeMiddlewareMap:l}=m();for(let[a,l]of e){let e=o.get(a),d=!!(e?.expandParent&&e?.parentId&&l?.position),u={id:a,type:"position",position:d?{x:Math.max(0,l.position.x),y:Math.max(0,l.position.y)}:l.position,dragging:t};if(e&&i.inProgress&&i.fromNode.id===e.id){let t=nA(e,i.fromHandle,c.Left,!0);s({...i,from:t})}d&&e.parentId&&n.push({id:a,parentId:e.parentId,rect:{...l.internals.positionAbsolute,width:l.measured.width??0,height:l.measured.height??0}}),r.push(u)}if(n.length>0){let{parentLookup:e,nodeOrigin:t}=m(),a=nB(n,o,e,t);r.push(...a)}for(let e of l.values())r=e(r);a(r)},triggerNodeChanges:e=>{let{onNodesChange:t,setNodes:n,nodes:r,hasDefaultNodes:o,debug:a}=m();e?.length&&(o&&n(r$(e,r)),a&&console.log("React Flow: trigger node changes",e),t?.(e))},triggerEdgeChanges:e=>{let{onEdgesChange:t,setEdges:n,edges:r,hasDefaultEdges:o,debug:a}=m();e?.length&&(o&&n(r$(e,r)),a&&console.log("React Flow: trigger edge changes",e),t?.(e))},addSelectedNodes:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:a}=m();if(t){o(e.map(e=>rT(e,!0)));return}o(rO(r,new Set([...e]),!0)),a(rO(n))},addSelectedEdges:e=>{let{multiSelectionActive:t,edgeLookup:n,nodeLookup:r,triggerNodeChanges:o,triggerEdgeChanges:a}=m();if(t){a(e.map(e=>rT(e,!0)));return}a(rO(n,new Set([...e]))),o(rO(r,new Set,!0))},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{let{edges:n,nodes:r,nodeLookup:o,triggerNodeChanges:a,triggerEdgeChanges:i}=m(),s=(e||r).map(e=>{let t=o.get(e.id);return t&&(t.selected=!1),rT(e.id,!1)}),l=(t||n).map(e=>rT(e.id,!1));a(s),i(l)},setMinZoom:e=>{let{panZoom:t,maxZoom:n}=m();t?.setScaleExtent([e,n]),p({minZoom:e})},setMaxZoom:e=>{let{panZoom:t,minZoom:n}=m();t?.setScaleExtent([n,e]),p({maxZoom:e})},setTranslateExtent:e=>{m().panZoom?.setTranslateExtent(e),p({translateExtent:e})},resetSelectedElements:()=>{let{edges:e,nodes:t,triggerNodeChanges:n,triggerEdgeChanges:r,elementsSelectable:o}=m();if(!o)return;let a=t.reduce((e,t)=>t.selected?[...e,rT(t.id,!1)]:e,[]),i=e.reduce((e,t)=>t.selected?[...e,rT(t.id,!1)]:e,[]);n(a),r(i)},setNodeExtent:e=>{let{nodes:t,nodeLookup:n,parentLookup:r,nodeOrigin:o,elevateNodesOnSelect:a,nodeExtent:i,zIndexMode:s}=m();(e[0][0]!==i[0][0]||e[0][1]!==i[0][1]||e[1][0]!==i[1][0]||e[1][1]!==i[1][1])&&(nO(t,n,r,{nodeOrigin:o,nodeExtent:e,elevateNodesOnSelect:a,checkEquality:!1,zIndexMode:s}),p({nodeExtent:e}))},panBy:e=>{let{transform:t,width:n,height:r,panZoom:o,translateExtent:a}=m();return nH({delta:e,panZoom:o,transform:t,translateExtent:a,width:n,height:r})},setCenter:async(e,t,n)=>{let{width:r,height:o,maxZoom:a,panZoom:i}=m();if(!i)return Promise.resolve(!1);let s=void 0!==n?.zoom?n.zoom:a;return await i.setViewport({x:r/2-e*s,y:o/2-t*s,zoom:s},{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...tR}})},updateConnection:e=>{p({connection:e})},reset:()=>p({...an()})}},Object.is);function ao({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:a,initialMinZoom:i,initialMaxZoom:s,initialFitViewOptions:l,fitView:c,nodeOrigin:d,nodeExtent:u,zIndexMode:p,children:m}){let[g]=(0,f.useState)(()=>ar({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:a,fitView:c,minZoom:i,maxZoom:s,fitViewOptions:l,nodeOrigin:d,nodeExtent:u,zIndexMode:p}));return(0,h.jsx)(ra,{value:g,children:(0,h.jsx)(rW,{children:m})})}function aa({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:a,height:i,fitView:s,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:u,nodeExtent:p,zIndexMode:m}){return(0,f.useContext)(ro)?(0,h.jsx)(h.Fragment,{children:e}):(0,h.jsx)(ao,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:a,initialHeight:i,fitView:s,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:u,nodeExtent:p,zIndexMode:m,children:e})}let ai={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var as=rF(function({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:l,edgeTypes:c,onNodeClick:d,onEdgeClick:u,onInit:p,onMove:m,onMoveStart:g,onMoveEnd:x,onConnect:v,onConnectStart:y,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:N,onNodeMouseEnter:j,onNodeMouseMove:_,onNodeMouseLeave:E,onNodeContextMenu:k,onNodeDoubleClick:C,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:A,onNodesDelete:I,onEdgesDelete:R,onDelete:D,onSelectionChange:z,onSelectionDragStart:$,onSelectionDrag:T,onSelectionDragStop:O,onSelectionContextMenu:L,onSelectionStart:V,onSelectionEnd:B,onBeforeDelete:H,connectionMode:F,connectionLineType:Z=s.Bezier,connectionLineStyle:q,connectionLineComponent:Y,connectionLineContainerStyle:W,deleteKeyCode:K="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:U=!1,selectionMode:G=i.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:J=nr()?"Meta":"Control",zoomActivationKeyCode:ee=nr()?"Meta":"Control",snapToGrid:et,snapGrid:en,onlyRenderVisibleElements:er=!1,selectNodesOnDrag:eo,nodesDraggable:ea,autoPanOnNodeFocus:ei,nodesConnectable:es,nodesFocusable:el,nodeOrigin:ec=rE,edgesFocusable:ed,edgesReconnectable:eu,elementsSelectable:eh=!0,defaultViewport:ef=rk,minZoom:ep=.5,maxZoom:em=2,translateExtent:eg=tP,preventScrolling:ex=!0,nodeExtent:ev,defaultMarkerColor:ey="#b1b1b7",zoomOnScroll:eb=!0,zoomOnPinch:ew=!0,panOnScroll:eN=!1,panOnScrollSpeed:ej=.5,panOnScrollMode:e_=a.Free,zoomOnDoubleClick:eE=!0,panOnDrag:ek=!0,onPaneClick:eS,onPaneMouseEnter:eC,onPaneMouseMove:eM,onPaneMouseLeave:eP,onPaneScroll:eA,onPaneContextMenu:eI,paneClickDistance:eR=1,nodeClickDistance:eD=0,children:ez,onReconnect:e$,onReconnectStart:eT,onReconnectEnd:eO,onEdgeContextMenu:eL,onEdgeDoubleClick:eV,onEdgeMouseEnter:eB,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,reconnectRadius:eZ=10,onNodesChange:eq,onEdgesChange:eY,noDragClassName:eW="nodrag",noWheelClassName:eK="nowheel",noPanClassName:eX="nopan",fitView:eU,fitViewOptions:eG,connectOnClick:eQ,attributionPosition:eJ,proOptions:e0,defaultEdgeOptions:e1,elevateNodesOnSelect:e2=!0,elevateEdgesOnSelect:e4=!1,disableKeyboardA11y:e3=!1,autoPanOnConnect:e5,autoPanOnNodeDrag:e6,autoPanSpeed:e7,connectionRadius:e8,isValidConnection:e9,onError:te,style:tt,id:tn,nodeDragThreshold:tr,connectionDragThreshold:to,viewport:ta,onViewportChange:ti,width:ts,height:tl,colorMode:tc="light",debug:td,onScroll:tu,ariaLabelConfig:th,zIndexMode:tf="basic",...tp},tm){let tg=tn||"1",tx=function(e){let[t,n]=(0,f.useState)("system"===e?null:e);return(0,f.useEffect)(()=>{if("system"!==e){n(e);return}return n("light"),()=>{}},[e]),null!==t?t:"light"}(tc),tv=(0,f.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),tu?.(e)},[tu]);return(0,h.jsx)("div",{"data-testid":"rf__wrapper",...tp,onScroll:tv,style:{...tt,...ai},ref:tm,className:S(["react-flow",o,tx]),id:tn,role:"application",children:(0,h.jsxs)(aa,{nodes:e,edges:t,width:ts,height:tl,fitView:eU,fitViewOptions:eG,minZoom:ep,maxZoom:em,nodeOrigin:ec,nodeExtent:ev,zIndexMode:tf,children:[(0,h.jsx)(at,{onInit:p,onNodeClick:d,onEdgeClick:u,onNodeMouseEnter:j,onNodeMouseMove:_,onNodeMouseLeave:E,onNodeContextMenu:k,onNodeDoubleClick:C,nodeTypes:l,edgeTypes:c,connectionLineType:Z,connectionLineStyle:q,connectionLineComponent:Y,connectionLineContainerStyle:W,selectionKeyCode:X,selectionOnDrag:U,selectionMode:G,deleteKeyCode:K,multiSelectionKeyCode:J,panActivationKeyCode:Q,zoomActivationKeyCode:ee,onlyRenderVisibleElements:er,defaultViewport:ef,translateExtent:eg,minZoom:ep,maxZoom:em,preventScrolling:ex,zoomOnScroll:eb,zoomOnPinch:ew,zoomOnDoubleClick:eE,panOnScroll:eN,panOnScrollSpeed:ej,panOnScrollMode:e_,panOnDrag:ek,onPaneClick:eS,onPaneMouseEnter:eC,onPaneMouseMove:eM,onPaneMouseLeave:eP,onPaneScroll:eA,onPaneContextMenu:eI,paneClickDistance:eR,nodeClickDistance:eD,onSelectionContextMenu:L,onSelectionStart:V,onSelectionEnd:B,onReconnect:e$,onReconnectStart:eT,onReconnectEnd:eO,onEdgeContextMenu:eL,onEdgeDoubleClick:eV,onEdgeMouseEnter:eB,onEdgeMouseMove:eH,onEdgeMouseLeave:eF,reconnectRadius:eZ,defaultMarkerColor:ey,noDragClassName:eW,noWheelClassName:eK,noPanClassName:eX,rfId:tg,disableKeyboardA11y:e3,nodeExtent:ev,viewport:ta,onViewportChange:ti}),(0,h.jsx)(rP,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:y,onConnectEnd:b,onClickConnectStart:w,onClickConnectEnd:N,nodesDraggable:ea,autoPanOnNodeFocus:ei,nodesConnectable:es,nodesFocusable:el,edgesFocusable:ed,edgesReconnectable:eu,elementsSelectable:eh,elevateNodesOnSelect:e2,elevateEdgesOnSelect:e4,minZoom:ep,maxZoom:em,nodeExtent:ev,onNodesChange:eq,onEdgesChange:eY,snapToGrid:et,snapGrid:en,connectionMode:F,translateExtent:eg,connectOnClick:eQ,defaultEdgeOptions:e1,fitView:eU,fitViewOptions:eG,onNodesDelete:I,onEdgesDelete:R,onDelete:D,onNodeDragStart:M,onNodeDrag:P,onNodeDragStop:A,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:O,onMove:m,onMoveStart:g,onMoveEnd:x,noPanClassName:eX,nodeOrigin:ec,rfId:tg,autoPanOnConnect:e5,autoPanOnNodeDrag:e6,autoPanSpeed:e7,onError:te,connectionRadius:e8,isValidConnection:e9,selectNodesOnDrag:eo,nodeDragThreshold:tr,connectionDragThreshold:to,onBeforeDelete:H,debug:td,ariaLabelConfig:th,zIndexMode:tf}),(0,h.jsx)(r_,{onSelectionChange:z}),ez,(0,h.jsx)(rv,{proOptions:e0,position:eJ}),(0,h.jsx)(rg,{rfId:tg,disableKeyboardA11y:e3})]})})});function al({dimensions:e,lineWidth:t,variant:n,className:r}){return(0,h.jsx)("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:S(["react-flow__background-pattern",n,r])})}function ac({radius:e,className:t}){return(0,h.jsx)("circle",{cx:e,cy:e,r:e,className:S(["react-flow__background-pattern","dots",t])})}tM.error014(),function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(u||(u={}));let ad={[u.Dots]:1,[u.Lines]:1,[u.Cross]:6},au=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function ah({id:e,variant:t=u.Dots,gap:n=20,size:r,lineWidth:o=1,offset:a=0,color:i,bgColor:s,style:l,className:c,patternClassName:d}){let p=(0,f.useRef)(null),{transform:m,patternId:g}=rs(au,rr),x=r||ad[t],v=t===u.Dots,y=t===u.Cross,b=Array.isArray(n)?n:[n,n],w=[b[0]*m[2]||1,b[1]*m[2]||1],N=x*m[2],j=Array.isArray(a)?a:[a,a],_=y?[N,N]:w,E=[j[0]*m[2]||1+_[0]/2,j[1]*m[2]||1+_[1]/2],k=`${g}${e||""}`;return(0,h.jsxs)("svg",{className:S(["react-flow__background",c]),style:{...l,...rQ,"--xy-background-color-props":s,"--xy-background-pattern-color-props":i},ref:p,"data-testid":"rf__background",children:[(0,h.jsx)("pattern",{id:k,x:m[0]%w[0],y:m[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:v?(0,h.jsx)(ac,{radius:N/2,className:d}):(0,h.jsx)(al,{dimensions:_,lineWidth:o,variant:t,className:d})}),(0,h.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}ah.displayName="Background";let af=(0,f.memo)(ah);function ap(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,h.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function am(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,h.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function ag(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,h.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ax(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function av(){return(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,h.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ay({children:e,className:t,...n}){return(0,h.jsx)("button",{type:"button",className:S(["react-flow__controls-button",t]),...n,children:e})}let ab=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function aw({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:l,className:c,children:d,position:u="bottom-left",orientation:f="vertical","aria-label":p}){let m=rl(),{isInteractive:g,minZoomReached:x,maxZoomReached:v,ariaLabelConfig:y}=rs(ab,rr),{zoomIn:b,zoomOut:w,fitView:N}=rX();return(0,h.jsxs)(rx,{className:S(["react-flow__controls","horizontal"===f?"horizontal":"vertical",c]),position:u,style:e,"data-testid":"rf__controls","aria-label":p??y["controls.ariaLabel"],children:[t&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ay,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:y["controls.zoomIn.ariaLabel"],"aria-label":y["controls.zoomIn.ariaLabel"],disabled:v,children:(0,h.jsx)(ap,{})}),(0,h.jsx)(ay,{onClick:()=>{w(),i?.()},className:"react-flow__controls-zoomout",title:y["controls.zoomOut.ariaLabel"],"aria-label":y["controls.zoomOut.ariaLabel"],disabled:x,children:(0,h.jsx)(am,{})})]}),n&&(0,h.jsx)(ay,{className:"react-flow__controls-fitview",onClick:()=>{N(o),s?.()},title:y["controls.fitView.ariaLabel"],"aria-label":y["controls.fitView.ariaLabel"],children:(0,h.jsx)(ag,{})}),r&&(0,h.jsx)(ay,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),l?.(!g)},title:y["controls.interactive.ariaLabel"],"aria-label":y["controls.interactive.ariaLabel"],children:g?(0,h.jsx)(av,{}):(0,h.jsx)(ax,{})}),d]})}aw.displayName="Controls";let aN=(0,f.memo)(aw),aj=(0,f.memo)(function({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:l,className:c,borderRadius:d,shapeRendering:u,selected:f,onClick:p}){let{background:m,backgroundColor:g}=a||{};return(0,h.jsx)("rect",{className:S(["react-flow__minimap-node",{selected:f},c]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:i||m||g,stroke:s,strokeWidth:l},shapeRendering:u,onClick:p?t=>p(t,e):void 0})}),a_=e=>e.nodes.map(e=>e.id),aE=e=>e instanceof Function?e:()=>e,ak=(0,f.memo)(function({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:s,onClick:l}){let{node:c,x:d,y:u,width:f,height:p}=rs(t=>{let{internals:n}=t.nodeLookup.get(e),r=n.userNode,{x:o,y:a}=n.positionAbsolute,{width:i,height:s}=na(r);return{node:r,x:o,y:a,width:i,height:s}},rr);return c&&!c.hidden&&ni(c)?(0,h.jsx)(s,{x:d,y:u,width:f,height:p,style:c.style,selected:!!c.selected,className:r(c),color:t(c),borderRadius:o,strokeColor:n(c),strokeWidth:a,shapeRendering:i,onClick:l,id:c.id}):null});var aS=(0,f.memo)(function({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:a=aj,onClick:i}){let s=rs(a_,rr),l=aE(t),c=aE(e),d=aE(n);return(0,h.jsx)(h.Fragment,{children:s.map(e=>(0,h.jsx)(ak,{id:e,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:a,onClick:i,shapeRendering:"crispEdges"},e))})});let aC=e=>!e.hidden,aM=e=>{let t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?t4(tB(e.nodeLookup,{filter:aC}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function aP({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:s,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:u,position:p="bottom-right",onClick:m,onNodeClick:g,pannable:x=!1,zoomable:v=!1,ariaLabel:y,inversePan:b,zoomStep:w=1,offsetScale:N=5}){let j=rl(),_=(0,f.useRef)(null),{boundingRect:E,viewBB:k,rfId:C,panZoom:M,translateExtent:P,flowWidth:A,flowHeight:I,ariaLabelConfig:R}=rs(aM,rr),D=e?.width??200,z=e?.height??150,$=Math.max(E.width/D,E.height/z),T=$*D,O=$*z,L=N*$,V=E.x-(T-E.width)/2-L,B=E.y-(O-E.height)/2-L,H=T+2*L,F=O+2*L,Z=`react-flow__minimap-desc-${C}`,q=(0,f.useRef)(0),Y=(0,f.useRef)();q.current=$,(0,f.useEffect)(()=>{if(_.current&&M)return Y.current=function({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let o=ey(e);return{update:function({translateExtent:e,width:a,height:i,zoomStep:s=1,pannable:l=!0,zoomable:c=!0,inversePan:d=!1}){let u=[0,0],h=tS().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(u=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",l?o=>{let s=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;let l=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],c=[l[0]-u[0],l[1]-u[1]];u=l;let h=r()*Math.max(s[2],Math.log(s[2]))*(d?-1:1),f={x:s[0]-c[0]*h,y:s[1]-c[1]*h};t.setViewportConstrained({x:f.x,y:f.y,zoom:s[2]},[[0,0],[a,i]],e)}:null).on("zoom.wheel",c?e=>{if("wheel"!==e.sourceEvent.type||!t)return;let r=n(),o=e.sourceEvent.ctrlKey&&nr()?10:1,a=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*s,i=r[2]*Math.pow(2,a*o);t.scaleTo(i)}:null);o.call(h,{})},destroy:function(){o.on("zoom",null)},pointer:eb}}({domNode:_.current,panZoom:M,getTransform:()=>j.getState().transform,getViewScale:()=>q.current}),()=>{Y.current?.destroy()}},[M]),(0,f.useEffect)(()=>{Y.current?.update({translateExtent:P,width:A,height:I,inversePan:b,pannable:x,zoomStep:w,zoomable:v})},[x,v,b,w,P,A,I]);let W=g?(0,f.useCallback)((e,t)=>{g(e,j.getState().nodeLookup.get(t).internals.userNode)},[]):void 0,K=y??R["minimap.ariaLabel"];return(0,h.jsx)(rx,{position:p,style:{...e,"--xy-minimap-background-color-props":"string"==typeof l?l:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof c?c:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof d?d:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof u?u*$:void 0,"--xy-minimap-node-background-color-props":"string"==typeof r?r:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof n?n:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof i?i:void 0},className:S(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:(0,h.jsxs)("svg",{width:D,height:z,viewBox:`${V} ${B} ${H} ${F}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:_,onClick:m?e=>{let[t,n]=Y.current?.pointer(e)||[0,0];m(e,{x:t,y:n})}:void 0,children:[K&&(0,h.jsx)("title",{id:Z,children:K}),(0,h.jsx)(aS,{onClick:W,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:i,nodeComponent:s}),(0,h.jsx)("path",{className:"react-flow__minimap-mask",d:`M${V-L},${B-L}h${H+2*L}v${F+2*L}h${-H-2*L}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}aP.displayName="MiniMap";let aA=(0,f.memo)(aP),aI=(d.Line,d.Handle,(0,b.Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]));var aR=n(93862);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let aD=(0,b.Z)("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);var az=n(51504);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a$=(0,b.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),aT=(0,b.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),aO=(0,b.Z)("GitFork",[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]]);var aL=n(67952);let aV=(0,f.memo)(({data:e,selected:t})=>{let{content:n={},title:r,subtitle:o,type:a,stats:i={sent:0,readRate:"0%"}}=e,s=!!n.imageUrl;return(0,h.jsxs)("div",{className:(0,aL.cn)("w-[350px] shadow-lg rounded-xl bg-white border-2 transition-all",t?"border-blue-500 ring-2 ring-blue-200":"border-transparent","hover:border-blue-300"),children:["trigger"!==a&&h.jsx(oa,{type:"target",position:c.Left,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),(0,h.jsxs)("div",{className:"p-4 border-b flex items-start gap-3 bg-slate-50/50 rounded-t-xl",children:[h.jsx("div",{className:(0,aL.cn)("p-2 rounded-lg",s?"bg-pink-100 text-pink-600":"bg-blue-100 text-blue-600"),children:s?h.jsx(aI,{size:20}):h.jsx(aR.Z,{size:20})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-semibold text-slate-800",children:r&&"Cart\xf5es"!==r?r:s?"Cart\xf5es":"Bot\xf5es"}),h.jsx("p",{className:"text-xs text-slate-500",children:o&&"Envie cart\xf5es interativos."!==o?o:s?"Envie cart\xf5es interativos.":"Enviar mensagem com bot\xf5es"})]})]}),(0,h.jsxs)("div",{className:"p-4 space-y-4",children:[(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center py-2 border-b border-dashed",children:[(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase",children:"Envios"}),h.jsx("p",{className:"text-xl font-bold text-blue-600",children:i.sent})]}),(0,h.jsxs)("div",{children:[h.jsx("p",{className:"text-xs text-slate-400 font-medium uppercase",children:"Leituras"}),h.jsx("p",{className:"text-xl font-bold text-blue-600",children:i.readRate})]})]}),(0,h.jsxs)("div",{className:"bg-slate-100 p-3 rounded-lg relative overflow-hidden group",children:[n.imageUrl?h.jsx("div",{className:"aspect-square w-full rounded-md overflow-hidden bg-slate-200 mb-3 relative",children:h.jsx("img",{src:n.imageUrl,alt:"Preview",className:"object-cover w-full h-full"})}):null,h.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap leading-relaxed",children:n.message||"Escreva sua mensagem aqui..."}),n.buttons&&n.buttons.length>0?h.jsx("div",{className:"mt-3 space-y-2",children:n.buttons.map((e,t)=>(0,h.jsxs)(m.z,{variant:"outline",className:"w-full justify-between bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:text-blue-700 h-10",children:[h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider truncate max-w-[200px]",children:e.label||"Bot\xe3o"}),e.stats&&h.jsx(g.C,{variant:"secondary",className:"bg-blue-200 text-blue-700 hover:bg-blue-300",children:e.stats})]},t))}):n.cta?.enabled&&h.jsx("div",{className:"mt-3",children:h.jsx(m.z,{variant:"outline",className:"w-full justify-between bg-blue-50 text-blue-600 border-blue-200 hover:bg-blue-100 hover:text-blue-700 h-10",children:h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:n.cta.text||"Bot\xe3o"})})})]}),(0,h.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[h.jsx("span",{className:"text-xs font-medium text-slate-400",children:"Pr\xf3ximo passo"}),h.jsx("div",{className:"bg-blue-500 w-3 h-3 rounded-full shadow-sm"})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-2"})]})}),aB=(0,f.memo)(({data:e,selected:t})=>{let{type:n="DM_RECEIVED",config:r={keyword:"",matchType:"exact"}}=e,o="DM_RECEIVED"===n?h.jsx(w,{size:18,fill:"currentColor"}):"STORY_REPLY"===n?h.jsx(aI,{size:18}):"STORY_MENTION"===n||"trigger_mention"===n?h.jsx(aD,{size:18}):"FEED_COMMENT"===n||"trigger_comment"===n?h.jsx(az.Z,{size:18}):h.jsx(w,{size:18,fill:"currentColor"});return(0,h.jsxs)("div",{className:(0,aL.cn)("w-[300px] shadow-lg rounded-xl bg-white border-2 transition-all overflow-hidden",t?"border-emerald-500 ring-2 ring-emerald-100":"border-emerald-100","hover:border-emerald-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-emerald-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-3"}),(0,h.jsxs)("div",{className:"p-4 bg-emerald-50 border-b border-emerald-100 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-emerald-500 text-white rounded-lg shadow-sm",children:o}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-bold text-emerald-900 text-sm",children:"DM_RECEIVED"===n?"Mensagem Direta":"STORY_REPLY"===n?"Resposta de Story":"trigger_mention"===n?"Men\xe7\xe3o no Story":"trigger_comment"===n?"Coment\xe1rio em Post":"Gatilho"}),h.jsx("p",{className:"text-[10px] text-emerald-600 font-medium uppercase tracking-wider italic",children:"Gatilho de Entrada"})]})]}),(0,h.jsxs)("div",{className:"p-4 space-y-3",children:[(0,h.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[h.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Se o usu\xe1rio enviar:"}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[h.jsx(g.C,{variant:"outline",className:"bg-white border-emerald-200 text-emerald-700 font-mono",children:r.keyword||"Qualquer palavra"}),(0,h.jsxs)("span",{className:"text-[10px] text-slate-400",children:["(","exact"===r.matchType?"Exato":"Cont\xe9m",")"]})]})]}),(0,h.jsxs)("div",{className:"flex justify-end items-center gap-2 pt-2",children:[h.jsx("span",{className:"text-xs font-medium text-slate-400",children:"Iniciar fluxo"}),h.jsx("div",{className:"bg-emerald-500 w-3 h-3 rounded-full shadow-sm"})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-emerald-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-3"})]})}),aH=(0,f.memo)(({data:e,selected:t})=>(0,h.jsxs)("div",{className:(0,aL.cn)("w-[280px] shadow-sm rounded-xl bg-white border transition-all p-6",t?"border-blue-500 ring-2 ring-blue-200":"border-slate-100","hover:border-blue-300"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-3 bg-slate-100 rounded-full text-slate-600",children:h.jsx(w,{size:20,fill:"currentColor",className:"ml-0.5"})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800",children:"In\xedcio"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Fluxo Visual"})]})]}),(0,h.jsxs)("p",{className:"text-xs text-slate-400 mb-6 leading-relaxed",children:["Connecte um ",h.jsx("span",{className:"text-emerald-600 font-bold",children:"Gatilho"})," ou inicie a l\xf3gica aqui."]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-3"})]})),aF=(0,f.memo)(({data:e,selected:t})=>(0,h.jsxs)("div",{className:(0,aL.cn)("w-[280px] shadow-sm rounded-xl bg-white border transition-all",t?"border-blue-500 ring-2 ring-blue-200":"border-slate-200","hover:border-blue-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),(0,h.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-lg",children:h.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold text-xs",children:""})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-semibold text-slate-800",children:"Aguardar"}),h.jsx("p",{className:"text-xs text-slate-500",children:e.time||"Definir tempo"})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-2"})]})),aZ=(0,f.memo)(({data:e,selected:t})=>(0,h.jsxs)("div",{className:(0,aL.cn)("w-[280px] shadow-sm rounded-xl bg-white border transition-all",t?"border-blue-500 ring-2 ring-blue-200":"border-slate-200","hover:border-blue-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),(0,h.jsxs)("div",{className:"p-4 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg",children:h.jsx("div",{className:"w-5 h-5 flex items-center justify-center font-bold text-xs",children:"\uD83C\uDFF7"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-slate-800",children:"Tags"}),h.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(e.tags||["TAG_DEMO"]).map((e,t)=>h.jsx(g.C,{variant:"secondary",className:"text-[10px] px-1 h-5",children:e},t))})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-2"})]})),aq=(0,f.memo)(({data:e,selected:t})=>(0,h.jsxs)("div",{className:(0,aL.cn)("w-[300px] shadow-lg rounded-xl bg-white border-2 transition-all overflow-hidden",t?"border-purple-500 ring-2 ring-purple-100":"border-purple-100","hover:border-purple-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-purple-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),(0,h.jsxs)("div",{className:"p-4 bg-purple-50 border-b border-purple-100 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-purple-500 text-white rounded-lg shadow-sm",children:h.jsx(a$,{size:18})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-bold text-purple-900 text-sm",children:"Resposta IA"}),h.jsx("p",{className:"text-[10px] text-purple-600 font-medium uppercase",children:"Intelig\xeancia Artificial"})]})]}),(0,h.jsxs)("div",{className:"p-4 space-y-3",children:[(0,h.jsxs)("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:[h.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-1",children:"Prompt / Instru\xe7\xe3o:"}),(0,h.jsxs)("p",{className:"text-xs text-slate-700 italic truncate italic",children:['"',e.prompt||"Responda educadamente...",'"']})]}),(0,h.jsxs)("div",{className:"flex justify-end items-center gap-2 pt-2",children:[h.jsx("span",{className:"text-xs font-medium text-slate-400",children:"Pr\xf3ximo passo"}),h.jsx("div",{className:"bg-purple-500 w-3 h-3 rounded-full shadow-sm"})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-purple-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-2"})]})),aY=(0,f.memo)(({data:e,selected:t})=>(0,h.jsxs)("div",{className:(0,aL.cn)("w-[300px] shadow-lg rounded-xl bg-white border-2 transition-all overflow-hidden",t?"border-slate-500 ring-2 ring-slate-100":"border-slate-200","hover:border-slate-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-slate-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),(0,h.jsxs)("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex items-center gap-3",children:[h.jsx("div",{className:"p-2 bg-slate-700 text-white rounded-lg shadow-sm",children:h.jsx(aT,{size:18})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-bold text-slate-800 text-sm",children:"Webhook API"}),h.jsx("p",{className:"text-[10px] text-slate-500 font-medium uppercase",children:"Integra\xe7\xe3o Externa"})]})]}),(0,h.jsxs)("div",{className:"p-4 space-y-2",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 px-2 py-1 rounded text-[10px] font-mono text-slate-600 truncate",children:[h.jsx(g.C,{variant:"outline",className:"h-4 px-1 text-[8px] bg-white",children:"POST"}),e.url||"https://sua-api.com/endpoint"]}),(0,h.jsxs)("div",{className:"flex justify-end items-center gap-2 pt-2",children:[h.jsx("span",{className:"text-xs font-medium text-slate-400",children:"Pr\xf3ximo passo"}),h.jsx("div",{className:"bg-slate-500 w-3 h-3 rounded-full shadow-sm"})]})]}),h.jsx(oa,{type:"source",position:c.Right,className:"!bg-slate-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -mr-2"})]})),aW=(0,f.memo)(({data:e,selected:t})=>{let n=e.condition||{},r=n.value?`${"tag"===n.field?"Etiqueta":"Campo"} "${n.value}"`:"Configurar condi\xe7\xe3o";return(0,h.jsxs)("div",{className:(0,aL.cn)("w-[300px] shadow-lg rounded-xl bg-white border-2 transition-all font-sans",t?"border-blue-500 ring-2 ring-blue-200":"border-slate-200","hover:border-blue-300"),children:[h.jsx(oa,{type:"target",position:c.Left,className:"!bg-blue-500 !w-4 !h-4 !border-4 !border-white !shadow-sm -ml-2"}),h.jsx("div",{className:"p-4 border-b border-slate-100 pb-3",children:(0,h.jsxs)("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:h.jsx(aO,{size:20,className:"rotate-90"})}),(0,h.jsxs)("div",{children:[h.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Condicional"}),h.jsx("p",{className:"text-[10px] text-slate-500",children:"Avalia\xe7\xe3o condicional."})]})]})}),(0,h.jsxs)("div",{className:"p-4 space-y-4 pt-3",children:[h.jsx("p",{className:"text-[10px] text-slate-400 text-center",children:"Estamos coletando m\xe9tricas deste bloco..."}),h.jsx("div",{className:"bg-slate-50 border border-slate-100 rounded-lg py-3 px-2 text-center",children:h.jsx("p",{className:"text-sm font-medium text-slate-700 truncate",children:r})}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("div",{className:"relative bg-emerald-50 border border-emerald-100 rounded-md h-9 flex items-center justify-center",children:[h.jsx("span",{className:"text-emerald-600 font-bold text-xs tracking-wider",children:"SIM"}),h.jsx(oa,{type:"source",position:c.Right,id:"true",className:"!bg-blue-500 !w-3 !h-3 !border-2 !border-white !right-[-6px] !top-1/2 !-translate-y-1/2"})]}),(0,h.jsxs)("div",{className:"relative bg-rose-50 border border-rose-100 rounded-md h-9 flex items-center justify-center",children:[h.jsx("span",{className:"text-rose-600 font-bold text-xs tracking-wider",children:"N\xc3O"}),h.jsx(oa,{type:"source",position:c.Right,id:"false",className:"!bg-blue-500 !w-3 !h-3 !border-2 !border-white !right-[-6px] !top-1/2 !-translate-y-1/2"})]})]})]})]})}),aK=(0,b.Z)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var aX=n(25666);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let aU=(0,b.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),aG=(0,b.Z)("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function aQ(){let e=(e,t)=>{e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"};return(0,h.jsxs)("aside",{className:"w-64 border-r bg-white h-full flex flex-col",children:[(0,h.jsxs)("div",{className:"p-4 border-b",children:[h.jsx("h3",{className:"font-semibold text-slate-800",children:"Gatilhos"}),h.jsx("p",{className:"text-xs text-slate-500",children:"Quando a automa\xe7\xe3o inicia"})]}),(0,h.jsxs)("div",{className:"p-4 space-y-3 border-b",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-emerald-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"trigger"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-md",children:h.jsx(w,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Palavra-Chave"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"DM ou Story"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-emerald-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"trigger_comment"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-md",children:h.jsx(az.Z,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Coment\xe1rio"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Post ou Reels"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-emerald-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"trigger_mention"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-md",children:h.jsx(aD,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Men\xe7\xe3o Story"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Quando te marcam"})]})]})]}),h.jsx("div",{className:"p-4 bg-slate-50/50 border-b",children:h.jsx("h3",{className:"font-semibold text-slate-700 text-xs uppercase tracking-wider",children:"A\xe7\xf5es e L\xf3gica"})}),(0,h.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-blue-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"instagram"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-md",children:h.jsx(aR.Z,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Mensagem"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Enviar texto/m\xeddia"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-blue-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"delay"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-md",children:h.jsx(aX.Z,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Aguardar"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Delay temporal"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-blue-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"tag"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-md",children:h.jsx(aU,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Tags"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Adicionar/Remover"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-blue-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"condition"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-cyan-100 text-cyan-600 rounded-md",children:h.jsx(aG,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Condicional"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Sim ou N\xe3o"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-purple-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"ai_response"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-md",children:h.jsx(a$,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Resposta IA"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"ChatGPT Inteligente"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg cursor-grab hover:border-slate-400 hover:shadow-sm transition-all group",onDragStart:t=>e(t,"webhook"),draggable:!0,children:[h.jsx(aK,{className:"w-4 h-4 text-slate-300 group-hover:text-slate-400"}),h.jsx("div",{className:"p-2 bg-slate-100 text-slate-600 rounded-md",children:h.jsx(aT,{className:"w-4 h-4"})}),(0,h.jsxs)("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Webhook API"}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Enviar para seu Server"})]})]})]}),h.jsx("div",{className:"p-4 bg-slate-50 border-t text-center",children:h.jsx("p",{className:"text-xs text-slate-400",children:"Creatye Flow Builder v2.0"})})]})}var aJ=n(61687),a0=n(65723);let a1=aJ.fC;aJ.xz,aJ.x8;let a2=aJ.h_,a4=f.forwardRef(({className:e,...t},n)=>h.jsx(aJ.aV,{className:(0,aL.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));a4.displayName=aJ.aV.displayName;let a3=(0,a0.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),a5=f.forwardRef(({side:e="right",className:t,children:n,...r},o)=>(0,h.jsxs)(a2,{children:[h.jsx(a4,{}),(0,h.jsxs)(aJ.VY,{ref:o,className:(0,aL.cn)(a3({side:e}),t),...r,children:[(0,h.jsxs)(aJ.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[h.jsx(_.Z,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));a5.displayName=aJ.VY.displayName;let a6=({className:e,...t})=>h.jsx("div",{className:(0,aL.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});a6.displayName="SheetHeader";let a7=f.forwardRef(({className:e,...t},n)=>h.jsx(aJ.Dx,{ref:n,className:(0,aL.cn)("text-lg font-semibold text-foreground",e),...t}));a7.displayName=aJ.Dx.displayName;let a8=f.forwardRef(({className:e,...t},n)=>h.jsx(aJ.dk,{ref:n,className:(0,aL.cn)("text-sm text-muted-foreground",e),...t}));a8.displayName=aJ.dk.displayName;var a9=n(82984),ie=n(54278),it=n(44152),ir=n(91740),io=n(66864),ia=n(23423),ii=n(85834),is=n(81774),il=n(1502),ic=n(56283),id=n(83215),iu="rovingFocusGroup.onEntryFocus",ih={bubbles:!1,cancelable:!0},ip="RovingFocusGroup",[im,ig,ix]=(0,io.B)(ip),[iv,iy]=(0,ir.b)(ip,[ix]),[ib,iw]=iv(ip),iN=f.forwardRef((e,t)=>(0,h.jsx)(im.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(im.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,h.jsx)(ij,{...e,ref:t})})}));iN.displayName=ip;var ij=f.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...u}=e,p=f.useRef(null),m=(0,ia.e)(t,p),g=(0,id.gm)(a),[x,v]=(0,ic.T)({prop:i,defaultProp:s??null,onChange:l,caller:ip}),[y,b]=f.useState(!1),w=(0,il.W)(c),N=ig(n),j=f.useRef(!1),[_,E]=f.useState(0);return f.useEffect(()=>{let e=p.current;if(e)return e.addEventListener(iu,w),()=>e.removeEventListener(iu,w)},[w]),(0,h.jsx)(ib,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:x,onItemFocus:f.useCallback(e=>v(e),[v]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:f.useCallback(()=>E(e=>e-1),[]),children:(0,h.jsx)(is.WV.div,{tabIndex:y||0===_?-1:0,"data-orientation":r,...u,ref:m,style:{outline:"none",...e.style},onMouseDown:(0,it.Mj)(e.onMouseDown,()=>{j.current=!0}),onFocus:(0,it.Mj)(e.onFocus,e=>{let t=!j.current;if(e.target===e.currentTarget&&t&&!y){let t=new CustomEvent(iu,ih);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=N().filter(e=>e.focusable);iS([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),d)}}j.current=!1}),onBlur:(0,it.Mj)(e.onBlur,()=>b(!1))})})}),i_="RovingFocusGroupItem",iE=f.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:i,...s}=e,l=(0,ii.M)(),c=a||l,d=iw(i_,n),u=d.currentTabStopId===c,p=ig(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:x}=d;return f.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),(0,h.jsx)(im.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:(0,h.jsx)(is.WV.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...s,ref:t,onMouseDown:(0,it.Mj)(e.onMouseDown,e=>{r?d.onItemFocus(c):e.preventDefault()}),onFocus:(0,it.Mj)(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:(0,it.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){d.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let o=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(o))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)))return ik[o]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();let r=n.indexOf(e.currentTarget);n=d.loop?function(e,t){return e.map((n,r)=>e[(t+r)%e.length])}(n,r+1):n.slice(r+1)}setTimeout(()=>iS(n))}}),children:"function"==typeof i?i({isCurrentTabStop:u,hasTabStop:null!=x}):i})})});iE.displayName=i_;var ik={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iS(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var iC=n(58451),iM="Tabs",[iP,iA]=(0,ir.b)(iM,[iy]),iI=iy(),[iR,iD]=iP(iM),iz=f.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:s,activationMode:l="automatic",...c}=e,d=(0,id.gm)(s),[u,f]=(0,ic.T)({prop:r,onChange:o,defaultProp:a??"",caller:iM});return(0,h.jsx)(iR,{scope:n,baseId:(0,ii.M)(),value:u,onValueChange:f,orientation:i,dir:d,activationMode:l,children:(0,h.jsx)(is.WV.div,{dir:d,"data-orientation":i,...c,ref:t})})});iz.displayName=iM;var i$="TabsList",iT=f.forwardRef((e,t)=>{let{__scopeTabs:n,loop:r=!0,...o}=e,a=iD(i$,n),i=iI(n);return(0,h.jsx)(iN,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:(0,h.jsx)(is.WV.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});iT.displayName=i$;var iO="TabsTrigger",iL=f.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=iD(iO,n),s=iI(n),l=iH(i.baseId,r),c=iF(i.baseId,r),d=r===i.value;return(0,h.jsx)(iE,{asChild:!0,...s,focusable:!o,active:d,children:(0,h.jsx)(is.WV.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...a,ref:t,onMouseDown:(0,it.Mj)(e.onMouseDown,e=>{o||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(r)}),onKeyDown:(0,it.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(r)}),onFocus:(0,it.Mj)(e.onFocus,()=>{let e="manual"!==i.activationMode;d||o||!e||i.onValueChange(r)})})})});iL.displayName=iO;var iV="TabsContent",iB=f.forwardRef((e,t)=>{let{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,s=iD(iV,n),l=iH(s.baseId,r),c=iF(s.baseId,r),d=r===s.value,u=f.useRef(d);return f.useEffect(()=>{let e=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(iC.z,{present:o||d,children:({present:n})=>(0,h.jsx)(is.WV.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:c,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:n&&a})})});function iH(e,t){return`${e}-trigger-${t}`}function iF(e,t){return`${e}-content-${t}`}iB.displayName=iV;let iZ=f.forwardRef(({className:e,...t},n)=>h.jsx(iT,{ref:n,className:(0,aL.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));iZ.displayName=iT.displayName;let iq=f.forwardRef(({className:e,...t},n)=>h.jsx(iL,{ref:n,className:(0,aL.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));iq.displayName=iL.displayName;let iY=f.forwardRef(({className:e,...t},n)=>h.jsx(iB,{ref:n,className:(0,aL.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));iY.displayName=iB.displayName;var iW=n(62995),iK=n(67136),iX=n(44513),iU=n(7956),iG=n(28669),iQ=n(86511),iJ=n(7906),i0=n(33516),i1="Popover",[i2,i4]=(0,ir.b)(i1,[iU.D7]),i3=(0,iU.D7)(),[i5,i6]=i2(i1),i7=e=>{let{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,s=i3(t),l=f.useRef(null),[c,d]=f.useState(!1),[u,p]=(0,ic.T)({prop:r,defaultProp:o??!1,onChange:a,caller:i1});return(0,h.jsx)(iU.fC,{...s,children:(0,h.jsx)(i5,{scope:t,contentId:(0,ii.M)(),triggerRef:l,open:u,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:c,onCustomAnchorAdd:f.useCallback(()=>d(!0),[]),onCustomAnchorRemove:f.useCallback(()=>d(!1),[]),modal:i,children:n})})};i7.displayName=i1;var i8="PopoverAnchor";f.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=i6(i8,n),a=i3(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:s}=o;return f.useEffect(()=>(i(),()=>s()),[i,s]),(0,h.jsx)(iU.ee,{...a,...r,ref:t})}).displayName=i8;var i9="PopoverTrigger",se=f.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=i6(i9,n),a=i3(n),i=(0,ia.e)(t,o.triggerRef),s=(0,h.jsx)(is.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":sh(o.open),...r,ref:i,onClick:(0,it.Mj)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?s:(0,h.jsx)(iU.ee,{asChild:!0,...a,children:s})});se.displayName=i9;var st="PopoverPortal",[sn,sr]=i2(st,{forceMount:void 0}),so=e=>{let{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=i6(st,t);return(0,h.jsx)(sn,{scope:t,forceMount:n,children:(0,h.jsx)(iC.z,{present:n||a.open,children:(0,h.jsx)(iG.h,{asChild:!0,container:o,children:r})})})};so.displayName=st;var sa="PopoverContent",si=f.forwardRef((e,t)=>{let n=sr(sa,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=i6(sa,e.__scopePopover);return(0,h.jsx)(iC.z,{present:r||a.open,children:a.modal?(0,h.jsx)(sl,{...o,ref:t}):(0,h.jsx)(sc,{...o,ref:t})})});si.displayName=sa;var ss=(0,iQ.Z8)("PopoverContent.RemoveScroll"),sl=f.forwardRef((e,t)=>{let n=i6(sa,e.__scopePopover),r=f.useRef(null),o=(0,ia.e)(t,r),a=f.useRef(!1);return f.useEffect(()=>{let e=r.current;if(e)return(0,iJ.Ry)(e)},[]),(0,h.jsx)(i0.Z,{as:ss,allowPinchZoom:!0,children:(0,h.jsx)(sd,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,it.Mj)(e.onCloseAutoFocus,e=>{e.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:(0,it.Mj)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;a.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,it.Mj)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),sc=f.forwardRef((e,t)=>{let n=i6(sa,e.__scopePopover),r=f.useRef(!1),o=f.useRef(!1);return(0,h.jsx)(sd,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(r.current||n.triggerRef.current?.focus(),t.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(r.current=!0,"pointerdown"!==t.detail.originalEvent.type||(o.current=!0));let a=t.target;n.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&o.current&&t.preventDefault()}})}),sd=f.forwardRef((e,t)=>{let{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...u}=e,f=i6(sa,n),p=i3(n);return(0,iK.EW)(),(0,h.jsx)(iX.M,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:(0,h.jsx)(iW.XB,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:d,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:(0,h.jsx)(iU.VY,{"data-state":sh(f.open),role:"dialog",id:f.contentId,...p,...u,ref:t,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),su="PopoverClose";function sh(e){return e?"open":"closed"}f.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=i6(su,n);return(0,h.jsx)(is.WV.button,{type:"button",...r,ref:t,onClick:(0,it.Mj)(e.onClick,()=>o.onOpenChange(!1))})}).displayName=su,f.forwardRef((e,t)=>{let{__scopePopover:n,...r}=e,o=i3(n);return(0,h.jsx)(iU.Eh,{...o,...r,ref:t})}).displayName="PopoverArrow";let sf=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>h.jsx(so,{children:h.jsx(si,{ref:o,align:t,sideOffset:n,className:(0,aL.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));sf.displayName=si.displayName;var sp=/[\\\/_+.#"@\[\(\{&]/,sm=/[\\\/_+.#"@\[\(\{&]/g,sg=/[\s-]/,sx=/[\s-]/g;function sv(e){return e.toLowerCase().replace(sx," ")}var sy=n(82455),sb='[cmdk-group=""]',sw='[cmdk-group-items=""]',sN='[cmdk-item=""]',sj=`${sN}:not([aria-disabled="true"])`,s_="cmdk-item-select",sE="data-value",sk=(e,t,n)=>(function(e,t,n){return function e(t,n,r,o,a,i,s){if(i===n.length)return a===t.length?1:.99;var l=`${a},${i}`;if(void 0!==s[l])return s[l];for(var c,d,u,h,f=o.charAt(i),p=r.indexOf(f,a),m=0;p>=0;)(c=e(t,n,r,o,p+1,i+1,s))>m&&(p===a?c*=1:sp.test(t.charAt(p-1))?(c*=.8,(u=t.slice(a,p-1).match(sm))&&a>0&&(c*=Math.pow(.999,u.length))):sg.test(t.charAt(p-1))?(c*=.9,(h=t.slice(a,p-1).match(sx))&&a>0&&(c*=Math.pow(.999,h.length))):(c*=.17,a>0&&(c*=Math.pow(.999,p-a))),t.charAt(p)!==n.charAt(i)&&(c*=.9999)),(c<.1&&r.charAt(p-1)===o.charAt(i+1)||o.charAt(i+1)===o.charAt(i)&&r.charAt(p-1)!==o.charAt(i))&&.1*(d=e(t,n,r,o,p+1,i+2,s))>c&&(c=.1*d),c>m&&(m=c),p=r.indexOf(f,p+1);return s[l]=m,m}(e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,t,sv(e),sv(t),0,0,{})})(e,t,n),sS=f.createContext(void 0),sC=()=>f.useContext(sS),sM=f.createContext(void 0),sP=()=>f.useContext(sM),sA=f.createContext(void 0),sI=f.forwardRef((e,t)=>{let n=sH(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=sH(()=>new Set),o=sH(()=>new Map),a=sH(()=>new Map),i=sH(()=>new Set),s=sV(e),{label:l,children:c,value:d,onValueChange:u,filter:h,shouldFilter:p,loop:m,disablePointerSelection:g=!1,vimBindings:x=!0,...v}=e,y=(0,ii.M)(),b=(0,ii.M)(),w=(0,ii.M)(),N=f.useRef(null),j=sq();sB(()=>{if(void 0!==d){let e=d.trim();n.current.value=e,_.emit()}},[d]),sB(()=>{j(6,P)},[]);let _=f.useMemo(()=>({subscribe:e=>(i.current.add(e),()=>i.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var o,a,i,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)M(),S(),j(1,C);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(w);e?e.focus():null==(o=document.getElementById(y))||o.focus()}if(j(7,()=>{var e;n.current.selectedItemId=null==(e=A())?void 0:e.id,_.emit()}),r||j(5,P),(null==(a=s.current)?void 0:a.value)!==void 0){null==(l=(i=s.current).onValueChange)||l.call(i,null!=t?t:"");return}}_.emit()}},emit:()=>{i.current.forEach(e=>e())}}),[]),E=f.useMemo(()=>({value:(e,t,r)=>{var o;t!==(null==(o=a.current.get(e))?void 0:o.value)&&(a.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,k(t,r)),j(2,()=>{S(),_.emit()}))},item:(e,t)=>(r.current.add(e),t&&(o.current.has(t)?o.current.get(t).add(e):o.current.set(t,new Set([e]))),j(3,()=>{M(),S(),n.current.value||C(),_.emit()}),()=>{a.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=A();j(4,()=>{M(),(null==t?void 0:t.getAttribute("id"))===e&&C(),_.emit()})}),group:e=>(o.current.has(e)||o.current.set(e,new Set),()=>{a.current.delete(e),o.current.delete(e)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:y,inputId:w,labelId:b,listInnerRef:N}),[]);function k(e,t){var r,o;let a=null!=(o=null==(r=s.current)?void 0:r.filter)?o:sk;return e?a(e,n.current.search,t):0}function S(){if(!n.current.search||!1===s.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=o.current.get(n),a=0;r.forEach(t=>{a=Math.max(e.get(t),a)}),t.push([n,a])});let r=N.current;I().sort((t,n)=>{var r,o;let a=t.getAttribute("id"),i=n.getAttribute("id");return(null!=(r=e.get(i))?r:0)-(null!=(o=e.get(a))?o:0)}).forEach(e=>{let t=e.closest(sw);t?t.appendChild(e.parentElement===t?e:e.closest(`${sw} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${sw} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=null==(t=N.current)?void 0:t.querySelector(`${sb}[${sE}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)})}function C(){let e=I().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(sE);_.setState("value",t||void 0)}function M(){var e,t,i,l;if(!n.current.search||!1===s.current.shouldFilter){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let c=0;for(let o of r.current){let r=k(null!=(t=null==(e=a.current.get(o))?void 0:e.value)?t:"",null!=(l=null==(i=a.current.get(o))?void 0:i.keywords)?l:[]);n.current.filtered.items.set(o,r),r>0&&c++}for(let[e,t]of o.current)for(let r of t)if(n.current.filtered.items.get(r)>0){n.current.filtered.groups.add(e);break}n.current.filtered.count=c}function P(){var e,t,n;let r=A();r&&((null==(e=r.parentElement)?void 0:e.firstChild)===r&&(null==(n=null==(t=r.closest(sb))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),r.scrollIntoView({block:"nearest"}))}function A(){var e;return null==(e=N.current)?void 0:e.querySelector(`${sN}[aria-selected="true"]`)}function I(){var e;return Array.from((null==(e=N.current)?void 0:e.querySelectorAll(sj))||[])}function R(e){let t=I()[e];t&&_.setState("value",t.getAttribute(sE))}function D(e){var t;let n=A(),r=I(),o=r.findIndex(e=>e===n),a=r[o+e];null!=(t=s.current)&&t.loop&&(a=o+e<0?r[r.length-1]:o+e===r.length?r[0]:r[o+e]),a&&_.setState("value",a.getAttribute(sE))}function z(e){let t=A(),n=null==t?void 0:t.closest(sb),r;for(;n&&!r;)r=null==(n=e>0?function(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}(n,sb):function(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(n,sb))?void 0:n.querySelector(sj);r?_.setState("value",r.getAttribute(sE)):D(e)}let $=()=>R(I().length-1),T=e=>{e.preventDefault(),e.metaKey?$():e.altKey?z(1):D(1)},O=e=>{e.preventDefault(),e.metaKey?R(0):e.altKey?z(-1):D(-1)};return f.createElement(sy.WV.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=v.onKeyDown)||t.call(v,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||n))switch(e.key){case"n":case"j":x&&e.ctrlKey&&T(e);break;case"ArrowDown":T(e);break;case"p":case"k":x&&e.ctrlKey&&O(e);break;case"ArrowUp":O(e);break;case"Home":e.preventDefault(),R(0);break;case"End":e.preventDefault(),$();break;case"Enter":{e.preventDefault();let t=A();if(t){let e=new Event(s_);t.dispatchEvent(e)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:sW},l),sY(e,e=>f.createElement(sM.Provider,{value:_},f.createElement(sS.Provider,{value:E},e))))}),sR=f.forwardRef((e,t)=>{var n,r;let o=(0,ii.M)(),a=f.useRef(null),i=f.useContext(sA),s=sC(),l=sV(e),c=null!=(r=null==(n=l.current)?void 0:n.forceMount)?r:null==i?void 0:i.forceMount;sB(()=>{if(!c)return s.item(o,null==i?void 0:i.id)},[c]);let d=sZ(o,a,[e.value,e.children,a],e.keywords),u=sP(),h=sF(e=>e.value&&e.value===d.current),p=sF(e=>!!c||!1===s.filter()||!e.search||e.filtered.items.get(o)>0);function m(){var e,t;g(),null==(t=(e=l.current).onSelect)||t.call(e,d.current)}function g(){u.setState("value",d.current,!0)}if(f.useEffect(()=>{let t=a.current;if(!(!t||e.disabled))return t.addEventListener(s_,m),()=>t.removeEventListener(s_,m)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:x,value:v,onSelect:y,forceMount:b,keywords:w,...N}=e;return f.createElement(sy.WV.div,{ref:(0,ia.F)(a,t),...N,id:o,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||s.getDisablePointerSelection()?void 0:g,onClick:x?void 0:m},e.children)}),sD=f.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:o,...a}=e,i=(0,ii.M)(),s=f.useRef(null),l=f.useRef(null),c=(0,ii.M)(),d=sC(),u=sF(e=>!!o||!1===d.filter()||!e.search||e.filtered.groups.has(i));sB(()=>d.group(i),[]),sZ(i,s,[e.value,e.heading,l]);let h=f.useMemo(()=>({id:i,forceMount:o}),[o]);return f.createElement(sy.WV.div,{ref:(0,ia.F)(s,t),...a,"cmdk-group":"",role:"presentation",hidden:!u||void 0},n&&f.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),sY(e,e=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},f.createElement(sA.Provider,{value:h},e))))}),sz=f.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,o=f.useRef(null),a=sF(e=>!e.search);return n||a?f.createElement(sy.WV.div,{ref:(0,ia.F)(o,t),...r,"cmdk-separator":"",role:"separator"}):null}),s$=f.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,o=null!=e.value,a=sP(),i=sF(e=>e.search),s=sF(e=>e.selectedItemId),l=sC();return f.useEffect(()=>{null!=e.value&&a.setState("search",e.value)},[e.value]),f.createElement(sy.WV.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":s,id:l.inputId,type:"text",value:o?e.value:i,onChange:e=>{o||a.setState("search",e.target.value),null==n||n(e.target.value)}})}),sT=f.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...o}=e,a=f.useRef(null),i=f.useRef(null),s=sF(e=>e.selectedItemId),l=sC();return f.useEffect(()=>{if(i.current&&a.current){let e=i.current,t=a.current,n,r=new ResizeObserver(()=>{n=requestAnimationFrame(()=>{let n=e.offsetHeight;t.style.setProperty("--cmdk-list-height",n.toFixed(1)+"px")})});return r.observe(e),()=>{cancelAnimationFrame(n),r.unobserve(e)}}},[]),f.createElement(sy.WV.div,{ref:(0,ia.F)(a,t),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:l.listId},sY(e,e=>f.createElement("div",{ref:(0,ia.F)(i,l.listInnerRef),"cmdk-list-sizer":""},e)))}),sO=f.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:a,container:i,...s}=e;return f.createElement(aJ.fC,{open:n,onOpenChange:r},f.createElement(aJ.h_,{container:i},f.createElement(aJ.aV,{"cmdk-overlay":"",className:o}),f.createElement(aJ.VY,{"aria-label":e.label,"cmdk-dialog":"",className:a},f.createElement(sI,{ref:t,...s}))))}),sL=Object.assign(sI,{List:sT,Item:sR,Input:s$,Group:sD,Separator:sz,Dialog:sO,Empty:f.forwardRef((e,t)=>sF(e=>0===e.filtered.count)?f.createElement(sy.WV.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:f.forwardRef((e,t)=>{let{progress:n,children:r,label:o="Loading...",...a}=e;return f.createElement(sy.WV.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},sY(e,e=>f.createElement("div",{"aria-hidden":!0},e)))})});function sV(e){let t=f.useRef(e);return sB(()=>{t.current=e}),t}var sB=f.useEffect;function sH(e){let t=f.useRef();return void 0===t.current&&(t.current=e()),t}function sF(e){let t=sP(),n=()=>e(t.snapshot());return f.useSyncExternalStore(t.subscribe,n,n)}function sZ(e,t,n,r=[]){let o=f.useRef(),a=sC();return sB(()=>{var i;let s=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():o.current}})(),l=r.map(e=>e.trim());a.value(e,s,l),null==(i=t.current)||i.setAttribute(sE,s),o.current=s}),o}var sq=()=>{let[e,t]=f.useState(),n=sH(()=>new Map);return sB(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function sY({asChild:e,children:t},n){let r;return e&&f.isValidElement(t)?f.cloneElement("function"==typeof(r=t.type)?r(t.props):"render"in r?r.render(t.props):t,{ref:t.ref},n(t.props.children)):n(t)}var sW={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let sK=(0,b.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);n(48972);let sX=f.forwardRef(({className:e,...t},n)=>h.jsx(sL,{ref:n,className:(0,aL.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));sX.displayName=sL.displayName;let sU=f.forwardRef(({className:e,...t},n)=>(0,h.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(sK,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(sL.Input,{ref:n,className:(0,aL.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));sU.displayName=sL.Input.displayName;let sG=f.forwardRef(({className:e,...t},n)=>h.jsx(sL.List,{ref:n,className:(0,aL.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));sG.displayName=sL.List.displayName;let sQ=f.forwardRef((e,t)=>h.jsx(sL.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));sQ.displayName=sL.Empty.displayName;let sJ=f.forwardRef(({className:e,...t},n)=>h.jsx(sL.Group,{ref:n,className:(0,aL.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));sJ.displayName=sL.Group.displayName,f.forwardRef(({className:e,...t},n)=>h.jsx(sL.Separator,{ref:n,className:(0,aL.cn)("-mx-1 h-px bg-border",e),...t})).displayName=sL.Separator.displayName;let s0=f.forwardRef(({className:e,...t},n)=>h.jsx(sL.Item,{ref:n,className:(0,aL.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t}));s0.displayName=sL.Item.displayName;let s1={instagram:aV,start:aH,trigger:aB,trigger_comment:aB,trigger_mention:aB,delay:aF,tag:aZ,condition:aW,ai_response:aq,webhook:aY};function s2(){return h.jsx(ao,{children:h.jsx(s4,{})})}function s4(){let{id:e}=(0,p.useParams)(),t=(0,f.useRef)(null),{screenToFlowPosition:n}=rX(),[r,o]=(0,f.useState)(!0),[a,i]=(0,f.useState)(!1),[s,l]=(0,f.useState)(null),[c,d]=(0,f.useState)(!1),[b,S]=(0,f.useState)(null),[C,M,P]=function(e){let[t,n]=(0,f.useState)(e),r=(0,f.useCallback)(e=>n(t=>r$(e,t)),[]);return[t,n,r]}([]),[A,I,R]=function(e){let[t,n]=(0,f.useState)(e),r=(0,f.useCallback)(e=>n(t=>r$(e,t)),[]);return[t,n,r]}([]);(0,f.useEffect)(()=>{D()},[e]);let D=async()=>{let t=await fetch(`/api/workflows/${e}`);if(t.ok){let e=await t.json();if(l(e.workflow),e.workflow.flowDefinition){let t=e.workflow.flowDefinition;M(t.nodes||[]),I(t.edges||[])}else{let t=[],n=[],r=100;t.push({id:"start",type:"start",position:{x:r,y:200},data:{label:"In\xedcio"}}),r+=400,e.actions&&e.actions.length>0&&e.actions.forEach((o,a)=>{t.push({id:`action-${o.id}`,type:"instagram",position:{x:r,y:200},data:{title:"Mensagem",subtitle:"Resposta autom\xe1tica",type:"reply",content:{message:o.configJson.replyMessage,cta:o.configJson.cta,buttons:o.configJson.buttons||[],imageUrl:o.configJson.imageUrl},originalActionId:o.id}});let i=0===a?"start":`action-${e.actions[a-1].id}`;n.push({id:`e-${i}-action-${o.id}`,source:i,target:`action-${o.id}`,animated:!0,style:{stroke:"#94a3b8"}}),r+=450}),M(t),I(n)}}o(!1)},z=(0,f.useCallback)(e=>I(t=>nj({...e,animated:!0,style:{stroke:"#94a3b8",strokeWidth:1.5}},t)),[I]),$=(0,f.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),T=(0,f.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.getData("application/reactflow");if(void 0===t||!t)return;let r=n({x:e.clientX,y:e.clientY}),o={id:`${t}-${Date.now()}`,type:t,position:r,data:{label:`${t} node`}};"instagram"===t?o.data={title:"Mensagem",subtitle:"Enviar mensagem",type:"reply",content:{message:"",buttons:[]}}:"delay"===t?o.data={time:"1 minuto(s)"}:"tag"===t?o.data={tags:["NOVAS_TAGS"]}:"trigger"===t?o.data={type:"DM_RECEIVED",config:{keyword:"",matchType:"exact"}}:"trigger_comment"===t?o.data={type:"FEED_COMMENT",config:{keyword:"",matchType:"contains"}}:"trigger_mention"===t?o.data={type:"trigger_mention",config:{keyword:"",matchType:"contains"}}:"ai_response"===t?o.data={prompt:"Voc\xea \xe9 um assistente prestativo. Responda a d\xfavida do cliente baseada no contexto...",model:"gpt-4o-mini"}:"condition"===t?o.data={condition:{field:"tag",operator:"has_tag",value:""}}:"webhook"===t&&(o.data={url:"",method:"POST",headers:{}}),M(e=>e.concat(o))},[n,M]),O=(0,f.useCallback)((e,t)=>{S(t),d(!0)},[]),L=(0,f.useCallback)(()=>{d(!1),S(null)},[]),V=(e,t)=>{M(n=>n.map(n=>{if(n.id===e){let r={...n,data:{...n.data,...t}};return b?.id===e&&S(r),r}return n}))},B=(0,f.useCallback)(()=>{b&&(M(e=>e.filter(e=>e.id!==b.id)),I(e=>e.filter(e=>e.source!==b.id&&e.target!==b.id)),S(null),d(!1))},[b,M,I]),H=async(t=!1)=>{i(!0);try{let n={nodes:C,edges:A};if(!(await fetch(`/api/workflows/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({workflow:{status:t?"PUBLISHED":s.status,isActive:!!t||s.isActive,flowDefinition:n}})})).ok)throw Error("Erro ao salvar");x.Am.success(t?"Automa\xe7\xe3o Publicada!":"Salvo com sucesso!"),t&&l({...s,status:"PUBLISHED",flowDefinition:n})}catch(e){console.error(e),x.Am.error("Erro ao salvar")}finally{i(!1)}};return r?h.jsx("div",{className:"flex items-center justify-center h-screen text-muted-foreground",children:"Carregando editor..."}):(0,h.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col bg-slate-50",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-b bg-white shadow-sm z-10",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[h.jsx(k.default,{href:"/workflows",children:h.jsx(m.z,{variant:"ghost",size:"icon",children:h.jsx(v.Z,{className:"w-5 h-5 text-slate-500"})})}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-800",children:s?.title}),h.jsx(g.C,{variant:s?.status==="PUBLISHED"?"success":"secondary",className:"text-xs",children:s?.status==="PUBLISHED"?"Publicado":"Rascunho"})]}),h.jsx("p",{className:"text-xs text-slate-500",children:s?.description||"Fluxo de automa\xe7\xe3o"})]})]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsxs)(m.z,{variant:"outline",onClick:()=>H(!1),disabled:a,className:"border-slate-200",children:[h.jsx(y.Z,{className:"w-4 h-4 mr-2"})," Salvar"]}),(0,h.jsxs)(m.z,{onClick:()=>H(!0),disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[h.jsx(w,{className:"w-4 h-4 mr-2"})," ",s?.status==="PUBLISHED"?"Atualizar":"Publicar"]})]})]}),(0,h.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[h.jsx(aQ,{}),h.jsx("div",{className:"flex-1 h-full relative",ref:t,children:(0,h.jsxs)(as,{nodes:C,edges:A,onNodesChange:P,onEdgesChange:R,onConnect:z,onNodeClick:O,onPaneClick:L,onDragOver:$,onDrop:T,nodeTypes:s1,fitView:!0,className:"bg-slate-50",children:[h.jsx(af,{color:"#e2e8f0",gap:20,size:1,variant:u.Dots}),h.jsx(aN,{className:"bg-white border-slate-200 shadow-sm text-slate-600"}),h.jsx(aA,{className:"border border-slate-200 shadow-sm rounded-lg overflow-hidden"})]})})]}),h.jsx(a1,{open:c,onOpenChange:d,children:(0,h.jsxs)(a5,{className:"w-[400px] sm:w-[450px] overflow-y-auto",children:[(0,h.jsxs)(a6,{className:"mb-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[h.jsx(a7,{children:b?.type==="instagram"?"Editar Mensagem":b?.type?.startsWith("trigger")?"Configurar Gatilho":b?.type==="ai_response"?"Configurar Intelig\xeancia Artificial":b?.type==="webhook"?"Configurar Webhook/API":b?.type==="delay"?"Editar Aguardar":b?.type==="tag"?"Editar Tags":b?.type==="condition"?"Editar Condi\xe7\xe3o":"Propriedades"}),h.jsx(m.z,{variant:"ghost",size:"icon",onClick:B,className:"text-red-500 hover:bg-red-50 hover:text-red-600",children:h.jsx(N.Z,{className:"w-4 h-4"})})]}),h.jsx(a8,{children:"Configure os detalhes deste bloco."})]}),b&&(0,h.jsxs)("div",{className:"space-y-6",children:["ai_response"===b.type&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Instru\xe7\xe3o da IA (Prompt)"}),h.jsx(ie.g,{placeholder:"Ex: Voc\xea \xe9 um vendedor da loja Creatye...",className:"min-h-[150px] bg-slate-50",value:b.data.prompt||"",onChange:e=>V(b.id,{prompt:e.target.value})}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"A IA usar\xe1 o hist\xf3rico da conversa para gerar uma resposta baseada nesta instru\xe7\xe3o."})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Modelo"}),(0,h.jsxs)("select",{className:"w-full p-2 bg-slate-50 border rounded-md text-sm",value:b.data.model||"gpt-4o-mini",onChange:e=>V(b.id,{model:e.target.value}),children:[h.jsx("option",{value:"gpt-4o-mini",children:"GPT-4o Mini (R\xe1pido/Barato)"}),h.jsx("option",{value:"gpt-4o",children:"GPT-4o (Poderoso)"})]})]})]}),"webhook"===b.type&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"URL do Endpoint"}),h.jsx(a9.I,{placeholder:"https://sua-api.com/webhooks",value:b.data.url||"",onChange:e=>V(b.id,{url:e.target.value}),className:"bg-slate-50"})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"M\xe9todo"}),h.jsx(iz,{defaultValue:b.data.method||"POST",onValueChange:e=>V(b.id,{method:e}),children:(0,h.jsxs)(iZ,{className:"grid w-full grid-cols-2 bg-slate-100",children:[h.jsx(iq,{value:"POST",children:"POST"}),h.jsx(iq,{value:"GET",children:"GET"})]})})]}),h.jsx("div",{className:"p-3 bg-amber-50 border border-amber-100 rounded-lg",children:(0,h.jsxs)("p",{className:"text-[10px] text-amber-700 leading-relaxed",children:[h.jsx("strong",{children:"Nota:"})," Enviaremos o ID do usu\xe1rio e o conte\xfado da \xfaltima intera\xe7\xe3o no corpo da requisi\xe7\xe3o (JSON)."]})})]}),("instagram"===b.type||b.type?.startsWith("trigger"))&&"ai_response"!==b.type&&"webhook"!==b.type&&(0,h.jsxs)(h.Fragment,{children:[b.type.startsWith("trigger")&&h.jsx("div",{className:"space-y-4 mb-6 pb-6 border-b border-dashed",children:(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Configura\xe7\xe3o de Gatilho"}),(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs text-slate-500",children:"Palavra-Chave"}),h.jsx(a9.I,{placeholder:"Ex: QUERO",value:b.data.config?.keyword||"",onChange:e=>V(b.id,{config:{...b.data.config,keyword:e.target.value}}),className:"bg-slate-50 font-mono uppercase"})]})]})}),"instagram"===b.type&&(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Mensagem"}),(0,h.jsxs)(i7,{children:[h.jsx(se,{asChild:!0,children:(0,h.jsxs)(m.z,{variant:"ghost",size:"sm",className:"h-6 gap-1 text-xs text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[h.jsx(j,{className:"w-3 h-3"})," Vari\xe1veis"]})}),h.jsx(sf,{className:"w-[200px] p-0",align:"end",children:(0,h.jsxs)(sX,{children:[h.jsx(sU,{placeholder:"Buscar vari\xe1vel..."}),(0,h.jsxs)(sG,{children:[h.jsx(sQ,{children:"Nenhuma vari\xe1vel."}),h.jsx(sJ,{heading:"Contato",children:["nome","username"].map(e=>h.jsx(s0,{onSelect:()=>{let t=b.data.content?.message||"";V(b.id,{content:{...b.data.content,message:t+` {${e}}`}})},children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]})})]})]}),h.jsx(ie.g,{className:"min-h-[120px] bg-slate-50 border-slate-200",placeholder:"Digite sua mensagem...",value:b.data.content?.message||"",onChange:e=>V(b.id,{content:{...b.data.content,message:e.target.value}})})]}),"instagram"===b.type&&(0,h.jsxs)("div",{className:"space-y-3 pt-6 border-t border-slate-100",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Imagem"}),(0,h.jsxs)(iz,{defaultValue:b.data.content?.imageUrl?.includes("supabase")?"upload":"url",children:[(0,h.jsxs)(iZ,{className:"grid w-full grid-cols-2 bg-slate-100",children:[h.jsx(iq,{value:"url",children:"URL Externa"}),h.jsx(iq,{value:"upload",children:"Upload"})]}),h.jsx(iY,{value:"url",children:h.jsx(a9.I,{className:"bg-slate-50",placeholder:"https://...",value:b.data.content?.imageUrl||"",onChange:e=>V(b.id,{content:{...b.data.content,imageUrl:e.target.value}})})}),h.jsx(iY,{value:"upload",children:(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[h.jsx(a9.I,{type:"file",accept:"image/*",className:"cursor-pointer bg-slate-50",onChange:async e=>{let t=e.target.files?.[0];if(!t)return;let n=new FormData;n.append("file",t),x.Am.promise(async()=>{let e=await fetch("/api/upload",{method:"POST",body:n}),t=await e.json();if(!e.ok)throw Error(t.error||"Erro no upload");return t},{loading:"Enviando imagem...",success:e=>(V(b.id,{content:{...b.data.content,imageUrl:e.url}}),"Imagem enviada com sucesso!"),error:e=>`${e.message}`})}}),b.data.content?.imageUrl&&(0,h.jsxs)("div",{className:"relative aspect-video w-full overflow-hidden rounded-md border bg-slate-100",children:[h.jsx("img",{src:b.data.content?.imageUrl,className:"h-full w-full object-contain"}),h.jsx(m.z,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:()=>V(b.id,{content:{...b.data.content,imageUrl:""}}),children:h.jsx(_.Z,{className:"w-3 h-3"})})]})]})})]})]}),"instagram"===b.type&&(0,h.jsxs)("div",{className:"pt-6 border-t border-slate-100 space-y-4",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Bot\xf5es"}),(b.data.content?.buttons||[]).map((e,t)=>(0,h.jsxs)("div",{className:"p-3 bg-slate-50 border border-slate-200 rounded-lg space-y-3 relative group",children:[h.jsx(m.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100",onClick:()=>{let e=[...b.data.content?.buttons||[]];e.splice(t,1),V(b.id,{content:{...b.data.content,buttons:e}})},children:h.jsx(N.Z,{className:"w-3 h-3"})}),h.jsx(a9.I,{placeholder:"Nome do bot\xe3o",value:e.label||"",onChange:e=>{let n=[...b.data.content?.buttons||[]];n[t]={...n[t],label:e.target.value},V(b.id,{content:{...b.data.content,buttons:n}})}}),h.jsx(a9.I,{className:"text-xs h-8",placeholder:"https://...",value:e.url||"",onChange:e=>{let n=[...b.data.content?.buttons||[]];n[t]={...n[t],url:e.target.value},V(b.id,{content:{...b.data.content,buttons:n}})}})]},t)),3>(b.data.content?.buttons?.length||0)&&(0,h.jsxs)(m.z,{variant:"outline",className:"w-full border-dashed",onClick:()=>{let e=[...b.data.content?.buttons||[]];e.push({label:"",url:"",type:"web_url"}),V(b.id,{content:{...b.data.content,buttons:e}})},children:[h.jsx(E.Z,{className:"w-4 h-4 mr-2"})," Adicionar bot\xe3o"]})]})]}),"delay"===b.type&&(0,h.jsxs)("div",{className:"space-y-4",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Tempo de espera"}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(a9.I,{type:"number",value:parseInt(b.data.time)||1,onChange:e=>{let t=b.data.time?.split(" ")?.[1]||"minuto(s)";t.includes("(")||(t+="(s)"),V(b.id,{time:`${e.target.value} ${t}`})}}),(0,h.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:b.data.time?.split(" ")?.[1]?.replace(/^(hora|minuto|dia|segundo)$/,"$1(s)")||"minuto(s)",onChange:e=>{let t=parseInt(b.data.time)||1;V(b.id,{time:`${t} ${e.target.value}`})},children:[h.jsx("option",{value:"segundo(s)",children:"Segundo(s)"}),h.jsx("option",{value:"minuto(s)",children:"Minuto(s)"}),h.jsx("option",{value:"hora(s)",children:"Hora(s)"}),h.jsx("option",{value:"dia(s)",children:"Dia(s)"})]})]})]}),"tag"===b.type&&(0,h.jsxs)("div",{className:"space-y-4",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Gerenciar Etiquetas"}),(0,h.jsxs)("div",{className:"space-y-2",children:[(b.data.tags||[]).map((e,t)=>(0,h.jsxs)("div",{className:"flex gap-2",children:[h.jsx(a9.I,{value:e,onChange:e=>{let n=[...b.data.tags||[]];n[t]=e.target.value,V(b.id,{tags:n})}}),h.jsx(m.z,{variant:"ghost",size:"icon",onClick:()=>{let e=[...b.data.tags||[]];e.splice(t,1),V(b.id,{tags:e})},children:h.jsx(N.Z,{className:"w-4 h-4 text-red-500"})})]},t)),(0,h.jsxs)(m.z,{variant:"outline",className:"w-full",onClick:()=>{let e=[...b.data.tags||[]];e.push("NOVA_TAG"),V(b.id,{tags:e})},children:[h.jsx(E.Z,{className:"w-4 h-4 mr-2"})," Adicionar Tag"]})]})]}),"condition"===b.type&&(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Tipo de Campo"}),(0,h.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm bg-slate-50",value:b.data.condition?.field||"tag",onChange:e=>V(b.id,{condition:{...b.data.condition,field:e.target.value}}),children:[h.jsx("option",{value:"tag",children:"Etiqueta"}),h.jsx("option",{value:"custom_field",children:"Campo Personalizado"}),h.jsx("option",{value:"follower_status",children:"Status de Seguidor"}),h.jsx("option",{value:"contact_score",children:"Pontua\xe7\xe3o do Contato"})]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Opera\xe7\xe3o"}),(0,h.jsxs)("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm bg-slate-50",value:b.data.condition?.operator||"has_tag",onChange:e=>V(b.id,{condition:{...b.data.condition,operator:e.target.value}}),children:[h.jsx("option",{value:"has_tag",children:"Tem etiqueta"}),h.jsx("option",{value:"not_has_tag",children:"N\xe3o tem etiqueta"})]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Etiqueta"}),h.jsx(a9.I,{className:"bg-slate-50",placeholder:"Ex: REELS GERAL",value:b.data.condition?.value||"",onChange:e=>V(b.id,{condition:{...b.data.condition,value:e.target.value}})}),h.jsx("p",{className:"text-[10px] text-slate-400",children:"Digite exatamente o nome da etiqueta (Tag) que deseja verificar."})]})]})]})]})})]})}},54278:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r=n(44297),o=n(65803),a=n(67952);let i=o.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));i.displayName="Textarea"},25666:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(55079).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},51504:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(55079).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},31631:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>i});let r=(0,n(37460).createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\workflows\[id]\editor\page.tsx`),{__esModule:o,$$typeof:a}=r,i=r.default},29398:(e,t,n)=>{"use strict";function r(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function o(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function a(){}n.d(t,{ZP:()=>y,B8:()=>N});var i="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,d=RegExp(`^rgb\\(${i},${i},${i}\\)$`),u=RegExp(`^rgb\\(${l},${l},${l}\\)$`),h=RegExp(`^rgba\\(${i},${i},${i},${s}\\)$`),f=RegExp(`^rgba\\(${l},${l},${l},${s}\\)$`),p=RegExp(`^hsl\\(${s},${l},${l}\\)$`),m=RegExp(`^hsla\\(${s},${l},${l},${s}\\)$`),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function v(){return this.rgb().formatRgb()}function y(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?b(t):3===n?new j(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?w(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?w(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=d.exec(e))?new j(t[1],t[2],t[3],1):(t=u.exec(e))?new j(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?w(t[1],t[2],t[3],t[4]):(t=f.exec(e))?w(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=p.exec(e))?M(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?M(t[1],t[2]/100,t[3]/100,t[4]):g.hasOwnProperty(e)?b(g[e]):"transparent"===e?new j(NaN,NaN,NaN,0):null}function b(e){return new j(e>>16&255,e>>8&255,255&e,1)}function w(e,t,n,r){return r<=0&&(e=t=n=NaN),new j(e,t,n,r)}function N(e,t,n,r){var o;return 1==arguments.length?((o=e)instanceof a||(o=y(o)),o)?new j((o=o.rgb()).r,o.g,o.b,o.opacity):new j:new j(e,t,n,null==r?1:r)}function j(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function _(){return`#${C(this.r)}${C(this.g)}${C(this.b)}`}function E(){let e=k(this.opacity);return`${1===e?"rgb(":"rgba("}${S(this.r)}, ${S(this.g)}, ${S(this.b)}${1===e?")":`, ${e})`}`}function k(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function S(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function C(e){return((e=S(e))<16?"0":"")+e.toString(16)}function M(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new A(e,t,n,r)}function P(e){if(e instanceof A)return new A(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=y(e)),!e)return new A;if(e instanceof A)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,l=i-o,c=(i+o)/2;return l?(s=t===i?(n-r)/l+(n<r)*6:n===i?(r-t)/l+2:(t-n)/l+4,l/=c<.5?i+o:2-i-o,s*=60):l=c>0&&c<1?0:s,new A(s,l,c,e.opacity)}function A(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function I(e){return(e=(e||0)%360)<0?e+360:e}function R(e){return Math.max(0,Math.min(1,e||0))}function D(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}r(a,y,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:v,toString:v}),r(j,N,o(a,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new j(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new j(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new j(S(this.r),S(this.g),S(this.b),k(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_,formatHex:_,formatHex8:function(){return`#${C(this.r)}${C(this.g)}${C(this.b)}${C((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:E,toString:E})),r(A,function(e,t,n,r){return 1==arguments.length?P(e):new A(e,t,n,null==r?1:r)},o(a,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new A(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new A(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new j(D(e>=240?e-240:e+120,o,r),D(e,o,r),D(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new A(I(this.h),R(this.s),R(this.l),k(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=k(this.opacity);return`${1===e?"hsl(":"hsla("}${I(this.h)}, ${100*R(this.s)}%, ${100*R(this.l)}%${1===e?")":`, ${e})`}`}}))},11602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r=e=>()=>e},90372:(e,t,n)=>{"use strict";function r(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}n.d(t,{Z:()=>r})},93826:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>s});var r=n(29398);function o(e,t,n,r,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*n+(1+3*e+3*a-3*i)*r+i*o)/6}var a=n(11602);function i(e,t){var n=t-e;return n?function(t){return e+t*n}:(0,a.Z)(isNaN(e)?t:e)}let s=function e(t){var n,o=1==(n=+(n=t))?i:function(e,t){var r,o,i;return t-e?(r=e,o=t,r=Math.pow(r,i=n),o=Math.pow(o,i)-r,i=1/i,function(e){return Math.pow(r+e*o,i)}):(0,a.Z)(isNaN(e)?t:e)};function s(e,t){var n=o((e=(0,r.B8)(e)).r,(t=(0,r.B8)(t)).r),a=o(e.g,t.g),s=o(e.b,t.b),l=i(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=s(t),e.opacity=l(t),e+""}}return s.gamma=e,s}(1);function l(e){return function(t){var n,o,a=t.length,i=Array(a),s=Array(a),l=Array(a);for(n=0;n<a;++n)o=(0,r.B8)(t[n]),i[n]=o.r||0,s[n]=o.g||0,l[n]=o.b||0;return i=e(i),s=e(s),l=e(l),o.opacity=1,function(e){return o.r=i(e),o.g=s(e),o.b=l(e),o+""}}}l(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],s=r>0?e[r-1]:2*a-i,l=r<t-1?e[r+2]:2*i-a;return o((n-r/t)*t,s,a,i,l)}}),l(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],i=e[r%t],s=e[(r+1)%t],l=e[(r+2)%t];return o((n-r/t)*t,a,i,s,l)}})},65266:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(90372),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=RegExp(o.source,"g");function i(e,t){var n,i,s,l,c,d=o.lastIndex=a.lastIndex=0,u=-1,h=[],f=[];for(e+="",t+="";(s=o.exec(e))&&(l=a.exec(t));)(c=l.index)>d&&(c=t.slice(d,c),h[u]?h[u]+=c:h[++u]=c),(s=s[0])===(l=l[0])?h[u]?h[u]+=l:h[++u]=l:(h[++u]=null,f.push({i:u,x:(0,r.Z)(s,l)})),d=a.lastIndex;return d<t.length&&(c=t.slice(d),h[u]?h[u]+=c:h[++u]=c),h.length<2?f[0]?(n=f[0].x,function(e){return n(e)+""}):(i=t,function(){return i}):(t=f.length,function(e){for(var n,r=0;r<t;++r)h[(n=f[r]).i]=n.x(e);return h.join("")})}},59454:(e,t,n)=>{"use strict";n.d(t,{Z:()=>function e(t,n){var l,c,d=typeof n;return null==n||"boolean"===d?(0,s.Z)(n):("number"===d?a.Z:"string"===d?(c=(0,r.ZP)(n))?(n=c,o.ZP):i.Z:n instanceof r.ZP?o.ZP:n instanceof Date?function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}:(l=n,!ArrayBuffer.isView(l)||l instanceof DataView)?Array.isArray(n)?function(t,n){var r,o=n?n.length:0,a=t?Math.min(o,t.length):0,i=Array(a),s=Array(o);for(r=0;r<a;++r)i[r]=e(t[r],n[r]);for(;r<o;++r)s[r]=n[r];return function(e){for(r=0;r<a;++r)s[r]=i[r](e);return s}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var r,o={},a={};for(r in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)r in t?o[r]=e(t[r],n[r]):a[r]=n[r];return function(e){for(r in o)a[r]=o[r](e);return a}}:a.Z:function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,o=t.slice();return function(a){for(n=0;n<r;++n)o[n]=e[n]*(1-a)+t[n]*a;return o}})(t,n)}});var r=n(29398),o=n(93826),a=n(90372),i=n(65266),s=n(11602)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[2150,8235,111,4391,1089,6256,2520,9390],()=>n(9834));module.exports=r})();