(()=>{var e={};e.id=4252,e.ids=[4252],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},91053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var s=r(28090),a=r(79409),n=r(31522),i=r.n(n),l=r(41305),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["(dashboard)",{children:["workflows",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,27404)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\workflows\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,73751)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\workflows\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,63470)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,70111,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\workflows\\page.tsx"],u="/(dashboard)/workflows/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/workflows/page",pathname:"/workflows",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},95763:(e,t,r)=>{let s={"67ec2a3b5879da03fd9db50f251cecdfe825c359":()=>Promise.resolve().then(r.bind(r,56087)).then(e=>e.deleteProject),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":()=>Promise.resolve().then(r.bind(r,56087)).then(e=>e.createProject),"7d8e4dd9996424d0e268f2b3af549e67be85e477":()=>Promise.resolve().then(r.bind(r,56087)).then(e=>e.updatePageProject),f8668bd5f71af427a636b6031eb02965154b8feb:()=>Promise.resolve().then(r.bind(r,56087)).then(e=>e.getProjects),"6511aec7141895e8bedebb549690cdc948a691f5":()=>Promise.resolve().then(r.bind(r,80736)).then(e=>e.setContext),b4347abbed00a7e494c91a6d571a3336ae9e77f1:()=>Promise.resolve().then(r.bind(r,40172)).then(e=>e.deleteRuleAction)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"67ec2a3b5879da03fd9db50f251cecdfe825c359":a.bind(null,"67ec2a3b5879da03fd9db50f251cecdfe825c359"),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":a.bind(null,"7a8a07ed673e87719a224ba5bdd94c5abf5790df"),"7d8e4dd9996424d0e268f2b3af549e67be85e477":a.bind(null,"7d8e4dd9996424d0e268f2b3af549e67be85e477"),f8668bd5f71af427a636b6031eb02965154b8feb:a.bind(null,"f8668bd5f71af427a636b6031eb02965154b8feb"),"6511aec7141895e8bedebb549690cdc948a691f5":a.bind(null,"6511aec7141895e8bedebb549690cdc948a691f5"),b4347abbed00a7e494c91a6d571a3336ae9e77f1:a.bind(null,"b4347abbed00a7e494c91a6d571a3336ae9e77f1")}},95736:(e,t,r)=>{Promise.resolve().then(r.bind(r,78373)),Promise.resolve().then(r.t.bind(r,41928,23))},78373:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DeleteRuleButton:()=>c});var s=r(44297),a=r(76858),n=r(92359),i=r(66606),l=r(65803);r(72445);var d=(0,r(19621).$)("b4347abbed00a7e494c91a6d571a3336ae9e77f1"),o=r(51305);function c({ruleId:e}){let[t,r]=(0,l.useState)(!1),c=async()=>{if(confirm("Tem certeza que deseja excluir esta regra? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{r(!0),await d(e),o.Am.success("Regra exclu\xedda com sucesso")}catch(e){o.Am.error("Erro ao excluir regra")}finally{r(!1)}};return s.jsx(a.z,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-red-500 hover:bg-red-500/10",onClick:c,disabled:t,children:t?s.jsx(n.Z,{className:"w-4 h-4 animate-spin"}):s.jsx(i.Z,{className:"w-4 h-4"})})}},66606:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(55079).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{deleteRuleAction:()=>i});var s=r(48437);r(69821);var a=r(56685),n=r(52841);async function i(e){if(e)try{await a.prisma.automationRule.delete({where:{id:e}}),(0,n.revalidatePath)("/workflows")}catch(e){throw console.error("Error deleting rule:",e),e}}(0,r(64601).ensureServerEntryExports)([i]),(0,s.createActionProxy)("b4347abbed00a7e494c91a6d571a3336ae9e77f1",i)},73751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(71002),a=r(20949);function n(){return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(a.O,{className:"h-8 w-36 bg-zinc-800"}),s.jsx(a.O,{className:"h-4 w-80 bg-zinc-800/60"})]}),s.jsx(a.O,{className:"h-10 w-32 bg-zinc-800 rounded-md"})]}),(0,s.jsxs)("div",{className:"border border-white/10 rounded-lg bg-zinc-950/50 overflow-hidden",children:[s.jsx("div",{className:"bg-zinc-900/50 border-b border-white/5 px-6 py-4 flex gap-8",children:["w-20","w-32","w-16","w-12","w-16","w-16"].map((e,t)=>s.jsx(a.O,{className:`h-4 ${e} bg-zinc-800`},t))}),Array.from({length:4}).map((e,t)=>(0,s.jsxs)("div",{className:"px-6 py-4 flex items-center gap-8 border-b border-white/5 last:border-0",children:[s.jsx(a.O,{className:"h-4 w-28 bg-zinc-800"}),(0,s.jsxs)("div",{className:"flex gap-1.5",children:[s.jsx(a.O,{className:"h-5 w-14 rounded-full bg-zinc-800"}),s.jsx(a.O,{className:"h-5 w-18 rounded-full bg-zinc-800"})]}),s.jsx(a.O,{className:"h-4 w-8 bg-zinc-800"}),s.jsx(a.O,{className:"h-4 w-16 bg-zinc-800"}),s.jsx(a.O,{className:"h-5 w-14 rounded-full bg-zinc-800"}),(0,s.jsxs)("div",{className:"ml-auto flex gap-2",children:[s.jsx(a.O,{className:"h-8 w-8 rounded bg-zinc-800"}),s.jsx(a.O,{className:"h-8 w-8 rounded bg-zinc-800"})]})]},t))]})]})}},27404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I,dynamic:()=>S});var s=r(71002),a=r(61242),n=r(38588),i=r(11455),l=r(65702),d=r(57680),o=r.t(d,2);function c(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var u=Symbol.for("react.lazy"),p=o[" use ".trim().toString()];function x(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===u&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var h=function(e){let t=function(e){let t=d.forwardRef((e,t)=>{let{children:r,...s}=e;if(x(r)&&"function"==typeof p&&(r=p(r._payload)),d.isValidElement(r)){var a;let e,n;let i=(a=r,(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref),l=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==d.Fragment&&(l.ref=t?function(...e){return t=>{let r=!1,s=e.map(e=>{let s=c(e,t);return r||"function"!=typeof s||(r=!0),s});if(r)return()=>{for(let t=0;t<s.length;t++){let r=s[t];"function"==typeof r?r():c(e[t],null)}}}}(t,i):i),d.cloneElement(r,l)}return d.Children.count(r)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=d.forwardRef((e,r)=>{let{children:a,...n}=e;x(a)&&"function"==typeof p&&(a=p(a._payload));let i=d.Children.toArray(a),l=i.find(f);if(l){let e=l.props.children,a=i.map(t=>t!==l?t:d.Children.count(e)>1?d.Children.only(null):d.isValidElement(e)?e.props.children:null);return(0,s.jsx)(t,{...n,ref:r,children:d.isValidElement(e)?d.cloneElement(e,void 0,a):null})}return(0,s.jsx)(t,{...n,ref:r,children:a})});return r.displayName=`${e}.Slot`,r}("Slot"),m=Symbol("radix.slottable");function f(e){return d.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}var b=r(69481),g=r(45482);let y=(0,b.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=d.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},i)=>{let l=a?h:"button";return s.jsx(l,{className:(0,g.cn)(y({variant:t,size:r,className:e})),ref:i,...n})});v.displayName="Button";var w=r(341),j=r.n(w),N=r(49849);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let k=(0,N.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var O=r(39835);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let _=(0,N.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var P=r(33573),z=r(37460);let A=(0,z.createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\workflows\_components\delete-button.tsx`),{__esModule:E,$$typeof:C}=A;A.default;let D=(0,z.createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\workflows\_components\delete-button.tsx#DeleteRuleButton`),S="force-dynamic";async function I(){let e=(0,a.e)(),{data:{user:t}}=await e.auth.getUser();t||(0,P.redirect)("/entrar");let[r,d]=await Promise.all([(0,i.A)(t.id,t.email||""),(0,l._)(t.id)]),o={workspaceId:r.id};if(d?.projectId){if(d.pageId&&"ALL"!==d.pageId)o.OR=[{pageId:d.pageId},{pageIds:{has:d.pageId}},{AND:[{pageId:null},{pageIds:{equals:[]}}]}];else{let e=d.pageIds||[];e.length>0?o.OR=[{pageId:{in:e}},{pageIds:{hasSome:e}},{AND:[{pageId:null},{pageIds:{equals:[]}}]}]:o.OR=[{AND:[{pageId:null},{pageIds:{equals:[]}}]}]}}let c=await n._.automationRule.findMany({where:o,orderBy:{priority:"desc"},include:{actions:{select:{id:!0}}}});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Automa\xe7\xf5es"}),s.jsx("p",{className:"text-muted-foreground",children:"Gerencie suas regras de resposta autom\xe1tica para o Messenger."})]}),s.jsx(j(),{href:"/workflows/create",children:(0,s.jsxs)(v,{className:"bg-[#0084FF] hover:bg-[#0070D1] text-white gap-2 shadow-lg shadow-blue-500/20",children:[s.jsx(k,{className:"w-4 h-4"}),"Criar Regra"]})})]}),s.jsx("div",{className:"border border-white/10 rounded-lg bg-zinc-950/50 backdrop-blur overflow-hidden",children:0===c.length?(0,s.jsxs)("div",{className:"p-12 text-center space-y-4",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-zinc-900 flex items-center justify-center",children:s.jsx(O.Z,{className:"w-6 h-6 text-zinc-500"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"Nenhuma regra encontrada"}),s.jsx("p",{className:"text-zinc-500 text-sm",children:"Crie sua primeira automa\xe7\xe3o por palavra-chave."})]})]}):(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-900/50 text-zinc-400 font-medium border-b border-white/5",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-4",children:"Nome"}),s.jsx("th",{className:"px-6 py-4",children:"Gatilho (Keywords)"}),s.jsx("th",{className:"px-6 py-4",children:"Prioridade"}),s.jsx("th",{className:"px-6 py-4",children:"A\xe7\xf5es"}),s.jsx("th",{className:"px-6 py-4",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Op\xe7\xf5es"})]})}),s.jsx("tbody",{className:"divide-y divide-white/5 text-zinc-300",children:c.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-white",children:e.name}),s.jsx("td",{className:"px-6 py-4 max-w-xs truncate",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[e.triggerType&&"MESSAGE_ANY"!==e.triggerType&&s.jsx("span",{className:`px-2 py-0.5 w-fit rounded text-[10px] font-bold uppercase
                                                    ${"COMMENT_ON_POST"===e.triggerType?"bg-yellow-500/20 text-yellow-500 border border-yellow-500/30":"MESSAGE_OUTSIDE_24H"===e.triggerType?"bg-orange-500/20 text-orange-500 border border-orange-500/30":"bg-zinc-800 text-zinc-400"}
                                                `,children:"COMMENT_ON_POST"===e.triggerType?"Coment\xe1rio":"MESSAGE_OUTSIDE_24H"===e.triggerType?"Reengajamento (>24h)":e.triggerType}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.keywords.length>0?e.keywords.slice(0,3).map((e,t)=>s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-zinc-800 text-xs border border-white/5",children:e},t)):"MESSAGE_OUTSIDE_24H"===e.triggerType?s.jsx("span",{className:"text-xs text-zinc-500 italic",children:"Qualquer msg"}):"COMMENT_ON_POST"===e.triggerType&&e.triggerConfig?.keywords?.length===0?s.jsx("span",{className:"text-xs text-zinc-500 italic",children:"Qualquer coment\xe1rio"}):s.jsx("span",{className:"text-xs text-zinc-600",children:"-"}),e.keywords.length>3&&(0,s.jsxs)("span",{className:"text-xs text-zinc-500",children:["+",e.keywords.length-3]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:e.priority}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[e.actions.length," a\xe7\xf5es"]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.isActive?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:e.isActive?"Ativo":"Pausado"})}),s.jsx("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(j(),{href:`/workflows/${e.id}`,children:s.jsx(v,{size:"icon",variant:"ghost",className:"h-8 w-8 text-zinc-400 hover:text-white",children:s.jsx(_,{className:"w-4 h-4"})})}),s.jsx(D,{ruleId:e.id})]})})]},e.id))})]})})]})}},49849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(57680),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:o="",children:c,...u},p)=>(0,s.createElement)("svg",{ref:p,...a,width:i,height:i,stroke:r,strokeWidth:d?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,o].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},39835:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(49849).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},341:(e,t,r)=>{"use strict";let{createProxy:s}=r(37460);e.exports=s("C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\node_modules\\.pnpm\\next@14.1.0_react-dom@18.3.1_react@18.3.1\\node_modules\\next\\dist\\client\\link.js")},69481:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var s=r(76031);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.W,i=(e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,d=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===t)return null;let n=a(t)||a(s);return i[e][n]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return n(e,d,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[2150,3422,8235,111,3955,1089,3321,3573,2520,7401],()=>r(91053));module.exports=s})();