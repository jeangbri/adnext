(()=>{var e={};e.id=294,e.ids=[294],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},63234:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=a(28090),t=a(79409),i=a(31522),n=a.n(i),l=a(41305),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c=["",{children:["(dashboard)",{children:["broadcast",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4541)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\broadcast\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,82506)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,70111,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\broadcast\\create\\page.tsx"],x="/(dashboard)/broadcast/create/page",u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/broadcast/create/page",pathname:"/broadcast/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},84778:(e,s,a)=>{Promise.resolve().then(a.bind(a,47833))},47833:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>g});var r=a(44297),t=a(65803),i=a(13776),n=a(76858),l=a(81584),d=a(82984),c=a(90096),o=a(13894),x=a(54278),u=a(32538),m=a(84811),p=a(92359),h=a(51305);function g(){let e=(0,i.useRouter)(),[s,a]=(0,t.useState)(1),[g,b]=(0,t.useState)(!1),[v,f]=(0,t.useState)([]),[j,N]=(0,t.useState)(""),[y,C]=(0,t.useState)(""),[w,A]=(0,t.useState)("ACTIVE_24H"),[E,T]=(0,t.useState)("24H_ONLY"),[P,_]=(0,t.useState)("ACCOUNT_UPDATE"),[k,D]=(0,t.useState)("TEXT"),[z,O]=(0,t.useState)(""),[U,S]=(0,t.useState)(""),[I,M]=(0,t.useState)("IMMEDIATE"),[R,H]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/messenger/status");if(e.ok){let s=await e.json();f(s.accounts||[])}}catch(e){console.error(e)}})()},[]);let L=async()=>{if(!j||!y)return h.Am.error("Preencha o nome e a p\xe1gina");if("TEXT"===k&&!z)return h.Am.error("Digite a mensagem");if("AUDIO"===k&&!U)return h.Am.error("Insira a URL do \xe1udio");b(!0);try{let s="TEXT"===k?{text:z}:{url:U},a=await fetch("/api/broadcasts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:j,pageId:y,audienceType:w,sendMode:I,scheduledAt:"SCHEDULED"===I?R:void 0,policyMode:E,tag:"TAGGED"===E?P:void 0,messageType:k,payload:s})});if(a.ok)h.Am.success("Campanha criada com sucesso!"),e.push("/broadcast");else{let e=await a.json();h.Am.error(e.error||"Erro ao criar campanha")}}catch(e){h.Am.error("Erro ao conectar com servidor")}finally{b(!1)}};return(0,r.jsxs)("div",{className:"space-y-8 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx(n.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),children:r.jsx(m.Z,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Nova Campanha"}),r.jsx("p",{className:"text-zinc-400",children:"Configure seu envio em massa"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,r.jsxs)(l.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-white",children:"1. Configura\xe7\xf5es"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Nome da Campanha"}),r.jsx(d.I,{placeholder:"Ex: Promo\xe7\xe3o Dia das M\xe3es",className:"bg-black/20 border-zinc-700",value:j,onChange:e=>N(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"P\xe1gina do Facebook"}),(0,r.jsxs)(o.Ph,{value:y,onValueChange:C,children:[r.jsx(o.i4,{className:"bg-black/20 border-zinc-700",children:r.jsx(o.ki,{placeholder:"Selecione a p\xe1gina"})}),r.jsx(o.Bw,{children:v.map(e=>r.jsx(o.Ql,{value:e.pageId,children:e.pageName},e.pageId))})]})]})]})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-white",children:"2. P\xfablico Alvo"})}),(0,r.jsxs)(l.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${"ACTIVE_24H"===w?"bg-[#0084FF]/10 border-[#0084FF] text-white":"bg-black/20 border-zinc-700 text-zinc-400"}`,onClick:()=>A("ACTIVE_24H"),children:[r.jsx("div",{className:"font-bold mb-1",children:"Ativos (24h)"}),r.jsx("div",{className:"text-xs opacity-80",children:"Interagiram nas \xfaltimas 24 horas"})]}),(0,r.jsxs)("div",{className:`p-4 rounded-lg border cursor-pointer transition-colors ${"ALL"===w?"bg-[#0084FF]/10 border-[#0084FF] text-white":"bg-black/20 border-zinc-700 text-zinc-400"}`,onClick:()=>A("ALL"),children:[r.jsx("div",{className:"font-bold mb-1",children:"Todos os Contatos"}),r.jsx("div",{className:"text-xs opacity-80",children:"Base completa (Cuidado 24h)"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Pol\xedtica de Envio (Meta)"}),(0,r.jsxs)(o.Ph,{value:E,onValueChange:T,children:[r.jsx(o.i4,{className:"bg-black/20 border-zinc-700",children:r.jsx(o.ki,{})}),(0,r.jsxs)(o.Bw,{children:[r.jsx(o.Ql,{value:"24H_ONLY",children:"Janela 24h (Padr\xe3o e Seguro)"}),r.jsx(o.Ql,{value:"TAGGED",children:"Message Tags (Fora de 24h)"})]})]}),r.jsx("p",{className:"text-xs text-zinc-500",children:"24H_ONLY"===E?"Envia apenas para usu\xe1rios que interagiram nas \xfaltimas 24h. Outros ser\xe3o ignorados.":"Permite enviar fora de 24h usando Tags. Use com cuidado para n\xe3o ser bloqueado."})]}),"TAGGED"===E&&(0,r.jsxs)("div",{className:"space-y-2 p-4 bg-yellow-500/10 rounded-md border border-yellow-500/20",children:[r.jsx(c._,{className:"text-yellow-500",children:"Selecione a Tag"}),(0,r.jsxs)(o.Ph,{value:P,onValueChange:_,children:[r.jsx(o.i4,{className:"bg-black/20 border-zinc-700",children:r.jsx(o.ki,{})}),(0,r.jsxs)(o.Bw,{children:[r.jsx(o.Ql,{value:"ACCOUNT_UPDATE",children:"CONFIRMED_EVENT_UPDATE (Lembretes de evento)"}),r.jsx(o.Ql,{value:"POST_PURCHASE_UPDATE",children:"POST_PURCHASE_UPDATE (Atualiza\xe7\xe3o de pedido)"}),r.jsx(o.Ql,{value:"ACCOUNT_UPDATE",children:"ACCOUNT_UPDATE (Atualiza\xe7\xe3o de conta)"}),r.jsx(o.Ql,{value:"HUMAN_AGENT",children:"HUMAN_AGENT (Resposta humana)"})]})]})]})]})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-white",children:"3. Mensagem"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Tipo de Mensagem"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.z,{variant:"TEXT"===k?"default":"outline",onClick:()=>D("TEXT"),className:"flex-1",children:"Texto"}),r.jsx(n.z,{variant:"AUDIO"===k?"default":"outline",onClick:()=>D("AUDIO"),className:"flex-1",children:"\xc1udio"})]})]}),"TEXT"===k&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Conte\xfado do Texto"}),r.jsx(x.g,{placeholder:"Ol\xe1 {{first_name}}, temos novidades...",className:"bg-black/20 border-zinc-700 min-h-[100px]",value:z,onChange:e=>O(e.target.value)})]}),"AUDIO"===k&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"URL do \xc1udio (MP3/OGG)"}),r.jsx(d.I,{placeholder:"https://exemplo.com/audio.mp3",className:"bg-black/20 border-zinc-700",value:U,onChange:e=>S(e.target.value)}),r.jsx("p",{className:"text-xs text-zinc-500",children:"O arquivo deve ser p\xfablico e acess\xedvel pela Meta."})]})]})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900/50 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-white",children:"4. Agendamento"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Quando enviar?"}),(0,r.jsxs)(o.Ph,{value:I,onValueChange:M,children:[r.jsx(o.i4,{className:"bg-black/20 border-zinc-700",children:r.jsx(o.ki,{})}),(0,r.jsxs)(o.Bw,{children:[r.jsx(o.Ql,{value:"IMMEDIATE",children:"Enviar Imediatamente"}),r.jsx(o.Ql,{value:"SCHEDULED",children:"Agendar"})]})]})]}),"SCHEDULED"===I&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{children:"Data e Hora"}),r.jsx(d.I,{type:"datetime-local",className:"bg-black/20 border-zinc-700",value:R,onChange:e=>H(e.target.value)})]})]})]})]}),r.jsx("div",{className:"md:col-span-1",children:r.jsx("div",{className:"sticky top-6 space-y-4",children:(0,r.jsxs)(l.Zb,{className:"bg-zinc-900 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-sm text-zinc-400 uppercase tracking-wider",children:"Resumo"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs text-zinc-500",children:"P\xe1gina"}),r.jsx("div",{className:"text-white font-medium",children:v.find(e=>e.pageId===y)?.pageName||"-"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs text-zinc-500",children:"P\xfablico"}),r.jsx(u.C,{variant:"outline",children:w})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-xs text-zinc-500",children:"Pol\xedtica"}),r.jsx("div",{className:"text-white font-medium",children:E})]}),(0,r.jsxs)(n.z,{className:"w-full bg-[#0084FF] hover:bg-[#0070D1] text-white mt-4",onClick:L,disabled:g,children:[g&&r.jsx(p.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"IMMEDIATE"===I?"Enviar Agora":"Agendar Campanha"]})]})]})})})]})]})}},32538:(e,s,a)=>{"use strict";a.d(s,{C:()=>l});var r=a(44297);a(65803);var t=a(65723),i=a(67952);let n=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return r.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...a})}},81584:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>l,SZ:()=>c,Zb:()=>n,aY:()=>o,eW:()=>x,ll:()=>d});var r=a(44297),t=a(65803),i=a(67952);let n=t.forwardRef(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=t.forwardRef(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=t.forwardRef(({className:e,...s},a)=>r.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=t.forwardRef(({className:e,...s},a)=>r.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=t.forwardRef(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent";let x=t.forwardRef(({className:e,...s},a)=>r.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s}));x.displayName="CardFooter"},82984:(e,s,a)=>{"use strict";a.d(s,{I:()=>n});var r=a(44297),t=a(65803),i=a(67952);let n=t.forwardRef(({className:e,type:s,...a},t)=>r.jsx("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...a}));n.displayName="Input"},90096:(e,s,a)=>{"use strict";a.d(s,{_:()=>o});var r=a(44297),t=a(65803),i=a(82455),n=t.forwardRef((e,s)=>(0,r.jsx)(i.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=a(65723),d=a(67952);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...s},a)=>r.jsx(n,{ref:a,className:(0,d.cn)(c(),e),...s}));o.displayName=n.displayName},54278:(e,s,a)=>{"use strict";a.d(s,{g:()=>n});var r=a(44297),t=a(65803),i=a(67952);let n=t.forwardRef(({className:e,...s},a)=>r.jsx("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Textarea"},84811:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(55079).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},92359:(e,s,a)=>{"use strict";a.d(s,{Z:()=>r});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(55079).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4541:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>i,__esModule:()=>t,default:()=>n});let r=(0,a(37460).createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\broadcast\create\page.tsx`),{__esModule:t,$$typeof:i}=r,n=r.default},82455:(e,s,a)=>{"use strict";a.d(s,{WV:()=>n});var r=a(65803);a(42182);var t=a(63551),i=a(44297),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,t.Z8)(`Primitive.${s}`),n=r.forwardRef((e,r)=>{let{asChild:t,...n}=e,l=t?a:s;return(0,i.jsx)(l,{...n,ref:r})});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{})}};var s=require("../../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[150,235,111,832,72,554,340],()=>a(63234));module.exports=r})();