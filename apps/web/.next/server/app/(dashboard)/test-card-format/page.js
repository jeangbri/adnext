(()=>{var e={};e.id=4861,e.ids=[4861],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11265:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d});var r=a(28090),t=a(79409),l=a(31522),i=a.n(l),n=a(41305),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(s,c);let d=["",{children:["(dashboard)",{children:["test-card-format",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31631)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\test-card-format\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,63470)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,70111,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\test-card-format\\page.tsx"],x="/(dashboard)/test-card-format/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/(dashboard)/test-card-format/page",pathname:"/test-card-format",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},82493:(e,s,a)=>{Promise.resolve().then(a.bind(a,53018))},53018:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(44297),t=a(65803),l=a(81584),i=a(76858),n=a(82984),c=a(90096),d=a(13894),o=a(80541),x=a(51305),m=a(92359);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,a(55079).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var h=a(74573);function u(){let[e,s]=(0,t.useState)(""),[a,u]=(0,t.useState)("SQUARE"),[g,j]=(0,t.useState)("NONE"),[b,v]=(0,t.useState)(""),[N,f]=(0,t.useState)("Produto Teste"),[y,P]=(0,t.useState)("Descri\xe7\xe3o do card"),[w,C]=(0,t.useState)(!1),[_,D]=(0,t.useState)(!1),[O,z]=(0,t.useState)([]),k=e=>{z(s=>[`[${new Date().toLocaleTimeString()}] ${e}`,...s])},S=async()=>{if(!e){x.Am.error("Adicione uma URL de imagem");return}C(!0),k(`Derivando imagem para ${a}...`);try{let s=await fetch("/api/card-image/derive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,cardFormat:a})}),r=await s.json();s.ok?(v(r.derivedUrl),k(`✓ Derivada OK: ${r.width}\xd7${r.height} → ${r.derivedUrl}`),x.Am.success("Imagem derivada com sucesso!")):(k(`✗ Erro: ${r.error}`),x.Am.error(r.error))}catch(e){k(`✗ Erro: ${e.message}`)}finally{C(!1)}},A=async e=>{let a=e.target.files?.[0];if(!a)return;let r=new FormData;r.append("file",a);try{let e=await fetch("/api/upload",{method:"POST",body:r}),a=await e.json();e.ok?(s(a.url),v(""),k(`Upload OK: ${a.url}`),x.Am.success("Upload conclu\xeddo!")):x.Am.error(a.error)}catch(e){x.Am.error(e.message)}},E=()=>"AUTO_CENTER_CROP"===g&&b?b:e,U=Object.entries(h.JN);return r.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"\uD83E\uDDEA Teste de Formato do Card"}),r.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Preview comparativo de todos os formatos + envio de teste"})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-sm",children:"Configura\xe7\xe3o"})}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{className:"text-xs",children:"URL da Imagem"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(n.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs flex-1",value:e,onChange:e=>{s(e.target.value),v("")},placeholder:"https://..."}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[r.jsx(i.z,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:r.jsx("span",{children:"Upload"})}),r.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:A})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{className:"text-xs",children:"Formato"}),(0,r.jsxs)(d.Ph,{value:a,onValueChange:e=>{u(e),v("")},children:[r.jsx(d.i4,{className:"h-8 text-xs bg-black/40 border-zinc-800",children:r.jsx(d.ki,{})}),(0,r.jsxs)(d.Bw,{children:[r.jsx(d.Ql,{value:"SQUARE",children:"Quadrado (1:1)"}),r.jsx(d.Ql,{value:"PORTRAIT",children:"Retrato (4:5)"}),r.jsx(d.Ql,{value:"LANDSCAPE",children:"Paisagem (1.91:1)"})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{className:"text-xs",children:"T\xedtulo"}),r.jsx(n.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:N,onChange:e=>f(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(c._,{className:"text-xs",children:"Subt\xedtulo"}),r.jsx(n.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:y,onChange:e=>P(e.target.value)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(o.r,{checked:"AUTO_CENTER_CROP"===g,onCheckedChange:e=>j(e?"AUTO_CENTER_CROP":"NONE")}),(0,r.jsxs)(c._,{className:"text-xs",children:["Recorte Autom\xe1tico (cropMode: ",g,")"]})]}),r.jsx("div",{className:"flex gap-2",children:(0,r.jsxs)(i.z,{size:"sm",className:"h-8 text-xs",onClick:S,disabled:!e||w,children:[w?r.jsx(m.Z,{className:"w-3 h-3 mr-1 animate-spin"}):null,"Derivar imagem (",h.JN[a].idealLabel,")"]})}),b&&(0,r.jsxs)("div",{className:"text-[10px] text-emerald-400 bg-emerald-500/10 p-2 rounded border border-emerald-500/20 break-all",children:["✓ Derivada: ",b]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[r.jsx(p,{className:"w-4 h-4"})," Preview Comparativo"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:U.map(([s,t])=>(0,r.jsxs)(l.Zb,{className:`bg-zinc-900 border-zinc-800 ${s===a?"ring-2 ring-primary":""}`,children:[(0,r.jsxs)(l.Ol,{className:"pb-2",children:[r.jsx(l.ll,{className:"text-xs",children:t.label}),r.jsx(l.SZ,{className:"text-[10px]",children:t.idealLabel})]}),(0,r.jsxs)(l.aY,{children:[r.jsx("div",{className:"rounded-lg overflow-hidden bg-black/30 border border-zinc-800 mb-2",style:{aspectRatio:t.cssAspectRatio},children:e?r.jsx("img",{src:s===a&&b?b:e,alt:`Preview ${s}`,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600 text-xs",children:"Sem imagem"})}),r.jsx("p",{className:"text-xs font-medium truncate",children:N||"T\xedtulo"}),r.jsx("p",{className:"text-[10px] text-zinc-500 truncate",children:y||"Subt\xedtulo"}),s===a&&r.jsx("span",{className:"inline-block mt-1 text-[9px] bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Selecionado"})]})]},s))})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900 border-zinc-800",children:[(0,r.jsxs)(l.Ol,{children:[r.jsx(l.ll,{className:"text-sm",children:"\uD83D\uDCE4 Dados de Envio"}),r.jsx(l.SZ,{className:"text-xs",children:"O que seria enviado ao Messenger"})]}),r.jsx(l.aY,{children:r.jsx("pre",{className:"text-[10px] bg-black/40 p-3 rounded border border-zinc-800 overflow-auto max-h-[200px]",children:JSON.stringify({cardFormat:a,cropMode:g,sentImageUrl:E(),originalImageUrl:e,derivedImageUrl:b||null,messengerPayload:{template_type:"generic",elements:[{title:N,subtitle:y,image_url:E()}]}},null,2)})})]}),(0,r.jsxs)(l.Zb,{className:"bg-zinc-900 border-zinc-800",children:[r.jsx(l.Ol,{children:r.jsx(l.ll,{className:"text-sm",children:"\uD83D\uDCCB Log"})}),r.jsx(l.aY,{children:(0,r.jsxs)("div",{className:"space-y-1 max-h-[200px] overflow-auto",children:[0===O.length&&r.jsx("p",{className:"text-xs text-zinc-600",children:"Nenhum log ainda"}),O.map((e,s)=>r.jsx("p",{className:"text-[10px] text-zinc-400 font-mono",children:e},s))]})})]})]})})}},31631:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>t,default:()=>i});let r=(0,a(37460).createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\test-card-format\page.tsx`),{__esModule:t,$$typeof:l}=r,i=r.default},82455:(e,s,a)=>{"use strict";a.d(s,{WV:()=>i});var r=a(65803);a(42182);var t=a(63551),l=a(44297),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,t.Z8)(`Primitive.${s}`),i=r.forwardRef((e,r)=>{let{asChild:t,...i}=e,n=t?a:s;return(0,l.jsx)(n,{...i,ref:r})});return i.displayName=`Primitive.${s}`,{...e,[s]:i}},{})}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[2150,8235,111,3955,1089,2520,4118],()=>a(11265));module.exports=r})();