(()=>{var e={};e.id=4861,e.ids=[4861],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11265:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>c});var t=s(28090),r=s(79409),i=s(31522),l=s.n(i),d=s(41305),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(a,n);let c=["",{children:["(dashboard)",{children:["test-card-format",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6709)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\test-card-format\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63470)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,70111,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\test-card-format\\page.tsx"],m="/(dashboard)/test-card-format/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/test-card-format/page",pathname:"/test-card-format",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},57409:(e,a,s)=>{let t={"67ec2a3b5879da03fd9db50f251cecdfe825c359":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.deleteProject),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.createProject),"7d8e4dd9996424d0e268f2b3af549e67be85e477":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.updatePageProject),f8668bd5f71af427a636b6031eb02965154b8feb:()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.getProjects),"6511aec7141895e8bedebb549690cdc948a691f5":()=>Promise.resolve().then(s.bind(s,80736)).then(e=>e.setContext)};async function r(e,...a){return(await t[e]()).apply(null,a)}e.exports={"67ec2a3b5879da03fd9db50f251cecdfe825c359":r.bind(null,"67ec2a3b5879da03fd9db50f251cecdfe825c359"),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":r.bind(null,"7a8a07ed673e87719a224ba5bdd94c5abf5790df"),"7d8e4dd9996424d0e268f2b3af549e67be85e477":r.bind(null,"7d8e4dd9996424d0e268f2b3af549e67be85e477"),f8668bd5f71af427a636b6031eb02965154b8feb:r.bind(null,"f8668bd5f71af427a636b6031eb02965154b8feb"),"6511aec7141895e8bedebb549690cdc948a691f5":r.bind(null,"6511aec7141895e8bedebb549690cdc948a691f5")}},82493:(e,a,s)=>{Promise.resolve().then(s.bind(s,53018))},53018:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var t=s(44297),r=s(65803),i=s(81584),l=s(76858),d=s(82984),n=s(90096),c=s(13894),o=s(80541),m=s(51305),u=s(92359);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,s(55079).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=s(74573);function b(){let[e,a]=(0,r.useState)(""),[s,b]=(0,r.useState)("SQUARE"),[f,h]=(0,r.useState)("NONE"),[g,v]=(0,r.useState)(""),[j,N]=(0,r.useState)("Produto Teste"),[y,w]=(0,r.useState)("Descri\xe7\xe3o do card"),[P,k]=(0,r.useState)(!1),[R,C]=(0,r.useState)(!1),[S,D]=(0,r.useState)([]),O=e=>{D(a=>[`[${new Date().toLocaleTimeString()}] ${e}`,...a])},_=async()=>{if(!e){m.Am.error("Adicione uma URL de imagem");return}k(!0),O(`Derivando imagem para ${s}...`);try{let a=await fetch("/api/card-image/derive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e,cardFormat:s})}),t=await a.json();a.ok?(v(t.derivedUrl),O(`✓ Derivada OK: ${t.width}\xd7${t.height} → ${t.derivedUrl}`),m.Am.success("Imagem derivada com sucesso!")):(O(`✗ Erro: ${t.error}`),m.Am.error(t.error))}catch(e){O(`✗ Erro: ${e.message}`)}finally{k(!1)}},A=async e=>{let s=e.target.files?.[0];if(!s)return;let t=new FormData;t.append("file",s);try{let e=await fetch("/api/upload",{method:"POST",body:t}),s=await e.json();e.ok?(a(s.url),v(""),O(`Upload OK: ${s.url}`),m.Am.success("Upload conclu\xeddo!")):m.Am.error(s.error)}catch(e){m.Am.error(e.message)}},E=()=>"AUTO_CENTER_CROP"===f&&g?g:e,z=Object.entries(p.JN);return t.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold",children:"\uD83E\uDDEA Teste de Formato do Card"}),t.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Preview comparativo de todos os formatos + envio de teste"})]}),(0,t.jsxs)(i.Zb,{className:"bg-zinc-900 border-zinc-800",children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{className:"text-sm",children:"Configura\xe7\xe3o"})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{className:"text-xs",children:"URL da Imagem"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx(d.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs flex-1",value:e,onChange:e=>{a(e.target.value),v("")},placeholder:"https://..."}),(0,t.jsxs)("label",{className:"cursor-pointer",children:[t.jsx(l.z,{variant:"outline",size:"sm",className:"h-8 text-xs",asChild:!0,children:t.jsx("span",{children:"Upload"})}),t.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:A})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{className:"text-xs",children:"Formato"}),(0,t.jsxs)(c.Ph,{value:s,onValueChange:e=>{b(e),v("")},children:[t.jsx(c.i4,{className:"h-8 text-xs bg-black/40 border-zinc-800",children:t.jsx(c.ki,{})}),(0,t.jsxs)(c.Bw,{children:[t.jsx(c.Ql,{value:"SQUARE",children:"Quadrado (1:1)"}),t.jsx(c.Ql,{value:"PORTRAIT",children:"Retrato (4:5)"}),t.jsx(c.Ql,{value:"LANDSCAPE",children:"Paisagem (1.91:1)"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{className:"text-xs",children:"T\xedtulo"}),t.jsx(d.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:j,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(n._,{className:"text-xs",children:"Subt\xedtulo"}),t.jsx(d.I,{className:"h-8 bg-black/40 border-zinc-800 text-xs",value:y,onChange:e=>w(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(o.r,{checked:"AUTO_CENTER_CROP"===f,onCheckedChange:e=>h(e?"AUTO_CENTER_CROP":"NONE")}),(0,t.jsxs)(n._,{className:"text-xs",children:["Recorte Autom\xe1tico (cropMode: ",f,")"]})]}),t.jsx("div",{className:"flex gap-2",children:(0,t.jsxs)(l.z,{size:"sm",className:"h-8 text-xs",onClick:_,disabled:!e||P,children:[P?t.jsx(u.Z,{className:"w-3 h-3 mr-1 animate-spin"}):null,"Derivar imagem (",p.JN[s].idealLabel,")"]})}),g&&(0,t.jsxs)("div",{className:"text-[10px] text-emerald-400 bg-emerald-500/10 p-2 rounded border border-emerald-500/20 break-all",children:["✓ Derivada: ",g]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[t.jsx(x,{className:"w-4 h-4"})," Preview Comparativo"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:z.map(([a,r])=>(0,t.jsxs)(i.Zb,{className:`bg-zinc-900 border-zinc-800 ${a===s?"ring-2 ring-primary":""}`,children:[(0,t.jsxs)(i.Ol,{className:"pb-2",children:[t.jsx(i.ll,{className:"text-xs",children:r.label}),t.jsx(i.SZ,{className:"text-[10px]",children:r.idealLabel})]}),(0,t.jsxs)(i.aY,{children:[t.jsx("div",{className:"rounded-lg overflow-hidden bg-black/30 border border-zinc-800 mb-2",style:{aspectRatio:r.cssAspectRatio},children:e?t.jsx("img",{src:a===s&&g?g:e,alt:`Preview ${a}`,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-zinc-600 text-xs",children:"Sem imagem"})}),t.jsx("p",{className:"text-xs font-medium truncate",children:j||"T\xedtulo"}),t.jsx("p",{className:"text-[10px] text-zinc-500 truncate",children:y||"Subt\xedtulo"}),a===s&&t.jsx("span",{className:"inline-block mt-1 text-[9px] bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Selecionado"})]})]},a))})]}),(0,t.jsxs)(i.Zb,{className:"bg-zinc-900 border-zinc-800",children:[(0,t.jsxs)(i.Ol,{children:[t.jsx(i.ll,{className:"text-sm",children:"\uD83D\uDCE4 Dados de Envio"}),t.jsx(i.SZ,{className:"text-xs",children:"O que seria enviado ao Messenger"})]}),t.jsx(i.aY,{children:t.jsx("pre",{className:"text-[10px] bg-black/40 p-3 rounded border border-zinc-800 overflow-auto max-h-[200px]",children:JSON.stringify({cardFormat:s,cropMode:f,sentImageUrl:E(),originalImageUrl:e,derivedImageUrl:g||null,messengerPayload:{template_type:"generic",elements:[{title:j,subtitle:y,image_url:E()}]}},null,2)})})]}),(0,t.jsxs)(i.Zb,{className:"bg-zinc-900 border-zinc-800",children:[t.jsx(i.Ol,{children:t.jsx(i.ll,{className:"text-sm",children:"\uD83D\uDCCB Log"})}),t.jsx(i.aY,{children:(0,t.jsxs)("div",{className:"space-y-1 max-h-[200px] overflow-auto",children:[0===S.length&&t.jsx("p",{className:"text-xs text-zinc-600",children:"Nenhum log ainda"}),S.map((e,a)=>t.jsx("p",{className:"text-[10px] text-zinc-400 font-mono",children:e},a))]})})]})]})})}},81584:(e,a,s)=>{"use strict";s.d(a,{Ol:()=>d,SZ:()=>c,Zb:()=>l,aY:()=>o,eW:()=>m,ll:()=>n});var t=s(44297),r=s(65803),i=s(67952);let l=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card";let d=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a}));d.displayName="CardHeader";let n=r.forwardRef(({className:e,...a},s)=>t.jsx("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));n.displayName="CardTitle";let c=r.forwardRef(({className:e,...a},s)=>t.jsx("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...a}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...a}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a}));m.displayName="CardFooter"},82984:(e,a,s)=>{"use strict";s.d(a,{I:()=>l});var t=s(44297),r=s(65803),i=s(67952);let l=r.forwardRef(({className:e,type:a,...s},r)=>t.jsx("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));l.displayName="Input"},90096:(e,a,s)=>{"use strict";s.d(a,{_:()=>o});var t=s(44297),r=s(65803),i=s(82455),l=r.forwardRef((e,a)=>(0,t.jsx)(i.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var d=s(65723),n=s(67952);let c=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...a},s)=>t.jsx(l,{ref:s,className:(0,n.cn)(c(),e),...a}));o.displayName=l.displayName},80541:(e,a,s)=>{"use strict";s.d(a,{r:()=>w});var t=s(44297),r=s(65803),i=s(44152),l=s(23423),d=s(91740),n=s(56283),c=s(11225),o=s(98326),m=s(81774),u="Switch",[x,p]=(0,d.b)(u),[b,f]=x(u),h=r.forwardRef((e,a)=>{let{__scopeSwitch:s,name:d,checked:c,defaultChecked:o,required:x,disabled:p,value:f="on",onCheckedChange:h,form:g,...v}=e,[y,w]=r.useState(null),P=(0,l.e)(a,e=>w(e)),k=r.useRef(!1),R=!y||g||!!y.closest("form"),[C,S]=(0,n.T)({prop:c,defaultProp:o??!1,onChange:h,caller:u});return(0,t.jsxs)(b,{scope:s,checked:C,disabled:p,children:[(0,t.jsx)(m.WV.button,{type:"button",role:"switch","aria-checked":C,"aria-required":x,"data-state":N(C),"data-disabled":p?"":void 0,disabled:p,value:f,...v,ref:P,onClick:(0,i.Mj)(e.onClick,e=>{S(e=>!e),R&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),R&&(0,t.jsx)(j,{control:y,bubbles:!k.current,name:d,value:f,checked:C,required:x,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});h.displayName=u;var g="SwitchThumb",v=r.forwardRef((e,a)=>{let{__scopeSwitch:s,...r}=e,i=f(g,s);return(0,t.jsx)(m.WV.span,{"data-state":N(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:a})});v.displayName=g;var j=r.forwardRef(({__scopeSwitch:e,control:a,checked:s,bubbles:i=!0,...d},n)=>{let m=r.useRef(null),u=(0,l.e)(m,n),x=(0,c.D)(s),p=(0,o.t)(a);return r.useEffect(()=>{let e=m.current;if(!e)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(x!==s&&a){let t=new Event("click",{bubbles:i});a.call(e,s),e.dispatchEvent(t)}},[x,s,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...d,tabIndex:-1,ref:u,style:{...d.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function N(e){return e?"checked":"unchecked"}j.displayName="SwitchBubbleInput";var y=s(67952);let w=r.forwardRef(({className:e,...a},s)=>t.jsx(h,{className:(0,y.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...a,ref:s,children:t.jsx(v,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));w.displayName=h.displayName},74573:(e,a,s)=>{"use strict";s.d(a,{JN:()=>t,NQ:()=>r});let t={SQUARE:{label:"Quadrado (1:1)",ratio:1,cssAspectRatio:"1 / 1",idealWidth:1080,idealHeight:1080,idealLabel:"1080\xd71080",messengerRatio:"square",deriveStrategy:"crop"},PORTRAIT:{label:"Retrato (4:5)",ratio:.8,cssAspectRatio:"4 / 5",idealWidth:1080,idealHeight:1350,idealLabel:"1080\xd71350",messengerRatio:"square",deriveStrategy:"fit"},LANDSCAPE:{label:"Paisagem (1.91:1)",ratio:1.91,cssAspectRatio:"1.91 / 1",idealWidth:1200,idealHeight:628,idealLabel:"1200\xd7628",messengerRatio:"horizontal",deriveStrategy:"crop"}};function r(e,a,s,r=.15){let i=0===a?1:e/a,l=t[s]||t.SQUARE;return{isMismatch:Math.abs(i-l.ratio)/l.ratio>r,currentRatio:`${i>1.5?"Paisagem":i<.85?"Retrato":"Quadrado"} (~${i.toFixed(2)}:1)`,recommendation:`Para melhor resultado em ${l.label}, use ${l.idealLabel}.`}}},6709:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let t=(0,s(37460).createProxy)(String.raw`C:\Users\jeang\OneDrive\Desktop\adnext\apps\web\src\app\(dashboard)\test-card-format\page.tsx`),{__esModule:r,$$typeof:i}=t,l=t.default},82455:(e,a,s)=>{"use strict";s.d(a,{WV:()=>l});var t=s(65803);s(42182);var r=s(63551),i=s(44297),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let s=(0,r.Z8)(`Primitive.${a}`),l=t.forwardRef((e,t)=>{let{asChild:r,...l}=e,d=r?s:a;return(0,i.jsx)(d,{...l,ref:t})});return l.displayName=`Primitive.${a}`,{...e,[a]:l}},{})}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[2150,8235,111,2069,6282],()=>s(11265));module.exports=t})();