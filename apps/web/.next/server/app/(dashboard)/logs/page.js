(()=>{var e={};e.id=2100,e.ids=[2100],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},43654:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>x,tree:()=>o});var a=s(28090),r=s(79409),n=s(31522),d=s.n(n),i=s(41305),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let o=["",{children:["(dashboard)",{children:["logs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,38784)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\logs\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,98933)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\logs\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,63470)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,70111,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,13840)),"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,70111,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\(dashboard)\\logs\\page.tsx"],p="/(dashboard)/logs/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/logs/page",pathname:"/logs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},57409:(e,t,s)=>{let a={"67ec2a3b5879da03fd9db50f251cecdfe825c359":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.deleteProject),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.createProject),"7d8e4dd9996424d0e268f2b3af549e67be85e477":()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.updatePageProject),f8668bd5f71af427a636b6031eb02965154b8feb:()=>Promise.resolve().then(s.bind(s,56087)).then(e=>e.getProjects),"6511aec7141895e8bedebb549690cdc948a691f5":()=>Promise.resolve().then(s.bind(s,80736)).then(e=>e.setContext)};async function r(e,...t){return(await a[e]()).apply(null,t)}e.exports={"67ec2a3b5879da03fd9db50f251cecdfe825c359":r.bind(null,"67ec2a3b5879da03fd9db50f251cecdfe825c359"),"7a8a07ed673e87719a224ba5bdd94c5abf5790df":r.bind(null,"7a8a07ed673e87719a224ba5bdd94c5abf5790df"),"7d8e4dd9996424d0e268f2b3af549e67be85e477":r.bind(null,"7d8e4dd9996424d0e268f2b3af549e67be85e477"),f8668bd5f71af427a636b6031eb02965154b8feb:r.bind(null,"f8668bd5f71af427a636b6031eb02965154b8feb"),"6511aec7141895e8bedebb549690cdc948a691f5":r.bind(null,"6511aec7141895e8bedebb549690cdc948a691f5")}},98933:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(71002),r=s(20949);function n(){return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-300",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(r.O,{className:"h-8 w-44 bg-zinc-800"}),a.jsx(r.O,{className:"h-4 w-72 bg-zinc-800/60"})]})}),(0,a.jsxs)("div",{className:"border border-white/10 rounded-lg bg-zinc-950/50 overflow-hidden",children:[a.jsx("div",{className:"bg-zinc-900/50 border-b border-white/5 px-6 py-4 flex gap-8",children:["w-24","w-20","w-20","w-20","w-40","w-16"].map((e,t)=>a.jsx(r.O,{className:`h-4 ${e} bg-zinc-800`},t))}),Array.from({length:6}).map((e,t)=>(0,a.jsxs)("div",{className:"px-6 py-4 flex items-center gap-8 border-b border-white/5 last:border-0",children:[a.jsx(r.O,{className:"h-3 w-28 bg-zinc-800"}),a.jsx(r.O,{className:"h-3 w-20 bg-zinc-800"}),a.jsx(r.O,{className:"h-3 w-24 bg-zinc-800"}),a.jsx(r.O,{className:"h-5 w-24 rounded-full bg-zinc-800"}),a.jsx(r.O,{className:"h-3 w-40 bg-zinc-800"}),a.jsx(r.O,{className:"h-5 w-16 rounded-full bg-zinc-800"})]},t))]})]})}},38784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b,dynamic:()=>x});var a=s(71002),r=s(38588),n=s(11455),d=s(61242),i=s(33573);s(57680);var c=s(69481),o=s(45482);let l=(0,c.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function p({className:e,variant:t,...s}){return a.jsx("div",{className:(0,o.cn)(l({variant:t}),e),...s})}var u=s(65702);let x="force-dynamic";async function b({searchParams:e}){let t=(0,d.e)(),{data:{user:s}}=await t.auth.getUser();s||(0,i.redirect)("/entrar");let[c,o]=await Promise.all([(0,n.A)(s.id,s.email||""),(0,u._)(s.id)]),l=[];e.pageId&&"ALL"!==e.pageId?l=[e.pageId]:o?.pageIds&&o.pageIds.length>0&&(l=o.pageIds);let x=l.length>0?{pageId:{in:l}}:{page:{workspaceId:c.id}},b={page:{workspaceId:c.id},...x},m={page:{workspaceId:c.id},...x};e.status&&"ALL"!==e.status&&(b.status=e.status);let[g,h]=await Promise.all([r._.messageLog.findMany({where:b,orderBy:{createdAt:"desc"},take:50,include:{contact:{select:{firstName:!0,psid:!0}},page:{select:{pageName:!0}}}}),e.status&&"ALL"!==e.status?[]:r._.commentEvent.findMany({where:m,orderBy:{createdAt:"desc"},take:50,include:{page:{select:{pageName:!0}}}})]),f=[...g.map(e=>({id:e.id,type:"MESSAGE",direction:e.direction,source:e.actionType?"AUTOMATION":"WEBHOOK",content:e.incomingText||(e.actionType?`Envio: ${e.actionType}`:"-"),status:e.status,error:e.error,createdAt:e.createdAt,pageName:e.page.pageName,contactName:e.contact?.firstName||e.contact?.psid||"Desconhecido"})),...h.map(e=>({id:e.id,type:"COMMENT",direction:"IN",source:"WEBHOOK_FEED",content:e.message||"[Sem texto]",status:"RECEIVED",error:null,createdAt:e.createdAt,pageName:e.page.pageName,contactName:e.fromUserId||"Usu\xe1rio Facebook"}))].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,50);return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Logs & Eventos"}),a.jsx("p",{className:"text-muted-foreground",children:"Hist\xf3rico unificado de mensagens e coment\xe1rios."})]})}),(0,a.jsxs)("div",{className:"border border-white/10 rounded-lg bg-zinc-950/50 backdrop-blur overflow-hidden",children:[(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-zinc-900/50 text-zinc-400 font-medium border-b border-white/5",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-4",children:"Data"}),a.jsx("th",{className:"px-6 py-4",children:"P\xe1gina"}),a.jsx("th",{className:"px-6 py-4",children:"Origem"}),a.jsx("th",{className:"px-6 py-4",children:"Tipo"}),a.jsx("th",{className:"px-6 py-4",children:"Conte\xfado"}),a.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-white/5 text-zinc-300",children:f.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-zinc-400",children:new Date(e.createdAt).toLocaleString("pt-BR")}),a.jsx("td",{className:"px-6 py-4 text-xs",children:e.pageName}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-col",children:a.jsx("span",{className:"text-sm",children:e.contactName})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(p,{variant:"outline",className:`
                                        ${"COMMENT"===e.type?"text-yellow-400 bg-yellow-400/10 border-yellow-400/20":""}
                                        ${"MESSAGE"===e.type&&"IN"===e.direction?"text-blue-400 bg-blue-400/10 border-blue-400/20":""}
                                        ${"MESSAGE"===e.type&&"OUT"===e.direction?"text-purple-400 bg-purple-400/10 border-purple-400/20":""}
                                    `,children:"COMMENT"===e.type?"COMENT\xc1RIO":"IN"===e.direction?"MSG RECEBIDA":"MSG ENVIADA"})}),a.jsx("td",{className:"px-6 py-4 max-w-xs truncate",title:e.content,children:e.content}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx(p,{variant:"secondary",className:"ERROR"===e.status||"FAILED"===e.status?"bg-red-500/10 text-red-500":"MATCHED"===e.status||"SENT"===e.status||"RECEIVED"===e.status?"bg-green-500/10 text-green-500":"bg-zinc-800 text-zinc-400",children:e.status}),e.error&&a.jsx("span",{className:"text-[10px] text-red-400 max-w-[150px] truncate",children:e.error})]})})]},e.id))})]}),0===f.length&&a.jsx("div",{className:"p-12 text-center text-zinc-500",children:"Nenhum log encontrado."})]})]})}},69481:(e,t,s)=>{"use strict";s.d(t,{j:()=>d});var a=s(76031);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.W,d=(e,t)=>s=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:d,defaultVariants:i}=t,c=Object.keys(d).map(e=>{let t=null==s?void 0:s[e],a=null==i?void 0:i[e];if(null===t)return null;let n=r(t)||r(a);return d[e][n]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return n(e,c,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:a,...r}=t;return Object.entries(r).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...o}[t]):({...i,...o})[t]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[2150,3422,8235,111,3955,1089,3321,3573,2520,7401],()=>s(43654));module.exports=a})();