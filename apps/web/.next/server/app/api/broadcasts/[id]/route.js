"use strict";(()=>{var e={};e.id=2405,e.ids=[2405],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},17834:(e,a,t)=>{t.r(a),t.d(a,{headerHooks:()=>f,originalPathname:()=>x,patchFetch:()=>k,requestAsyncStorage:()=>h,routeModule:()=>w,serverHooks:()=>g,staticGenerationAsyncStorage:()=>b,staticGenerationBailout:()=>v});var r={};t.r(r),t.d(r,{GET:()=>p,PATCH:()=>m,runtime:()=>l});var i=t(22534),s=t(79409),n=t(36717),o=t(27445),d=t(38588),c=t(61242),u=t(11455);let l="nodejs";async function p(e,{params:a}){let t=(0,c.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return o.Z.json({error:"Unauthorized"},{status:401});let i=await (0,u.A)(r.id,r.email||""),s=await d._.broadcastCampaign.findUnique({where:{id:a.id,workspaceId:i.id},include:{page:!0}});return s?o.Z.json(s):o.Z.json({error:"Campaign not found"},{status:404})}async function m(e,{params:a}){let t=(0,c.e)(),{data:{user:r}}=await t.auth.getUser();if(!r)return o.Z.json({error:"Unauthorized"},{status:401});let i=await (0,u.A)(r.id,r.email||""),{status:s}=await e.json(),n=await d._.broadcastCampaign.update({where:{id:a.id,workspaceId:i.id},data:{status:s}});return o.Z.json(n)}let w=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/broadcasts/[id]/route",pathname:"/api/broadcasts/[id]",filename:"route",bundlePath:"app/api/broadcasts/[id]/route"},resolvedPagePath:"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\api\\broadcasts\\[id]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:b,serverHooks:g,headerHooks:f,staticGenerationBailout:v}=w,x="/api/broadcasts/[id]/route";function k(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:b})}},38588:(e,a,t)=>{t.d(a,{_:()=>i});var r=t(53524);let i=globalThis.prisma??new r.PrismaClient({log:["error","warn"]})},61242:(e,a,t)=>{t.d(a,{e:()=>s});var r=t(51441),i=t(97705);function s(){let e=(0,i.cookies)(),a="https://fmxdqpukjuzhiseyobvz.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZteGRxcHVranV6aGlzZXlvYnZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2Mjk4MjYsImV4cCI6MjA4NTIwNTgyNn0.bXEJnoTUSzAVDwQNwwiG1gmFc0rfK5M9xbKFMRb48BY";return a&&t||(console.warn("⚠️ Missing Supabase environment variables. Using fallback for build."),"build"!==process.env.npm_lifecycle_event&&a)?(0,r.lx)(a||"",t||"",{cookies:{get:a=>e.get(a)?.value,set(a,t,r){try{e.set({name:a,value:t,...r})}catch(e){}},remove(a,t){try{e.set({name:a,value:"",...t})}catch(e){}}}}):(0,r.lx)(a||"https://placeholder.supabase.co",t||"placeholder",{cookies:{get:()=>void 0,set:()=>{},remove:()=>{}}})}},11455:(e,a,t)=>{t.d(a,{A:()=>i});var r=t(38588);async function i(e,a){let t=await r._.workspaceMember.findFirst({where:{userId:e},include:{workspace:!0}});if(t)return t.workspace;let i=await r._.user.findUnique({where:{id:e}});if(!i){if(a)i=await r._.user.create({data:{id:e,email:a}});else throw Error("User not found and no email provided")}return await r._.workspace.create({data:{name:"Meu Workspace",ownerId:e,members:{create:{userId:e,role:"OWNER"}},workflowFolders:{create:{name:"Geral"}}}})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[2150,6363,3422],()=>t(17834));module.exports=r})();