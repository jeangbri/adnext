"use strict";(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},33592:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>f,patchFetch:()=>b,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>h});var a={};t.r(a),t.d(a,{POST:()=>p});var o=t(22534),s=t(79409),n=t(36717),i=t(27445),u=t(79938),l=t(61242);async function p(e){let r=(0,l.e)(),{data:{user:t},error:a}=await r.auth.getUser();if(!t||a)return i.Z.json({error:"Unauthorized"},{status:401});try{let r=(await e.formData()).get("file");if(!r)return i.Z.json({error:"No file provided"},{status:400});if(r.size>20971520)return i.Z.json({error:"File too large (20MB max)"},{status:400});let t="https://fmxdqpukjuzhiseyobvz.supabase.co",a=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!t||!a)return console.error("Missing Supabase Env Vars",{url:!!t,key:!!a}),i.Z.json({error:"Server configuration error: Missing Supabase keys. Please add SUPABASE_SERVICE_ROLE_KEY to environment variables."},{status:500});let o=(0,u.eI)(t,a),s=r.name.split(".").pop(),n=`${Math.random().toString(36).substring(2)}.${s}`,l=`uploads/${n}`,p=await r.arrayBuffer(),c=new Uint8Array(p),{data:d,error:m}=await o.storage.from("media").upload(l,c,{contentType:r.type,cacheControl:"3600",upsert:!1});if(m)return console.error("Upload error:",m),i.Z.json({error:m.message},{status:500});let{data:{publicUrl:g}}=o.storage.from("media").getPublicUrl(l);return i.Z.json({url:g})}catch(e){return console.error("Upload handler error:",e),i.Z.json({error:e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"C:\\Users\\jeang\\OneDrive\\Desktop\\adnext\\apps\\web\\src\\app\\api\\upload\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:v,staticGenerationBailout:h}=c,f="/api/upload/route";function b(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},61242:(e,r,t)=>{t.d(r,{e:()=>s});var a=t(51441),o=t(97705);function s(){let e=(0,o.cookies)(),r="https://fmxdqpukjuzhiseyobvz.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZteGRxcHVranV6aGlzZXlvYnZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2Mjk4MjYsImV4cCI6MjA4NTIwNTgyNn0.bXEJnoTUSzAVDwQNwwiG1gmFc0rfK5M9xbKFMRb48BY";return r&&t||(console.warn("⚠️ Missing Supabase environment variables. Using fallback for build."),"build"!==process.env.npm_lifecycle_event&&r)?(0,a.lx)(r||"",t||"",{cookies:{get:r=>e.get(r)?.value,set(r,t,a){try{e.set({name:r,value:t,...a})}catch(e){}},remove(r,t){try{e.set({name:r,value:"",...t})}catch(e){}}}}):(0,a.lx)(r||"https://placeholder.supabase.co",t||"placeholder",{cookies:{get:()=>void 0,set:()=>{},remove:()=>{}}})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[2150,6363,3422],()=>t(33592));module.exports=a})();